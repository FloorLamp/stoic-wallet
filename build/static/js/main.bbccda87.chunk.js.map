{"version":3,"sources":["ledger.did.js","util/RosettaApi.js","ledger.js","components/Nav.js","components/Sidebar.js","components/Footer.js","components/Send.js","components/Balance.js","components/Balances.js","components/Account.js","components/Lockscreen.js","img/ii.png","components/Login.js","img/pk.png","App.js","index.js"],"names":["IDL","AccountIdentifier","Text","Duration","Record","Nat64","Nat32","ArchiveOptions","Opt","Principal","ICPTs","AccountBalanceArgs","Vec","Tuple","SubAccount","Nat8","BlockHeight","NotifyCanisterArgs","Memo","TimeStamp","SendArgs","Service","Func","JSONbig","jsonBigint","strict","RosettaErrorType","Object","freeze","NotFound","Timeout","NetworkError","RosettaError","message","status","errorType","Error","Transaction","rosettaTransaction","blockIndex","this","hash","transaction_identifier","timestampMs","metadata","timestamp","div","toNumber","Date","operations","length","type","account1Address","account","address","amount","BigNumber","value","isZero","negated","account2Address","fee","memo","RosettaApi","axios","create","baseURL","method","transformRequest","data","stringify","transformResponse","parse","headers","networkIdentifier","networksList","then","res","network_identifiers","find","blockchain","accountAddress","a","accountBalanceByAddress","response","balances","isAxiosError","undefined","networkStatus","current_block_identifier","index","transactionHash","transactionsByHash","responseTransactions","transactions","transaction","block_identifier","limit","maxBlockIndex","offset","Math","max","transactionCount","min","i","getTransactionByBlock","push","transactionsByAccount","Promise","all","map","blockTransaction","reverse","blockByIndex","block","url","request","network_identifier","account_identifier","identity","API","authClient","sjcl","require","bip39","pbkdf2","getSubAccountArray","s","Array","fill","concat","to32bits","num","b","ArrayBuffer","DataView","setUint32","from","Uint8Array","toHexString","byteArray","byte","toString","slice","join","mnemonicToId","mnemonic","seed","mnemonicToSeedSync","splice","Ed25519KeyIdentity","generate","init","AuthClient","getIdentity","id","initAPI","Actor","createActor","idlFactory","agent","HttpAgent","host","canisterId","principal","getPrincipal","rosettaApi","ICPLedger","setup","o","resolve","reject","login","identityProvider","onSuccess","localStorage","setItem","_em","password","encrypt","pbkdf2Sync","btoa","load","t","getItem","unlock","tl","atob","decrypt","console","log","lock","logout","removeItem","clear","p2aid","p","padding","Buffer","array","fromText","toBlob","sha224","checksum","getCrc32","array2","validateMnemonic","generateMnemonic","getBalance","aid","getAccountBalance","Number","getTokenBalance","tid","getTransactions","getTransactionsByAccount","ts","isArray","_ts","_t","to","transfer","to_aid","from_sub","sargs","send_dfx","_wfn","CustomToggle","React","forwardRef","ref","children","onClick","href","e","preventDefault","copyTextToClipboard","text","navigator","clipboard","writeText","err","error","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","msg","execCommand","removeChild","fallbackCopyTextToClipboard","props","useState","warningDialog","_warningDialog","warningText","_warningText","warning","f","className","target","icon","faBars","Dropdown","alignRight","Toggle","as","menuAlign","pp","split","substr","compressPrincipal","Menu","Item","lockWallet","Divider","clearWallet","Dialog","open","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","variant","Blockie","src","makeBlockie","Component","connectionTypes","accounts","_accounts","connectionType","_connectionType","useEffect","changeAccount","currentAccount","name","addAccount","faPlus","MINFEE","toaddress","_toaddress","_amount","_fee","showPopup","_showPopup","popupTitle","_popupTitle","popupText","_popupText","confirm","_confirm","hideLoader","loader","renderError","htmlFor","onChange","placeholder","isNaN","currentBalance","aria-describedby","send","catch","selected","clickEv","token","symbol","price","show","setShow","showToken","_showToken","handleClose","Balance","changeToken","currentToken","display","onClose","TextField","autoFocus","margin","label","fullWidth","currentAccountName","accountName","_accountName","handleShow","OverlayTrigger","trigger","rootClose","placement","delay","hide","overlay","Tooltip","faCopy","align","faEllipsisV","event","updateName","useStyles","makeStyles","root","minWidth","bullet","transform","title","fontSize","pos","marginBottom","showIIDialog","_showIIDialog","showPKDialog","_showPKDialog","dmnemonic","_dmnemonic","_mnemonic","_password","cpassword","_cpassword","showError","_showError","_error","key","setKey","stage","_stage","classes","rel","Card","CardContent","Alert","iiimage","ll","width","Tabs","activeKey","onSelect","k","Tab","eventKey","FormControl","height","Form","Group","Label","Control","setTimeout","alert","_defaultDb","appData","UNLOCKED","ACTIVE","INTV","initDb","JSON","_b","_a","updateDb","updatedDb","App","_currentAccount","_currentToken","_balances","_currentAccountName","unlocked","_unlocked","active","_active","isLoaderActive","_isLoaderActive","fetchAllData","j","arr","clearInterval","numf","n","d","toFixed","replace","checkLoad","setInterval","spinner","Nav","Sidebar","Account","v","setAccounts","deleteAccount","Balances","addToken","defaultActiveKey","relative","autoUpdate","date","Send","Footer","Lockscreen","Login","tc","assign","newDb","ReactDOM","render","getElementById","window","addEventListener","sidebarToggle","querySelector","classList","toggle","contains"],"mappings":"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","file":"static/js/main.bbccda87.chunk.js","sourcesContent":["export default ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  const AccountBalanceArgs = IDL.Record({ 'account' : AccountIdentifier });\r\n  const SubAccount = IDL.Vec(IDL.Nat8);\r\n  const BlockHeight = IDL.Nat64;\r\n  const NotifyCanisterArgs = IDL.Record({\r\n    'to_subaccount' : IDL.Opt(SubAccount),\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'to_canister' : IDL.Principal,\r\n    'max_fee' : ICPTs,\r\n    'block_height' : BlockHeight,\r\n  });\r\n  const Memo = IDL.Nat64;\r\n  const TimeStamp = IDL.Record({ 'timestamp_nanos' : IDL.Nat64 });\r\n  const SendArgs = IDL.Record({\r\n    'to' : AccountIdentifier,\r\n    'fee' : ICPTs,\r\n    'memo' : Memo,\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'created_at_time' : IDL.Opt(TimeStamp),\r\n    'amount' : ICPTs,\r\n  });\r\n  return IDL.Service({\r\n    'account_balance_dfx' : IDL.Func([AccountBalanceArgs], [ICPTs], ['query']),\r\n    'notify_dfx' : IDL.Func([NotifyCanisterArgs], [], []),\r\n    'send_dfx' : IDL.Func([SendArgs], [BlockHeight], []),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  return [LedgerCanisterInitPayload];\r\n};","/**\r\n * @file RosettaApi\r\n * @copyright Copyright (c) 2018-2021 Dylan Miller and dfinityexplorer contributors\r\n * @license MIT License\r\n */\r\n\r\nimport axios from 'axios';\r\nimport BigNumber from 'bignumber.js';\r\nimport jsonBigint from 'json-bigint';\r\n\r\n// Set useNativeBigInt to true and use BigInt once BigInt is widely supported.\r\nconst JSONbig = jsonBigint({ strict: true });\r\n\r\n/**\r\n * Types of Rosetta API errors.\r\n */\r\nexport const RosettaErrorType = Object.freeze({\r\n  NotFound: 0,\r\n  Timeout: 1,\r\n  NetworkError: 2\r\n});\r\n\r\n/**\r\n * Describes the cause of a Rosetta API error.\r\n */\r\nexport class RosettaError extends Error {\r\n  /**\r\n   * Create a RosettaError.\r\n   * @param {String} message An error message describing the error.\r\n   * @param {Number} status number The HTTP response status.\r\n   */\r\n  constructor(message, status) {\r\n    super(message);\r\n    switch (status) {\r\n    case 408:\r\n      this.errorType = RosettaErrorType.Timeout;\r\n      break;\r\n    case 500:\r\n      this.errorType = RosettaErrorType.NotFound;\r\n      break;\r\n    default:\r\n      this.errorType = RosettaErrorType.NetworkError;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Contains information about a transaction.\r\n */\r\nexport class Transaction  {\r\n  /**\r\n   * Create a Transaction.\r\n   * @param {Any} rosettaTransaction The Rosetta Transaction object of the transaction.\r\n   * @param {Number} blockIndex The index of the block containing the transaction.\r\n   * milliseconds since the Unix Epoch.\r\n   */\r\n  constructor(rosettaTransaction, blockIndex) {\r\n    this.blockIndex = blockIndex;\r\n    this.hash = rosettaTransaction.transaction_identifier.hash;\r\n    const timestampMs = rosettaTransaction.metadata.timestamp.div(1000000).toNumber();\r\n    this.timestamp = new Date(timestampMs);\r\n    const operations = rosettaTransaction.operations;\r\n    if (operations.length >= 1) { \r\n      this.type = operations[0].type;\r\n      this.status = operations[0].status;\r\n      this.account1Address = operations[0].account.address;\r\n      this.amount = new BigNumber(operations[0].amount.value);\r\n      // Negate amount for TRANSACTION and BURN, so that they appear in the UI as positive values.\r\n      if ((operations[0].type === 'TRANSACTION' || operations[0].type === 'BURN') &&\r\n        !this.amount.isZero()) {\r\n        this.amount = this.amount.negated();\r\n      }\r\n    }\r\n    else {\r\n      this.type = '';\r\n      this.status = '';\r\n      this.account1Address = '';\r\n      this.amount = new BigNumber(0);\r\n    }\r\n    if (operations.length >= 2 && operations[1].type === 'TRANSACTION')\r\n      this.account2Address = operations[1].account.address;\r\n    else\r\n      this.account2Address = '';\r\n    if (operations.length >= 3 && operations[2].type === 'FEE')\r\n      this.fee = new BigNumber(-operations[2].amount.value);\r\n    else\r\n      this.fee = new BigNumber(0);\r\n    this.memo = new BigNumber(rosettaTransaction.metadata.memo);\r\n  }\r\n};\r\n\r\n/**\r\n * Manages Rosetta API calls.\r\n */\r\nexport default class RosettaApi {\r\n  /**\r\n   * Create a RosettaApi.\r\n   */\r\n  constructor() {\r\n    this.axios = axios.create({\r\n      baseURL: 'https://rosetta-api.internetcomputer.org/',\r\n      method: 'post',\r\n      transformRequest: (data) => JSONbig.stringify(data),\r\n      transformResponse: (data) => JSONbig.parse(data),\r\n      headers: { 'Content-Type': 'application/json;charset=utf-8' }\r\n    });\r\n\r\n    this.networkIdentifier = this.networksList().then(res =>\r\n      res.network_identifiers.find(\r\n        networkIdentifier => networkIdentifier.blockchain === 'Internet Computer'\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the ICP account balance of the specified account.\r\n   * @param {string} accountAddress The account address to get the ICP balance of.\r\n   * @returns {Promise<BigNumber|RosettaError>} The ICP account balance of the specified account, or\r\n   * a RosettaError for error.\r\n   */\r\n  async getAccountBalance(accountAddress) {\r\n    try {\r\n      const response = await this.accountBalanceByAddress(accountAddress);\r\n      return new BigNumber(response.balances[0].value);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the latest block index.\r\n   * @returns {Promise<number>} The latest block index, or a RosettaError for error.\r\n   */\r\n  async getLastBlockIndex() {\r\n    try {\r\n      const response = await this.networkStatus();\r\n      return response.current_block_identifier.index;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction object with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Transaction|null} The Transaction object with the specified hash, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransaction(transactionHash) {\r\n    try {\r\n      const responseTransactions = await this.transactionsByHash(transactionHash);\r\n      if (responseTransactions.transactions.length === 0)\r\n        return new RosettaError('Transaction not found.', 500);\r\n\r\n      return new Transaction(\r\n        responseTransactions.transactions[0].transaction,\r\n        responseTransactions.transactions[0].block_identifier.index);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param limit {number} The maximum number of transactions to return in one call.\r\n   * @param maxBlockIndex {number} The block index to start at. If not specified, start at current\r\n   * block.\r\n   * @param offset {number} The offset from maxBlockIndex to start returning transactions.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactions(limit, maxBlockIndex, offset) {\r\n    try {\r\n      // This function can be simplified once /search/transactions supports using the properties\r\n      // max_block, offset, and limit.\r\n      let blockIndex;\r\n      if (maxBlockIndex)\r\n        blockIndex = maxBlockIndex;\r\n      else {\r\n        // Get the latest block index.\r\n        const response = await this.networkStatus();\r\n        blockIndex = response.current_block_identifier.index;\r\n      }\r\n      if (offset)\r\n        blockIndex = Math.max(blockIndex - offset, -1);\r\n      const transactionCount = Math.min(limit, blockIndex + 1);\r\n      const transactions = [];\r\n      for (let i = 0; i < transactionCount; i++)\r\n        transactions.push(await this.getTransactionByBlock(blockIndex - i));\r\n      return transactions;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactionsByAccount(accountAddress) {\r\n    try {\r\n      const response = await this.transactionsByAccount(accountAddress);\r\n      const transactions = await Promise.all(\r\n        response.transactions.map((blockTransaction) => {\r\n          return new Transaction(\r\n            blockTransaction.transaction, blockTransaction.block_identifier.index);\r\n        })\r\n      );\r\n      return transactions.reverse();\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction corresponding to the specified block index (i.e., block height).\r\n   * @param {number} blockIndex The index of the block to return the Transaction for.\r\n   * @returns {Promise<Transaction>} The Transaction corresponding to the specified block index.\r\n   * @private\r\n   */\r\n  async getTransactionByBlock(blockIndex) {\r\n    const response = await this.blockByIndex(blockIndex);\r\n    return new Transaction(response.block.transactions[0], blockIndex);\r\n  }\r\n\r\n  /**\r\n   * Perform the specified http request and return the response data.\r\n   * @param {string} url The server URL that will be used for the request.\r\n   * @param {object} data The data to be sent as the request body.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async request(url, data) {\r\n    return (await this.axios.request({ url: url, data: data })).data;\r\n  }\r\n\r\n  /**\r\n   * Return the /network/list response, containing a list of NetworkIdentifiers that the Rosetta\r\n   * server supports.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  networksList() {\r\n    return this.request('/network/list', {});\r\n  }\r\n\r\n  /**\r\n   * Return /network/status response, describing the current status of the network.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async networkStatus() {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/network/status', {\r\n        network_identifier: networkIdentifier\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /account/balance response for the specified account.\r\n   * @param {string} accountAddress The account address to get the balance of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async accountBalanceByAddress(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/account/balance', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /block response for the block corresponding to the specified block index (i.e.,\r\n   * block height).\r\n   * @param {number} blockIndex The index of the block to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async blockByIndex(blockIndex) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/block', {\r\n        network_identifier: networkIdentifier,\r\n        block_identifier: {index: blockIndex}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions containing an operation that affects\r\n   * the specified account.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByAccount(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions (only one) with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByHash(transactionHash) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        transaction_identifier: {hash: transactionHash}\r\n      }\r\n    );\r\n  }\r\n}","import { Actor, HttpAgent, Principal } from \"@dfinity/agent\";  \r\nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\r\nimport { AuthClient } from \"@dfinity/auth-client\";\r\nimport idlFactory from './ledger.did.js';\r\nimport { getCrc32 } from '@dfinity/agent/lib/esm/utils/getCrc';\r\nimport { sha224 } from '@dfinity/agent/lib/esm/utils/sha224';\r\nimport RosettaApi from './util/RosettaApi.js';\r\nconst sjcl = require('sjcl')\r\nconst bip39 = require('bip39')\r\nconst pbkdf2 = require(\"pbkdf2\");\r\nconst canisterId = \"ryjl3-tyaaa-aaaaa-aaaba-cai\";\r\n\r\n//Helpers\r\nconst principalToAccountIdentifier = (p, s) => {\r\n  const padding = Buffer(\"\\x0Aaccount-id\");\r\n  const array = new Uint8Array([\r\n      ...padding,\r\n      ...Principal.fromText(p).toBlob(),\r\n      ...getSubAccountArray(s)\r\n  ]);\r\n  const hash = sha224(array);\r\n  const checksum = to32bits(getCrc32(hash));\r\n  const array2 = new Uint8Array([\r\n      ...checksum,\r\n      ...hash\r\n  ]);\r\n  return toHexString(array2);\r\n};\r\nconst getSubAccountArray = (s) => {\r\n  return Array(28).fill(0).concat(to32bits(s ? s : 0))\r\n};\r\nconst to32bits = num => {\r\n  let b = new ArrayBuffer(4);\r\n  new DataView(b).setUint32(0, num);\r\n  return Array.from(new Uint8Array(b));\r\n}\r\nconst toHexString = (byteArray)  =>{\r\n  return Array.from(byteArray, function(byte) {\r\n    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n  }).join('')\r\n}\r\nconst mnemonicToId = (mnemonic) => {\r\n  var seed = bip39.mnemonicToSeedSync(mnemonic);\r\n  seed = Array.from(seed);\r\n  seed = seed.splice(0, 32);\r\n  seed = new Uint8Array(seed);\r\n  return Ed25519KeyIdentity.generate(seed);\r\n}\r\nconst encrypt = (mnemonic, principal, password) => {\r\n  return sjcl.encrypt(pbkdf2.pbkdf2Sync(password, principal, 30000, 512, 'sha512').toString(), btoa(mnemonic));\r\n}\r\nconst decrypt = (data, principal, password) => {\r\n  return sjcl.decrypt(pbkdf2.pbkdf2Sync(password, principal, 30000, 512, 'sha512').toString(), data);\r\n}\r\n//Initiates the API\r\nvar identity, API, authClient;\r\nconst init = async () => {\r\n  authClient = await AuthClient.create();\r\n  var id = await authClient.getIdentity();\r\n  initAPI(id);\r\n}\r\nconst initAPI = (id, type) => {\r\n  identity = id;\r\n  API = Actor.createActor(idlFactory, {\r\n    agent: new HttpAgent({\r\n      host: \"https://boundary.ic0.app/\",\r\n      identity,\r\n    }),\r\n    canisterId,\r\n  });\r\n  return {\r\n    principal : identity.getPrincipal().toString(),\r\n    type : type ?? 'default'\r\n  };\r\n}\r\nconst rosettaApi = new RosettaApi();\r\nvar ICPLedger = {\r\n  //Identity management\r\n  init : init,\r\n  //When generating a new identity to use with the wallet\r\n  setup : (o) => { //promise\r\n    return new Promise((resolve, reject) => {\r\n      switch(o.type){\r\n        case \"ii\":\r\n          authClient.login({\r\n            identityProvider: \"https://identity.ic0.app/\",\r\n            onSuccess: async () => {\r\n              var id = await authClient.getIdentity()\r\n              resolve(initAPI(id, o.type));\r\n            },\r\n          });\r\n          break;\r\n        case \"private\":\r\n          localStorage.setItem('_m', o.mnemonic);\r\n          var id = mnemonicToId(o.mnemonic);\r\n          var _em = encrypt(o.mnemonic, id.getPrincipal().toString(), o.password);\r\n          localStorage.setItem('_em', _em);\r\n          resolve(initAPI(id, o.type));\r\n          break;\r\n      }\r\n    });\r\n  },\r\n  //Check if a stored identity is currently unlocked and ready to use. This must be called prior to any API calls as the potential user\r\n  load : (o) => {\r\n    switch(o.type){\r\n      case \"ii\":\r\n        if (identity.getPrincipal().toString() != '2vxsx-fae') {\r\n          return { \r\n            principal : identity.getPrincipal().toString(),\r\n            type : o.type\r\n          }\r\n        } else return false;\r\n        break;\r\n      case \"private\":\r\n        var t = localStorage.getItem('_m');\r\n        if (!t) return false;\r\n        var mnemonic = t;\r\n        var id = mnemonicToId(mnemonic);\r\n        return initAPI(id, o.type);\r\n        break;\r\n    }\r\n  },\r\n  \r\n  //Unlocked a stored identity that is currently locked\r\n  unlock : (o) => { //promise\r\n    return new Promise((resolve, reject) => {\r\n      var tl = ICPLedger.load(o);\r\n      if (tl) return resolve(tl);\r\n      switch(o.type){\r\n        case \"ii\":\r\n          authClient.login({\r\n            identityProvider: \"https://identity.ic0.app/\",\r\n            onSuccess: async () => {\r\n              var id = await authClient.getIdentity()\r\n              resolve(initAPI(id, o.type));\r\n            },\r\n          });\r\n          break;\r\n        case \"private\":\r\n          var t = localStorage.getItem('_em');\r\n          if (!t) return reject(\"No encrypted data to decrypt\");\r\n          \r\n          var mnemonic = atob(decrypt(t, o.principal, o.password));\r\n          localStorage.setItem('_m', mnemonic);\r\n          var id = mnemonicToId(mnemonic);\r\n          console.log(id);\r\n          resolve(initAPI(id, o.type));\r\n          break;\r\n      }\r\n    });\r\n  },\r\n  //Lock and clear stored identities\r\n  lock : (o) => {\r\n    switch(o.type){\r\n      case \"ii\":\r\n          authClient.logout();\r\n          initAPI(identity);\r\n        break;\r\n      case \"private\":\r\n          localStorage.removeItem(\"_m\");\r\n        break;\r\n    }\r\n  },\r\n  clear : (o) => {\r\n    switch(o.type){\r\n      case \"ii\":\r\n          authClient.logout();\r\n        break;\r\n      case \"private\":\r\n          localStorage.removeItem(\"_m\");\r\n          localStorage.removeItem(\"_em\");\r\n        break;\r\n    }\r\n  },\r\n  \r\n  //Helpers\r\n  p2aid : principalToAccountIdentifier,\r\n  getIdentity : () => identity,\r\n  validateMnemonic : bip39.validateMnemonic,\r\n  generateMnemonic : bip39.generateMnemonic,\r\n  //Ledger API\r\n  getBalance : (aid) => {\r\n    return new Promise((resolve, reject) => {\r\n      rosettaApi.getAccountBalance(aid).then(b => {        \r\n        resolve(Number(b)/(10**8))\r\n      });\r\n    });\r\n  },\r\n  getTokenBalance : (tid, aid) => {\r\n    //TODO\r\n    return ICPLedger.getBalance(aid);\r\n  },\r\n  getTransactions : (aid, i) => {\r\n    return new Promise((resolve, reject) => {\r\n      rosettaApi.getTransactionsByAccount(aid).then(ts => {    \r\n        if (!Array.isArray(ts)) return;\r\n        var _ts = [];\r\n        ts.map(_t => {\r\n          if (_t.type != \"TRANSACTION\") return;\r\n          if (_t.status != \"COMPLETED\") return;\r\n          _ts.push({\r\n            from : _t.account1Address,\r\n            to :  _t.account2Address,\r\n            amount : Number(_t.amount)/(10**8),\r\n            fee : Number(_t.fee)/(10**8),\r\n            hash : _t.hash,\r\n            timestamp : _t.timestamp,\r\n          });\r\n        });\r\n        resolve(_ts);\r\n      });\r\n    });\r\n  },\r\n  transfer : async (to_aid, fee, memo, from_sub, amount) => {\r\n    var sargs = {\r\n      \"to\" : to_aid, \r\n      \"fee\" : { \"e8s\" : fee*100000000 }, \r\n      \"memo\" : memo, \r\n      \"from_subaccount\" : [getSubAccountArray(from_sub)], \r\n      \"created_at_time\" : [], \r\n      \"amount\" : { \"e8s\" : amount*100000000}\r\n    };\r\n    var b = await API.send_dfx(sargs)\r\n    return b;\r\n  },\r\n}\r\nexport {ICPLedger};","import React, { useState } from 'react';\r\nimport { Dropdown } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faBars } from '@fortawesome/free-solid-svg-icons'\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n  <a\r\n    href=\"\"\r\n    ref={ref}\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n    &#x25bc;\r\n  </a>\r\n));\r\nfunction fallbackCopyTextToClipboard(text) {\r\n  \r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n  \r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\nfunction copyTextToClipboard(text) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function() {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function(err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\nvar _wfn;\r\nexport default (props) => {\r\n  const [warningDialog, _warningDialog] = useState(false);\r\n  const [warningText, _warningText] = useState('');\r\n  \r\n  function copyPrincipal(){\r\n    copyTextToClipboard(props.principal);\r\n  }\r\n  function compressPrincipal(p){\r\n    if (!p) return \"\";\r\n    var pp = p.split(\"-\");\r\n    if (pp.length <= 4) return p;\r\n    else {\r\n      return pp[0] + \"-\" + pp[1].substr(0, 3) + \"...\" + pp[pp.length-3].substr(2) + \"-\" + pp[pp.length-2] + \"-\" + pp[pp.length-1];\r\n    }\r\n  }\r\n  function warning(t, f){\r\n    _warningText(t);\r\n    _wfn = f;\r\n    _warningDialog(true)\r\n  }\r\n  function wdfn(){\r\n    _wfn();\r\n    _warningDialog(false)\r\n  }\r\n  return (\r\n    <>\r\n      <nav className=\"sb-topnav navbar navbar-expand navbar-dark bg-dark\">\r\n          <a className=\"navbar-brand ps-3\"  target=\"_blank\" href=\"https://toniqlabs.com\">Elastic Wallet <small>by Toniq Labs</small></a>\r\n          <button className=\"btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0\" id=\"sidebarToggle\" href=\"#!\"><FontAwesomeIcon icon={faBars} /></button> \r\n          <ul className=\"navbar-nav ms-auto me-0 me-md-3 my-2 my-md-0\">\r\n              <li className=\"nav-item dropdown\">\r\n                  <Dropdown alignRight>\r\n                    <Dropdown.Toggle as={CustomToggle}menuAlign=\"right\">\r\n                      Logged in as {compressPrincipal(props.principal)}\r\n                    </Dropdown.Toggle>\r\n\r\n                    <Dropdown.Menu>\r\n                      <Dropdown.Item onClick={copyPrincipal}>Copy Principal</Dropdown.Item>\r\n                      <Dropdown.Item onClick={() => warning(\"Locking your wallet can help to stop unauthorized access, but private details regarding your account will still be stored on this device. If you connected using a mnenomic phrase, an ecrypted version will remain on this device.\", props.lockWallet)}>Lock Wallet</Dropdown.Item>\r\n                      <Dropdown.Divider />\r\n                      <Dropdown.Item onClick={() => warning(\"This will clear all data from this device, including any names you have given your accounts. All balances will remain and this wallet can be restored in future if you have the corresponding seed/access devices\", props.clearWallet)}>Clear Wallet</Dropdown.Item>\r\n                    </Dropdown.Menu>\r\n                  </Dropdown>\r\n              </li>\r\n          </ul>\r\n      </nav>      \r\n      <Dialog open={warningDialog} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Please read first</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{warningText}</DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _warningDialog(false)} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={wdfn} variant=\"primary\">\r\n            Continue\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport makeBlockie from 'ethereum-blockies-base64';\r\n\r\nclass Blockie extends React.Component {\r\n  render() {\r\n    return <img src={makeBlockie(this.props.address)}/>\r\n  }\r\n}\r\nconst connectionTypes = {\r\n  \"ii\" : \"Internet Identity\",\r\n  \"ledgerhq\" : \"LedgerHQ\",\r\n  \"trezor\" : \"Trezor\",\r\n  \"private\" : \"PrivateKey\",\r\n  \"metamask\" : \"Metamask\",\r\n};\r\nexport default (props) => {\r\n  const [accounts, _accounts] = useState(props.accounts);\r\n  const [connectionType, _connectionType] = useState(props.connectionType);\r\n  useEffect(() => {\r\n     _accounts(props.accounts);\r\n     _connectionType(props.connectionType);\r\n   }, [props.accounts, props.connectionType]);\r\n  return (\r\n    <div id=\"layoutSidenav_nav\">\r\n        <nav className=\"sb-sidenav accordion sb-sidenav-light\" id=\"sidenavAccordion\">\r\n            <div className=\"sb-sidenav-menu account-sidebar\">\r\n                <div className=\"nav\">\r\n                    <div className=\"sb-sidenav-menu-heading\">Accounts</div>\r\n                    {accounts.map((a, i) => {  \r\n                      return (<a key={i} onClick={() => props.changeAccount(i)} className={(props.currentAccount == i ? \"nav-link selected\" : \"nav-link\")}>\r\n                        <Blockie address={a.address} />\r\n                        {a.name}\r\n                    </a>) \r\n                  })}\r\n                  <a key={100} className=\"nav-link\" onClick={props.addAccount}><FontAwesomeIcon icon={faPlus} />&nbsp;&nbsp;Add Account</a>\r\n                </div>\r\n            </div>\r\n            <div className=\"sb-sidenav-footer\">\r\n                <div className=\"small\">Connected using:</div>\r\n                {connectionTypes[connectionType]}\r\n            </div>\r\n        </nav>\r\n    </div>\r\n  );\r\n}\r\n","export default (props) => {\r\n  return (\r\n    <footer className=\"py-4 bg-light mt-auto\">\r\n        <div className=\"container-fluid px-4\">\r\n            <div className=\"d-flex align-items-center justify-content-between small\">\r\n                <div className=\"text-muted\">Copyright &copy; Elastic Wallet</div>\r\n                <div>\r\n                    <a href=\"https://toniqlabs.com\">Developed by Toniq Labs</a>\r\n                    { /*&nbsp;&middot;&nbsp;\r\n                    <a href=\"#\">Privacy Policy</a>\r\n                    &nbsp;&middot;&nbsp;\r\n                    <a href=\"#\">Terms &amp; Conditions</a>*/ }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </footer>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from 'react-bootstrap/Button';\r\nconst MINFEE = 0.0001;\r\nexport default (props) => {\r\n  const [toaddress, _toaddress] = useState(\"\");\r\n  const [amount, _amount] = useState(0);\r\n  const [fee, _fee] = useState(MINFEE);\r\n  const [showPopup, _showPopup] = useState(false);\r\n  const [popupTitle, _popupTitle] = useState('');\r\n  const [popupText, _popupText] = useState(\"\");\r\n  const [confirm, _confirm] = useState(false);\r\n  function showLoader(){\r\n    props.loader(true);\r\n  }\r\n  function hideLoader(){\r\n    props.loader(false);\r\n  }\r\n  function compressAddress(a){\r\n    return a.substr(0, 32) + \"...\";\r\n  }\r\n  function renderError(e){\r\n    _popupTitle(\"Something went wrong\");\r\n    _popupText(e);\r\n    _showPopup(true);\r\n    hideLoader();\r\n  }\r\n  function renderSuccess(e){\r\n    _popupTitle(\"It worked!\");\r\n    _popupText(e);\r\n    _showPopup(true);\r\n    hideLoader();\r\n  }\r\n  function validate(){\r\n    if (!toaddress) return renderError(\"Please fill all fields\");\r\n    if (toaddress.length != 64) return renderError(\"Invalid address\");\r\n    if (isNaN(amount)) return renderError(\"Invalid amount\");\r\n    if (isNaN(fee)) return renderError(\"Invalid fee\");\r\n    if (amount <= 0) return renderError(\"Can't send 0\");\r\n    if (fee < MINFEE) return renderError(\"Min ICP fee is 0.0001\");\r\n    if ((amount + fee) > props.currentBalance) return renderError(\"This exceeds your current balance\");\r\n    _confirm(true);\r\n  }\r\n  function send(){\r\n    _confirm(false);\r\n    showLoader();\r\n    props.send(toaddress, amount, fee).then(() => {\r\n      _toaddress(\"\");\r\n      _amount(0);\r\n      _fee(MINFEE);\r\n      renderSuccess(\"Your transaction was sent successfully!\");\r\n    }).catch(renderError);\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n        <div className=\"col-md-4\">\r\n            <div className=\"form-group mb-4\">\r\n              <label htmlFor=\"toaddress\">To Address</label>\r\n              <input value={toaddress} onChange={(e) => _toaddress(e.target.value)} type=\"text\" className=\"form-control\" id=\"toaddress\" placeholder=\"\" />\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n                <div className=\"form-group mb-4\">\r\n                  <label htmlFor=\"amount\">Amount</label>\r\n                  <input value={amount} onChange={(e) => _amount(e.target.value)} type=\"number\" className=\"form-control\" id=\"amount\" placeholder=\"0\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                <div className=\"form-group mb-4\">\r\n                  <label htmlFor=\"fee\">Fee</label>\r\n                  <input value={fee} onChange={(e) => _fee(e.target.value)} type=\"number\" className=\"form-control\" id=\"fee\" placeholder=\"0.0001\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <button onClick={validate} className=\"btn btn-primary\">Send</button>\r\n        </div>\r\n      </div>\r\n      <Dialog\r\n        open={showPopup}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{popupTitle}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n          {popupText}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _showPopup(false)} variant=\"secondary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        open={confirm}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">Please confirm transaction</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n          Are you sure you want to send <strong>{amount}ICP</strong> to <strong>{compressAddress(toaddress)}</strong> using a fee of {fee}?\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _confirm(false)} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={send} variant=\"primary\">\r\n            Send Transaction\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default (props)  =>{\r\n  return (\r\n    <div className={(props.selected ? \"col-xl-2 col-lg-4 col-md-4 col-sm-6 col-xs-6 accountCards selectedAccount\" : \"col-xl-2 col-lg-4 col-md-4 col-sm-6 col-xs-6 accountCards\")}>\r\n        <div className=\"card mb-3 text-center\" onClick={() => props.clickEv(props.token)}>\r\n          <div className=\"card-body\">\r\n            <h1>{props.data.name}</h1>\r\n            <h2>{props.data.amount === \"Loading\" ? \"Loading\" : props.data.amount + \" \" + props.data.symbol}</h2>\r\n            <h3>{props.data.price ? \"$\"+(props.data.price*props.data.amount) : \"\"}</h3>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport Balance from './Balance';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPlus } from '@fortawesome/free-solid-svg-icons'\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default (props) => {\r\n  const [show, setShow] = useState(false);\r\n  const [showToken, _showToken] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  function addToken(i){\r\n    handleShow();\r\n    //props.addToken();\r\n  }\r\n  return (\r\n    <div className=\"row\">\r\n      {props.balances.map((b, i) => {     \r\n         return (<Balance key={i} token={i} data={b} clickEv={props.changeToken} selected={(props.currentToken === i)} />) \r\n      })}\r\n      <div key={100} className=\"col accountCards\" style={{display:'flex'}}>\r\n        <div onClick={addToken} className=\"card bg-secondary text-white mb-3 text-center\">\r\n            <div className=\"card-body\">\r\n              Add Token<br />\r\n              <FontAwesomeIcon icon={faPlus} />\r\n            </div>\r\n        </div>\r\n      </div>\r\n      <Dialog open={show} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Add token</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>Enter the Canister ID for the token you wish to add.</DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Canister ID\"\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={() => {\r\n            setShow(false);\r\n            _showToken(true);\r\n          }} variant=\"primary\">\r\n            Add\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        open={showToken}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Coming soon!\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            This feature is currently being worked on. Please check back in future.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _showToken(false)} variant=\"secondary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEllipsisV, faCopy } from '@fortawesome/free-solid-svg-icons'\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport { Dropdown } from 'react-bootstrap';\r\n\r\nconst CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\r\n  <a\r\n    href=\"\"\r\n    ref={ref}\r\n    onClick={(e) => {\r\n      e.preventDefault();\r\n      onClick(e);\r\n    }}\r\n  >\r\n    {children}\r\n  </a>\r\n));\r\nfunction fallbackCopyTextToClipboard(text) {\r\n  \r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n  \r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\nfunction copyTextToClipboard(text) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function() {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function(err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\nexport default (props) => {\r\n  const [accountName, _accountName] = useState(props.currentAccountName);\r\n  useEffect(() => {\r\n     _accountName(props.currentAccountName);\r\n   }, [props.currentAccountName]);\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  function updateName(){\r\n    props.updateName(accountName);\r\n    setShow(false);\r\n  }\r\n  function copyAddress(){\r\n    copyTextToClipboard(props.accounts[props.currentAccount].address);\r\n  }\r\n  function explorerLink(){\r\n    //Switch token type to present different links on a per token basis\r\n    return \"https://dashboard.internetcomputer.org/account/\" + props.accounts[props.currentAccount].address;\r\n  }\r\n\r\n  function addToken(){\r\n    handleShow();\r\n    props.addToken();\r\n  }\r\n  return (\r\n    <>\r\n      <h1 className=\"mt-4 accountHeader\">\r\n        \r\n          {props.accounts[props.currentAccount].name}                    \r\n      </h1>\r\n      <h3 className=\"accountAddress\">\r\n        <span>{props.accounts[props.currentAccount].address}</span>\r\n        <OverlayTrigger trigger=\"click\" rootClose placement=\"top\" delay={{ show: 250, hide: 400 }} overlay={<Tooltip id=\"tooltip-disabled\">Copied!</Tooltip>}>\r\n          <FontAwesomeIcon icon={faCopy} onClick={copyAddress} />\r\n        </OverlayTrigger>\r\n        \r\n        <Dropdown alignRight align=\"end\">\r\n          <Dropdown.Toggle as={CustomToggle} >\r\n            <FontAwesomeIcon icon={faEllipsisV} />\r\n          </Dropdown.Toggle>\r\n\r\n          <Dropdown.Menu>\r\n            <Dropdown.Item onClick={handleShow}>Change Name</Dropdown.Item>\r\n            <Dropdown.Item target=\"_blank\" href={explorerLink()}>View in Explorer</Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </h3>\r\n      <Dialog open={show} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Change Account Name</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>Enter a new friendly name for this account.</DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Account Name\"\r\n            type=\"text\"\r\n            fullWidth\r\n            onChange={event => _accountName(event.target.value)}\r\n            value={accountName}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={updateName} variant=\"primary\">\r\n            Save\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      \r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {ICPLedger} from '../ledger.js';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Form from 'react-bootstrap/Form'\r\nimport iiimage from '../img/ii.png';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n});\r\nvar _wfn;\r\nexport default (props) => {\r\n  const [password, _password] = useState(\"\");\r\n\r\n  const [warningDialog, _warningDialog] = useState(false);\r\n  const [warningText, _warningText] = useState('');\r\n  \r\n  const [showError, _showError] = useState(false);\r\n  const [error, _error] = useState(\"\");\r\n\r\n  const classes = useStyles();\r\n  function err(e){\r\n    _error(e);\r\n    _showError(true);\r\n  }\r\n  function warning(t, f){\r\n    _warningText(t);\r\n    _wfn = f;\r\n    _warningDialog(true)\r\n  }\r\n  function wdfn(){\r\n    _wfn();\r\n    _warningDialog(false)\r\n  }\r\n  \r\n  function unlock(){\r\n    var i = props.identity;\r\n    console.log(i);\r\n    props.loader(true);\r\n    setTimeout(() => {\r\n      switch(i.type){\r\n        case \"ii\":\r\n          var ll = ICPLedger.unlock(i);\r\n          break;\r\n        case \"private\":\r\n          i.password = password;\r\n          var ll = ICPLedger.unlock(i);\r\n          break;\r\n      }\r\n      props.unlock(ll);\r\n      ll.catch(e => {\r\n        alert(\"Password incorrect or corrupted data\");\r\n        props.loader(false);\r\n      });\r\n    }, 100)\r\n  }\r\n  return (\r\n    <div>\r\n      <nav className=\"sb-topnav navbar navbar-expand navbar-dark bg-dark\">\r\n        <a className=\"navbar-brand ps-3\" target=\"_blank\" href=\"https://toniqlabs.com\" rel=\"noreferrer\">Elastic Wallet <small>by Toniq Labs</small></a>\r\n      </nav>\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-4 offset-md-4 loginForm\">\r\n            <Card className={classes.root}>\r\n              <CardContent className=\"text-center\">\r\n                <p><strong>Unlock your wallet</strong></p>\r\n                <hr />\r\n                {props.identity.type == 'ii' ? \r\n                  <>\r\n                    <Alert variant={\"info\"}>\r\n                      Please authenticate your identity to continue\r\n                    </Alert>\r\n                    <div className=\"loginOption\" onClick={unlock}>\r\n                      <img src={iiimage} />\r\n                      <span>Internet Identity</span>\r\n                    </div>\r\n                  </>:\r\n                  <>\r\n                    <Alert variant={\"info\"}>\r\n                      Please enter the password used when creating your wallet, not the mnemonic phrase. If you have lost the password, you can recover using your mnemonic phrase.\r\n                    </Alert>\r\n                    <Form.Group className=\"mb-4\">\r\n                      <Form.Label>Enter Password</Form.Label>\r\n                      <Form.Control type=\"password\" value={password} onChange={event => _password(event.target.value)} placeholder=\"\" />\r\n                    </Form.Group>\r\n                    \r\n                  </>\r\n                }\r\n                <hr />\r\n                <Button onClick={() => warning(\"This will clear all data from this device, including any names you have given your accounts. All balances will remain and this wallet can be restored in future if you have the corresponding seed/access devices\", props.clearWallet)} variant=\"danger\">\r\n                  Clear Wallet\r\n                </Button>&nbsp;&nbsp;\r\n                {props.identity.type == 'ii' ? \"\" :\r\n                <Button onClick={unlock} variant=\"primary\">\r\n                  Unlock Wallet\r\n                </Button> }\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Dialog open={warningDialog} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Please read first</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{warningText}</DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _warningDialog(false)} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={wdfn} variant=\"primary\">\r\n            Continue\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABkCAYAAABkW8nwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTY2M0NBQTdDMkYzMTFFQkE0QUNGRjE2NURGRDIzQ0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTY2M0NBQThDMkYzMTFFQkE0QUNGRjE2NURGRDIzQ0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNjYzQ0FBNUMyRjMxMUVCQTRBQ0ZGMTY1REZEMjNDQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBNjYzQ0FBNkMyRjMxMUVCQTRBQ0ZGMTY1REZEMjNDQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtI6AvwAABj4SURBVHja7J0HnBXl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\"","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {ICPLedger} from '../ledger.js';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport Tab from 'react-bootstrap/Tab';\r\n\r\nimport iiimage from '../img/ii.png';\r\nimport pkimage from '../img/pk.png';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minWidth: 275,\r\n  },\r\n  bullet: {\r\n    display: 'inline-block',\r\n    margin: '0 2px',\r\n    transform: 'scale(0.8)',\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n});\r\n\r\nexport default (props) => {\r\n  const [showIIDialog, _showIIDialog] = useState(false);\r\n  const [showPKDialog, _showPKDialog] = useState(false);\r\n  const [dmnemonic, _dmnemonic] = useState(ICPLedger.generateMnemonic(256));\r\n  const [mnemonic, _mnemonic] = useState(\"\");\r\n  const [password, _password] = useState(\"\");\r\n  const [cpassword, _cpassword] = useState(\"\");\r\n  const [showError, _showError] = useState(false);\r\n  const [error, _error] = useState(\"\");\r\n  const [key, setKey] = useState('new');\r\n  const [stage, _stage] = useState(0);\r\n  const classes = useStyles();\r\n  function err(e){\r\n    _error(e);\r\n    _showError(true);\r\n  }\r\n  function iiLogin(){\r\n    _showIIDialog(false)\r\n    props.loader(true);\r\n    var ll = ICPLedger.setup({\r\n      type : 'ii'\r\n    });\r\n    props.login(ll);\r\n  }\r\n  function pkLogin(){\r\n    if (stage === 0){\r\n      if (mnemonic !== dmnemonic && key === 'new') return err(\"Mnemonic's do not match, try again\");\r\n      if (mnemonic === \"\") return err(\"Please enter a Mnemonic\");\r\n      if (!ICPLedger.validateMnemonic(mnemonic))  return err(\"Invalid mnemonic\");\r\n      _stage(1);\r\n    } else if (stage === 1){\r\n      if (password.length < 8) return err(\"Please enter a password with at least 8 characters\");\r\n      if (password != cpassword) return err(\"Your passwords do not match\");\r\n      _showPKDialog(false)\r\n      props.loader(true);\r\n      setTimeout(() => {\r\n        var ll = ICPLedger.setup({\r\n          type : 'private',\r\n          mnemonic : mnemonic,\r\n          password : password\r\n        });\r\n        _stage(0);\r\n        _mnemonic(\"\");\r\n        _dmnemonic(\"\");\r\n        _password(\"\");\r\n        _cpassword(\"\");\r\n        props.login(ll);\r\n      }, 100);\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <nav className=\"sb-topnav navbar navbar-expand navbar-dark bg-dark\">\r\n        <a className=\"navbar-brand ps-3\" target=\"_blank\" href=\"https://toniqlabs.com\" rel=\"noreferrer\">Elastic Wallet <small>by Toniq Labs</small></a>\r\n      </nav>\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-4 offset-md-4 loginForm\">\r\n            <Card className={classes.root}>\r\n              <CardContent className=\"text-center\">\r\n                <p><strong>How do you want to connect to your wallet?</strong></p>\r\n                <hr />\r\n                <Alert variant={\"info\"}>\r\n                  Hardware wallets are coming soon!\r\n                </Alert>\r\n                <div className=\"loginOption\" onClick={() => _showIIDialog(true)}>\r\n                  <img src={iiimage} />\r\n                  <span>Internet Identity</span>\r\n                </div>\r\n                <div className=\"loginOption\" onClick={() => _showPKDialog(true)}>\r\n                  <img src={pkimage} />\r\n                  <span>Mnemonic</span>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Dialog open={showIIDialog} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">Login using Internet Identity</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>Are you sure you want to connect using your Internet Identity by Dfinity?</DialogContentText>\r\n\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _showIIDialog(false)} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={iiLogin} variant=\"primary\">\r\n            Conitnue\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog open={showPKDialog} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle style={{width:\"600px\"}} id=\"form-dialog-title\">Connect using a mnemonic phrase</DialogTitle>\r\n        <DialogContent>\r\n        { stage === 0 ?\r\n          <>\r\n            <Tabs activeKey={key} onSelect={(k) => setKey(k)}>\r\n              <Tab eventKey=\"new\" title=\"New\">\r\n                \r\n                <Alert className=\"mt-4\" variant={\"danger\"}>\r\n                  If you lose this mnemonic phrase, or it becomes compromised, you will lose all of your stored tokens\r\n                </Alert>\r\n                <p className=\"mnemonic\" >{dmnemonic}</p>\r\n                <hr />\r\n                <DialogContentText>Please copy the above phrase in the box below to verify</DialogContentText>\r\n              </Tab>\r\n              <Tab eventKey=\"recover\" title=\"Recover\">\r\n                <DialogContentText className=\"mt-4\" >Please enter your recovery seed below</DialogContentText>\r\n              </Tab>\r\n            </Tabs>\r\n            <FormControl style={{height:\"100px\"}} value={mnemonic} onChange={event => _mnemonic(event.target.value)} as=\"textarea\"  />\r\n          </>\r\n        : \r\n          <>\r\n            <Alert className=\"mt-4\" variant={\"danger\"}>\r\n              Please enter a password to encrypt your seed phrase. This can be used to unlock your wallet on this device\r\n            </Alert>\r\n            <Form.Group>\r\n              <Form.Label>Enter Password</Form.Label>\r\n              <Form.Control type=\"password\" value={password} onChange={event => _password(event.target.value)} placeholder=\"\" />\r\n              \r\n              <Form.Label>Enter Password Again</Form.Label>\r\n              <Form.Control type=\"password\" value={cpassword} onChange={event => _cpassword(event.target.value)} placeholder=\"\" />\r\n              <Form.Text className=\"text-muted\">\r\n                Ensure passwords are at least 8 characters long.\r\n              </Form.Text>\r\n            </Form.Group>\r\n          </>\r\n        }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _showPKDialog(false)} variant=\"secondary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={pkLogin} variant=\"primary\">\r\n            Conitnue\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        open={showError}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{\"Something went wrong\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n          {error}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => _showError(false)} variant=\"secondary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAABkCAYAAABkW8nwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTE4NjU0QURDMkYzMTFFQjlDRUFBNEJGMTlGOEUyMjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTE4NjU0QUVDMkYzMTFFQjlDRUFBNEJGMTlGOEUyMjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMTg2NTRBQkMyRjMxMUVCOUNFQUE0QkYxOUY4RTIyMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMTg2NTRBQ0MyRjMxMUVCOUNFQUE0QkYxOUY4RTIyMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhHLzosAAAZWSURBVHja7J1rqBZF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\"","import React, { useState, useEffect } from 'react';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Timestamp from 'react-timestamp';\nimport Tab from 'react-bootstrap/Tab';\nimport Nav from './components/Nav';\nimport Sidebar from './components/Sidebar';\nimport Footer from './components/Footer';\nimport Send from './components/Send';\nimport Balances from './components/Balances';\nimport Account from './components/Account';\nimport Login from './components/Login';\nimport Lockscreen from './components/Lockscreen';\nimport {ICPLedger} from './ledger.js';\nimport LoadingOverlay from 'react-loading-overlay';\n\n//Helpers\nvar _defaultDb = {\n  accounts : [\n    [\"Main\", \n      []\n    ]\n  ],\n  identity : {\n    type : false,\n    principal : false\n  }\n};\nvar appData = {\n  accounts : [],\n  identity : {\n    type : false,\n    principal : false\n  }\n};\nvar UNLOCKED = false, ACTIVE = false, INTV = false;\nfunction initDb(){\n  var t = localStorage.getItem('_db');\n  if (t){\n    ACTIVE = true; //Wallet is active\n    t = JSON.parse(t);\n    t.accounts.map(async (a, i) => {\n      var _b = [];\n      var _a = ICPLedger.p2aid(t.identity.principal, i);\n      _b.push({\n        name : \"Internet Computer\",\n        symbol : \"ICP\",\n        amount : \"Loading\",\n        transactions : false\n      });\n      a[1].map(t => {\n        _b.push({\n          name : t.name,\n          symbol : t.symbol,\n          id : t.id,\n          amount : \"Loading\",\n          transactions : false\n        });\n        return true;\n      });\n      appData.accounts.push({\n        name : a[0],\n        address : _a,\n        balances : _b\n      });\n    });\n    appData.identity = t.identity;\n  }\n}\nfunction newDb(identity){\n  var tc = Object.assign({}, _defaultDb);\n  tc.identity = identity;\n  localStorage.setItem('_db', JSON.stringify(tc));\n  initDb();\n}\nfunction updateDb(accounts){\n  var updatedDb = {\n    accounts : [],\n    identity : appData.identity,\n  };\n  accounts.map(a => {\n    var _b = [];\n    a.balances.map((b, i) => {\n      if (i === 0) return false;\n      _b.push({\n        name : b.name,\n        symbol : b.symbol,\n        id : b.id,\n      });\n      return true;\n    });\n    updatedDb.accounts.push([a.name, _b]);\n    return true;\n  });\n  localStorage.setItem('_db', JSON.stringify(updatedDb));\n}\ninitDb();\n\n//Render\nfunction App() {\n  const [currentAccount, _currentAccount] = useState(0);\n  const [accounts, _accounts] = useState(appData.accounts);\n  const [currentToken, _currentToken] = useState(0);\n  const [balances, _balances] = useState((appData.accounts.length ? appData.accounts[currentAccount].balances : []));\n  const [currentAccountName, _currentAccountName] = useState((appData.accounts.length ? appData.accounts[currentAccount].name : \"\"));\n  const [unlocked, _unlocked] = useState(UNLOCKED);\n  const [active, _active] = useState(ACTIVE);\n  const [isLoaderActive, _isLoaderActive] = useState(false);\n  const [connectionType, _connectionType] = useState(appData.identity.type);\n  \n  useEffect(() => {\n    ICPLedger.init().then(() => {\n      var checkLoad = ICPLedger.load(appData.identity);\n      if (checkLoad && checkLoad.principal == appData.identity.principal) {\n        UNLOCKED = true;\n        _unlocked(UNLOCKED)\n      }\n    });\n    setTimeout(fetchAllData, 1000);\n    if (INTV === false)\n      INTV = setInterval(fetchAllData, 10000);\n    \n  }, []);\n  \n  function fetchAllData(){\n    appData.accounts.map((a,i) => {\n      a.balances.map((b,j) => {\n        if (j === 0) {\n          ICPLedger.getBalance(appData.accounts[i].address).then(_b => {\n            if (!ACTIVE) return false;\n            if (!UNLOCKED) return false;\n            ICPLedger.getTransactions(appData.accounts[i].address, i).then(ts => {\n              if (!ACTIVE) return false;\n              if (!UNLOCKED) return false;       \n              appData.accounts[i].name = appData.accounts[i].name;\n              appData.accounts[i].balances[j].amount = _b;\n              appData.accounts[i].balances[j].transactions = ts;\n              _accounts(arr => [...appData.accounts]);\n            });\n          });\n        } else {\n          ICPLedger.getTokenBalance(b.id, appData.accounts[i].address).then(_b => {\n            if (!ACTIVE) return false;\n            if (!UNLOCKED) return false;\n            appData.accounts[i].name = appData.accounts[i].name;\n            appData.accounts[i].balances[j].amount = _b;\n            appData.accounts[i].balances[j].transactions = [];\n            _accounts(arr => [...appData.accounts]);\n          });\n        }\n        return true;\n      })\n      return true;\n    });\n  }\n  function loader(t){\n    _isLoaderActive(t);\n  }\n  function send(toaddress, amount, fee){\n    return new Promise((resolve, reject) => {\n      ICPLedger.transfer(toaddress, fee, 0, currentAccount, amount).then(b => {\n        resolve(b);\n      }).catch(e => {\n        reject(e);\n        console.log(e);\n      });\n    });\n  }\n  function updateName(v){\n    appData.accounts[currentAccount].name = v;\n    _accounts(arr => [...appData.accounts]);\n    _currentAccountName(v);\n    updateDb(appData.accounts);\n  }\n  function deleteAccount(){\n    var t = currentAccount;\n    changeAccount(0);\n    appData.accounts.splice(t, 1);\n    _accounts( arr => [...appData.accounts]);\n    updateDb(appData.accounts);\n  }\n  function addToken(i){\n    //TODO in future\n  }\n  function changeToken(i){\n    _currentToken(i);\n  }\n  function changeAccount(i){\n    _currentAccount(i);\n    _currentAccountName(appData.accounts[i].name);\n    _balances(appData.accounts[i].balances);\n    _currentToken(0);\n  }\n  //TODO\n  function unlock(ll, t){\n    loader(true);\n    ll.then(identity => {      \n      console.log(identity);\n      loader(false);\n      UNLOCKED = true;\n      _unlocked(true);\n      if (INTV === false)\n        INTV = setInterval(fetchAllData, 5000);\n      _connectionType(identity.type);\n      _accounts(appData.accounts);\n      _balances(appData.accounts[0].balances);\n    });\n  }\n  function login(ll, t){\n    loader(true);\n    ll.then(identity => {   \n      newDb(identity);\n      _connectionType(identity.type);\n      _accounts(appData.accounts);\n      _balances(appData.accounts[0].balances);\n      _currentToken(0);\n      _currentAccount(0);\n      _active(true);\n      _unlocked(true);\n      loader(false);\n      ACTIVE = true;\n      UNLOCKED = true;\n      if (INTV === false)\n        INTV = setInterval(fetchAllData, 5000);\n    });\n  }\n  function lockWallet(){\n    ICPLedger.lock(appData.identity);\n    UNLOCKED = false;\n    _unlocked(UNLOCKED);\n    clearInterval(INTV);\n    INTV = false;\n  }\n  function clearWallet(){\n    ICPLedger.clear(appData.identity);\n    UNLOCKED = false;\n    ACTIVE = false;\n    _unlocked(UNLOCKED);\n    _active(ACTIVE);\n    \n    //Clear data\n    _accounts([]);\n    _balances([]);\n    _currentToken(0);\n    _currentAccount(0);\n    localStorage.removeItem('_db')\n    appData = {\n      accounts : [],\n      identity : {\n        type : false,\n        principal : false\n      }\n    }\n    clearInterval(INTV);\n    INTV = false;\n  }\n  function addAccount(){\n    var _a = ICPLedger.p2aid(appData.identity.principal, accounts.length);\n    appData.accounts.push({\n      name : \"Account \" + (appData.accounts.length),\n      address : _a,\n      balances : [{\n        name : \"Internet Computer\",\n        symbol : \"ICP\",\n        amount : 0,\n        transactions : []\n      }]\n    });\n    _accounts( arr => [...appData.accounts]);\n    updateDb(appData.accounts);\n    changeAccount(appData.accounts.length-1);\n  }\n  function compressAddress(a){\n    return a.substr(0, 32) + \"...\";\n  }\n  function displaydate(d){\n    console.log(new Date(d).toString());\n    return new Date(d).toString();\n  }\n  function numf(n, d){\n    if (n === \"N/A\") return n;\n    d = (d ?? 2);\n    return n.toFixed(d).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,');\n  }\n  \n  return (\n    <LoadingOverlay\n    active={isLoaderActive}\n    spinner\n    text='Loading, please wait..'\n    >\n    { unlocked ? \n    <div className=\"sb-nav-fixed\">\n      <Nav clearWallet={clearWallet} lockWallet={lockWallet} principal={appData.identity.principal} />\n      <div id=\"layoutSidenav\">\n        <Sidebar connectionType={connectionType} changeAccount={changeAccount} currentAccount={currentAccount} addAccount={addAccount} accounts={accounts} />\n        <div id=\"layoutSidenav_content\">\n          <main>\n              <div className=\"container-fluid px-4\">\n                  <Account currentAccountName={currentAccountName} updateName={updateName} accounts={accounts} currentAccount={currentAccount} setAccounts={_accounts} deleteAccount={deleteAccount}/>\n                  <hr />\n                  <Balances addToken={addToken} balances={balances} currentToken={currentToken} changeToken={changeToken} />\n                  <div className=\"row\">\n                    <div className=\"col\">\n                      <Tabs defaultActiveKey=\"activity\" id=\"uncontrolled-tab-example\" className=\"mb-3\">\n                        <Tab eventKey=\"activity\" title=\"Activity\">\n                          <h3>Transactions</h3>\n                          { balances[currentToken].transactions === false ? \"\" : (balances[currentToken].transactions.length === 0 ? \"\" :\n                          <div className=\"tx tx-head row\">\n                            <div className=\"col-lg-1 col-md-2 col-sm-12 tx-1\">\n                              <span>Date</span>\n                            </div>\n                            <div className=\"col-lg-9 col-md-7 col-sm-12 tx-2\">\n                              <span>Description:</span>\n                            </div>\n                            <div className=\"col-lg-2 col-md-3 col-sm-12 tx-3\">\n                              <span>Amount:</span>\n                            </div>\n                          </div>)}\n                          { balances[currentToken].transactions === false ? \"Loading...\" : (balances[currentToken].transactions.length === 0 ? \"No transactions yet\" : \n                          balances[currentToken].transactions.map((t, i) => {\n                            return (\n                            <div key={i} className={t.to === accounts[currentAccount].address ? \"tx row tx-in\" : \"tx row tx-out\"}>\n                              <div className=\"col-lg-1 col-md-2 col-sm-12 tx-1\">\n                                <span><Timestamp relative autoUpdate date={t.timestamp} /></span>\n                              </div>\n                              <div className=\"col-lg-9 col-md-7 col-sm-12 tx-2\">\n                               {t.from === accounts[currentAccount].address ? \n                                <>\n                                Sent <strong>{numf(t.amount, 4)} {balances[currentToken].symbol}</strong> to {t.to} with a <strong>{t.fee} ICP</strong> Fee<br />(<a href={ \"https://dashboard.internetcomputer.org/transaction/\" + t.hash} target=\"_blank\" rel=\"noreferrer\">View Transaction</a>)\n                                </> : \n                                <>\n                                Received <strong>{numf(t.amount, 4)} {balances[currentToken].symbol}</strong> from {t.from}<br />(<a href={ \"https://dashboard.internetcomputer.org/transaction/\" + t.hash} target=\"_blank\" rel=\"noreferrer\">View Transaction</a>)\n                               </>}\n                              </div>\n                              <div className=\"col-lg-2 col-md-3 col-sm-12 tx-3\">\n                               {t.from === accounts[currentAccount].address ?\n                               <>-{numf(t.amount+t.fee, 4)} {balances[currentToken].symbol}</> :\n                               <>+{numf(t.amount, 4)} {balances[currentToken].symbol}</>}\n                              </div>\n                            </div>)\n                          }))} \n                        </Tab>\n                        <Tab eventKey=\"send\" title=\"Send\">\n                          <h3>Send {balances[currentToken].symbol}</h3>\n                          <Send loader={loader} send={send} currentBalance={balances[currentToken].amount} />\n                        </Tab>\n                      </Tabs>\n                    </div>\n                  </div>\n              </div>\n          </main>\n          <Footer />\n        </div>\n      </div>\n    </div> :\n    ( active ?\n    <Lockscreen identity={appData.identity} loader={loader} unlock={unlock} clearWallet={clearWallet} /> :\n    <Login loader={loader} login={login} /> )}\n    </LoadingOverlay>\n  );\n}\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './css/styles.css';\nimport './css/wallet.css';\nReactDOM.render(<App />,\n  document.getElementById('root')\n);\nwindow.addEventListener('DOMContentLoaded', event => {\n    const sidebarToggle = document.body.querySelector('#sidebarToggle');\n    if (sidebarToggle) {\n        if (localStorage.getItem('sb|sidebar-toggle') === 'true') {\n            document.body.classList.toggle('sb-sidenav-toggled');\n        }\n        sidebarToggle.addEventListener('click', event => {\n            event.preventDefault();\n            document.body.classList.toggle('sb-sidenav-toggled');\n            localStorage.setItem('sb|sidebar-toggle', document.body.classList.contains('sb-sidenav-toggled'));\n        });\n    }\n});"],"sourceRoot":""}