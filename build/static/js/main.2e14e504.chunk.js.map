{"version":3,"sources":["ic/candid/ext.did.js","ic/utils.js","ic/RosettaApi.js","ic/candid/ledger.did.js","ic/candid/hzld.did.js","ic/candid/governance.did.js","ic/identity.js","ic/neuron.js","components/Blockie.js","components/AccountDrawer.js","components/SnackbarButton.js","components/TokenCard.js","utils.js","components/SendForm.js","components/Transactions.js","components/MainFab.js","components/InputForm.js","views/AccountDetail.js","views/AddressBook.js","views/Neurons.js","views/Settings.js","containers/Wallet.js","components/ConnectList.js","components/WalletDialog.js","containers/Connect.js","containers/Unlock.js","components/AlertDialog.js","components/ConfirmDialog.js","App.js","store.js","theme.js","index.js","ic/extjs.js"],"names":["IDL","TokenIdentifier","Text","AccountIdentifier","User","Variant","Principal","AllowanceRequest","Record","Balance","Nat","Balance_2","CommonError_2","CommonError","Result_2","SubAccount","Vec","Nat8","ApproveRequest","Opt","BalanceRequest","BalanceResponse","TokenIdentifier_2","AccountIdentifier_3","Result_4","Extension","TokenIndex","Nat32","Metadata","Result_3","MintRequest","Memo","TransferRequest","Bool","TransferResponse","Null","Service","Func","Tuple","sjcl","require","bip39","pbkdf2","principalToAccountIdentifier","p","s","padding","Buffer","array","Uint8Array","fromText","toBlob","getSubAccountArray","hash","sha224","checksum","to32bits","getCrc32","array2","toHexString","Array","isArray","concat","length","fill","from32bits","ba","value","i","num","b","ArrayBuffer","DataView","setUint32","from","byteArray","byte","toString","slice","join","fromHexString","hex","substr","bytes","c","push","parseInt","mnemonicToId","mnemonic","seed","mnemonicToSeedSync","splice","Ed25519KeyIdentity","generate","encrypt","principal","password","Promise","resolve","reject","e","d","btoa","decrypt","data","atob","isHex","h","test","validateAddress","a","validatePrincipal","toText","JSONbig","jsonBigint","strict","RosettaErrorType","Object","freeze","NotFound","Timeout","NetworkError","RosettaError","message","status","errorType","Error","Transaction","rosettaTransaction","blockIndex","this","transaction_identifier","timestampMs","metadata","timestamp","div","toNumber","Date","operations","type","account1Address","account","address","amount","BigNumber","isZero","negated","account2Address","fee","memo","RosettaApi","axios","create","baseURL","method","transformRequest","stringify","transformResponse","parse","headers","networkIdentifier","networksList","then","res","network_identifiers","find","blockchain","accountAddress","accountBalanceByAddress","response","balances","isAxiosError","undefined","networkStatus","current_block_identifier","index","transactionHash","transactionsByHash","responseTransactions","transactions","transaction","block_identifier","limit","maxBlockIndex","offset","Math","max","transactionCount","min","getTransactionByBlock","transactionsByAccount","all","map","blockTransaction","reverse","blockByIndex","block","url","request","network_identifier","account_identifier","Duration","Nat64","ArchiveOptions","ICPTs","AccountBalanceArgs","BlockHeight","NotifyCanisterArgs","TimeStamp","SendArgs","OperatorAction","OperatorRequest","OperatorResponse","Proposal","Rec","NeuronId","Followees","NodeProvider","NetworkEconomics","RewardEvent","NeuronStakeTransfer","GovernanceError","Int32","Ballot","Tally","Spawn","Split","Follow","RemoveHotKey","AddHotKey","IncreaseDissolveDelay","SetDissolveTimestamp","Operation","Configure","RegisterVote","DisburseToNeuron","Amount","Disburse","Command","ManageNeuron","ExecuteNnsFunction","RewardToNeuron","RewardToAccount","RewardMode","RewardNodeProvider","SetDefaultFollowees","ApproveGenesisKyc","Change","AddOrRemoveNodeProvider","Motion","Action","ProposalData","ClaimOrRefreshNeuronFromAccount","Command_2","NeuronInFlightCommand","BallotInfo","DissolveState","Neuron","Result","Result_1","ClaimOrRefreshNeuronFromAccountResponse","NeuronInfo","ProposalInfo","ListNeurons","ListNeuronsResponse","ListProposalInfo","ListProposalInfoResponse","SpawnResponse","MakeProposalResponse","DisburseResponse","Command_1","ManageNeuronResponse","identities","processId","id","getPrincipal","StoicIdentity","getIdentity","hasOwnProperty","setup","optdata","AuthClient","auth","login","identityProvider","onSuccess","onError","localStorage","setItem","_em","load","_id","t","getItem","unlock","catch","lock","logout","removeItem","clear","validateMnemonic","generateMnemonic","validatePassword","window","GOVERNANCE_CANISTER","getStakingAddress","nonce","shaObj","jsSha256","update","blobFromUint8Array","sha256","ICNeuron","neuronid","neurondata","identity","_api","_neuronid","extjs","connect","canister","voting_power","get_neuron_info","ni","JSON","Ok","cmdBody","cmdId","new_controller","manage_neuron","command","error_message","commandArgs","amount_e8s","BigInt","topic","neuron","operation","seconds","console","log","dissolve_timestamp_seconds","to_account","NeuronManager","nextId","setIndex","scan","lastInd","neurons","get","n","sa","stake","stakingTo","args","Number","send_dfx","controller","claim_or_refresh_neuron_from_account","nd","result","ndata","topics","style","width","height","Blockie","props","src","makeBlockie","drawerWidth","useStyles","makeStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","zIndex","AccountDrawer","classes","useTheme","container","document","body","currentPrincipal","useSelector","state","accounts","principals","idtype","dispatch","useDispatch","accountsList","marginTop","marginBottom","backgroundColor","position","top","textAlign","className","maxHeight","alt","Divider","List","ListItem","button","onClick","changeRoute","ListItemAvatar","Avatar","ListItemText","primaryTypographyProps","noWrap","secondaryTypographyProps","primary","name","secondary","nextid","payload","ListItemIcon","lockWallet","bottom","left","right","aria-label","Hidden","smUp","implementation","Drawer","variant","anchor","direction","open","onClose","paper","ModalProps","keepMounted","xsDown","SnackbarButton","React","useState","setOpen","handleClose","event","reason","cloneElement","children","Snackbar","autoHideDuration","anchorOrigin","action","Fragment","IconButton","size","color","fontSize","styles","root","selectedCard","card","title","pos","intervalId","api","TokenCard","balance","setBalance","updateBalance","token","getBalance","decimals","useEffect","setInterval","clearInterval","Grid","item","xl","lg","md","Card","selected","CardActionArea","CardContent","Typography","gutterBottom","symbol","fallbackCopyTextToClipboard","text","textArea","createElement","appendChild","focus","select","msg","execCommand","err","error","removeChild","identityTypes","clipboardCopy","navigator","clipboard","writeText","compressAddress","pp","split","SendForm","currentAccount","step","setStep","setAmount","minFee","setMinFee","setFee","to","setTo","advanced","setAdvanced","setMemo","setNotify","f","Dialog","maxWidth","fullWidth","DialogTitle","DialogContent","DialogContentText","fontWeight","TextField","autoFocus","margin","label","onChange","target","marginRight","cursor","multiline","rows","rowsMax","DialogActions","Button","isNaN","_from_principal","_from_sa","_to_user","_amount","_fee","_memo","loader","transfer","r","alert","finally","Transactions","setTransactions","empty","table","minWidth","stopPoll","startPoll","fetchTx","_address","getTransactions","txs","updateTransactions","setTimeout","paragraph","paddingTop","align","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","tx","scope","relative","autoUpdate","date","href","spacing","MainFab","Fab","InputForm","defaultValue","setValue","defaultSecondaryValue","secondaryValue","setSecondaryValue","aria-labelledby","content","inputLabel","secondaryInput","buttonLabel","AccountDetail","currentToken","tokens","setTokens","flexGrow","grid","paddingLeft","vertical","horizontal","edge","ListItemSecondaryAction","justify","alignItems","cid","findIndex","x","getMetadata","verticalAlign","marginLeft","m","AddressBook","addresses","largeIcon","contact","editAddress","Neurons","Settings","assets","setAssets","indexOf","makeAssets","subheader","ListSubheader","confirm","v","clearWallet","display","appBar","menuButton","toolbarButtons","routes","view","Wallet","mobileOpen","setMobileOpen","route","setRoute","toolbarTitle","setToolbarTitle","handleDrawerToggle","remove","CssBaseline","AppBar","Toolbar","renderView","ConnectList","handleClick","handler","tips","WalletDialog","initialRoute","newMnemonic","setNewMnemonic","setMnemonic","setPassword","password2","setPassword2","setAddress","tipsIndex","setTipsIndex","cancel","submit","od","hideBackdrop","w","required","Connect","setInitialRoute","Unlock","AlertDialog","aria-describedby","ConfirmDialog","buttonCancel","buttonConfirm","backdrop","emptyAlert","App","loaderOpen","setLoaderOpen","appState","setAppState","alertData","setAlertData","confirmData","setConfirmData","showAlert","setShowAlert","showConfirm","setShowConfirm","l","Backdrop","CircularProgress","appData","initDb","db","savenow","_principal","subaccount","saveDb","newDb","tc","clearDb","clearState","newState","updatedDb","_p","_a","store","createStore","ii","filter","createMuiTheme","palette","main","red","A400","background","default","overrides","MuiIconButton","MuiAvatar","colorDefault","MuiListItemIcon","ReactDOM","render","ThemeProvider","querySelector","LEDGER_CANISTER_ID","CYCLES_MINTING_CANISTER_ID","rosettaApi","constructUser","u","tokenIdentifier","fromBlob","getCyclesTopupSubAccount","canisterId","pb","amountToBigInt","_preloadedIdls","governanceIDL","ledgerIDL","hzldIDL","extIDL","ExtConnection","host","_mapIdls","_metadata","_identity","_host","_agent","_canisters","_makeAgent","idl","Actor","createActor","agent","tid","tokenObj","decodeTokenId","call","ok","fungible","nonfungible","princpal","getAccountBalance","getBalanceInsecure","bal","getTransactionsByAccount","ts","_ts","_t","from_principal","from_sa","to_user","notify","bh","mintCycles","_to_sub","_to","e8s","notify_dfx","HttpAgent"],"mappings":"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","file":"static/js/main.2e14e504.chunk.js","sourcesContent":["export default ({ IDL }) => {\n  const TokenIdentifier = IDL.Text;\n  const AccountIdentifier_2 = IDL.Text;\n  const AccountIdentifier = AccountIdentifier_2;\n  const User = IDL.Variant({\n    'principal' : IDL.Principal,\n    'address' : AccountIdentifier,\n  });\n  const AllowanceRequest_2 = IDL.Record({\n    'token' : TokenIdentifier,\n    'owner' : User,\n    'spender' : IDL.Principal,\n  });\n  const AllowanceRequest = AllowanceRequest_2;\n  const Balance = IDL.Nat;\n  const Balance_2 = Balance;\n  const CommonError_2 = IDL.Variant({\n    'InvalidToken' : TokenIdentifier,\n    'Other' : IDL.Text,\n  });\n  const CommonError = CommonError_2;\n  const Result_2 = IDL.Variant({ 'ok' : Balance_2, 'err' : CommonError });\n  const SubAccount_2 = IDL.Vec(IDL.Nat8);\n  const SubAccount = SubAccount_2;\n  const ApproveRequest_2 = IDL.Record({\n    'token' : TokenIdentifier,\n    'subaccount' : IDL.Opt(SubAccount),\n    'allowance' : Balance,\n    'spender' : IDL.Principal,\n  });\n  const ApproveRequest = ApproveRequest_2;\n  const BalanceRequest_2 = IDL.Record({\n    'token' : TokenIdentifier,\n    'user' : User,\n  });\n  const BalanceRequest = BalanceRequest_2;\n  const Result_5 = IDL.Variant({ 'ok' : Balance, 'err' : CommonError_2 });\n  const BalanceResponse_2 = Result_5;\n  const BalanceResponse = BalanceResponse_2;\n  const TokenIdentifier_2 = TokenIdentifier;\n  const AccountIdentifier_3 = AccountIdentifier;\n  const Result_4 = IDL.Variant({\n    'ok' : AccountIdentifier_3,\n    'err' : CommonError,\n  });\n  const Extension_2 = IDL.Text;\n  const Extension = Extension_2;\n  const TokenIndex_2 = IDL.Nat32;\n  const TokenIndex = TokenIndex_2;\n  const Metadata_2 = IDL.Variant({\n    'fungible' : IDL.Record({\n      'decimals' : IDL.Nat8,\n      'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)),\n      'name' : IDL.Text,\n      'symbol' : IDL.Text,\n    }),\n    'nonfungible' : IDL.Record({ 'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)) }),\n  });\n  const Metadata = Metadata_2;\n  const Result_3 = IDL.Variant({ 'ok' : Metadata, 'err' : CommonError });\n  const MintRequest_2 = IDL.Record({\n    'to' : User,\n    'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)),\n  });\n  const MintRequest = MintRequest_2;\n  const Memo = IDL.Vec(IDL.Nat8);\n  const TransferRequest_2 = IDL.Record({\n    'to' : User,\n    'token' : TokenIdentifier,\n    'notify' : IDL.Bool,\n    'from' : User,\n    'memo' : Memo,\n    'subaccount' : IDL.Opt(SubAccount),\n    'amount' : Balance,\n  });\n  const TransferRequest = TransferRequest_2;\n  const Result = IDL.Variant({\n    'ok' : Balance,\n    'err' : IDL.Variant({\n      'CannotNotify' : AccountIdentifier,\n      'InsufficientBalance' : IDL.Null,\n      'InvalidToken' : TokenIdentifier,\n      'Rejected' : IDL.Null,\n      'Unauthorized' : AccountIdentifier,\n      'Other' : IDL.Text,\n    }),\n  });\n  const TransferResponse_2 = Result;\n  const TransferResponse = TransferResponse_2;\n  const erc721_token = IDL.Service({\n    'acceptCycles' : IDL.Func([], [], []),\n    'allowance' : IDL.Func([AllowanceRequest], [Result_2], ['query']),\n    'approve' : IDL.Func([ApproveRequest], [], []),\n    'availableCycles' : IDL.Func([], [IDL.Nat], ['query']),\n    'balance' : IDL.Func([BalanceRequest], [BalanceResponse], ['query']),\n    'bearer' : IDL.Func([TokenIdentifier_2], [Result_4], ['query']),\n    'extensions' : IDL.Func([], [IDL.Vec(Extension)], ['query']),\n    'getAllowances' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, IDL.Principal))],\n        ['query'],\n      ),\n    'getMinter' : IDL.Func([], [IDL.Principal], ['query']),\n    'getRegistry' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, AccountIdentifier_3))],\n        ['query'],\n      ),\n    'getTokens' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, Metadata))],\n        ['query'],\n      ),\n    'metadata' : IDL.Func([TokenIdentifier_2], [Result_3], ['query']),\n    'mintNFT' : IDL.Func([MintRequest], [TokenIndex], []),\n    'setMinter' : IDL.Func([IDL.Principal], [], []),\n    'supply' : IDL.Func([TokenIdentifier_2], [Result_2], ['query']),\n    'transfer' : IDL.Func([TransferRequest], [TransferResponse], []),\n  });\n  return erc721_token;\n};\nexport const init = ({ IDL }) => { return [IDL.Principal]; };","/* global BigInt */\r\nimport { Principal } from \"@dfinity/agent\";  \r\nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\r\nimport { getCrc32 } from '@dfinity/agent/lib/esm/utils/getCrc';\r\nimport { sha224 } from '@dfinity/agent/lib/esm/utils/sha224';\r\nconst sjcl = require('sjcl')\r\nconst bip39 = require('bip39')\r\nconst pbkdf2 = require(\"pbkdf2\");\r\n\r\nconst principalToAccountIdentifier = (p, s) => {\r\n  const padding = Buffer(\"\\x0Aaccount-id\");\r\n  const array = new Uint8Array([\r\n      ...padding,\r\n      ...Principal.fromText(p).toBlob(),\r\n      ...getSubAccountArray(s)\r\n  ]);\r\n  const hash = sha224(array);\r\n  const checksum = to32bits(getCrc32(hash));\r\n  const array2 = new Uint8Array([\r\n      ...checksum,\r\n      ...hash\r\n  ]);\r\n  return toHexString(array2);\r\n};\r\nconst getSubAccountArray = (s) => {\r\n  if (Array.isArray(s)){\r\n    return s.concat(Array(32-s.length).fill(0));\r\n  } else {\r\n    //32 bit number only\r\n    return Array(28).fill(0).concat(to32bits(s ? s : 0))\r\n  }\r\n};\r\nconst from32bits = ba => {\r\n  var value;\r\n  for (var i = 0; i < 4; i++) {\r\n    value = (value << 8) | ba[i];\r\n  }\r\n  return value;\r\n}\r\nconst to32bits = num => {\r\n  let b = new ArrayBuffer(4);\r\n  new DataView(b).setUint32(0, num);\r\n  return Array.from(new Uint8Array(b));\r\n}\r\nconst toHexString = (byteArray)  =>{\r\n  return Array.from(byteArray, function(byte) {\r\n    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n  }).join('')\r\n}\r\nconst fromHexString = (hex) => {\r\n  if (hex.substr(0,2) == \"0x\") hex = hex.substr(2);\r\n  for (var bytes = [], c = 0; c < hex.length; c += 2)\r\n  bytes.push(parseInt(hex.substr(c, 2), 16));\r\n  return bytes;\r\n}\r\nconst mnemonicToId = (mnemonic) => {\r\n  var seed = bip39.mnemonicToSeedSync(mnemonic);\r\n  seed = Array.from(seed);\r\n  seed = seed.splice(0, 32);\r\n  seed = new Uint8Array(seed);\r\n  return Ed25519KeyIdentity.generate(seed);\r\n}\r\nconst encrypt = (mnemonic, principal, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    pbkdf2.pbkdf2(password, principal, 30000, 512, 'sha512', (e, d) => {\r\n      if (e) return reject(e);\r\n      resolve(sjcl.encrypt(d.toString(), btoa(mnemonic)));\r\n    });\r\n  });\r\n}\r\nconst decrypt = (data, principal, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    pbkdf2.pbkdf2(password, principal, 30000, 512, 'sha512', (e, d) => {\r\n      if (e) return reject(e);\r\n      try{\r\n        resolve(atob(sjcl.decrypt(d.toString(), data)));\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  });\r\n}\r\nconst isHex = (h) => {\r\n  var regexp = /^[0-9a-fA-F]+$/;\r\n  return regexp.test(h);\r\n};\r\nconst validateAddress = (a) => {\r\n  return (isHex(a) && a.length == 64)\r\n}\r\nconst validatePrincipal = (p) => {\r\n  try {\r\n    return (p == Principal.fromText(p).toText());\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\nexport { \r\n  Principal, \r\n  principalToAccountIdentifier, \r\n  getSubAccountArray, \r\n  from32bits, \r\n  to32bits, \r\n  toHexString, \r\n  fromHexString, \r\n  mnemonicToId, \r\n  encrypt, \r\n  decrypt, \r\n  isHex,\r\n  bip39,\r\n  validateAddress,\r\n  validatePrincipal  };","/**\r\n * @file RosettaApi\r\n * @copyright Copyright (c) 2018-2021 Dylan Miller and dfinityexplorer contributors\r\n * @license MIT License\r\n */\r\n\r\nimport axios from 'axios';\r\nimport BigNumber from 'bignumber.js';\r\nimport jsonBigint from 'json-bigint';\r\n\r\n// Set useNativeBigInt to true and use BigInt once BigInt is widely supported.\r\nconst JSONbig = jsonBigint({ strict: true });\r\n\r\n/**\r\n * Types of Rosetta API errors.\r\n */\r\nexport const RosettaErrorType = Object.freeze({\r\n  NotFound: 0,\r\n  Timeout: 1,\r\n  NetworkError: 2\r\n});\r\n\r\n/**\r\n * Describes the cause of a Rosetta API error.\r\n */\r\nexport class RosettaError extends Error {\r\n  /**\r\n   * Create a RosettaError.\r\n   * @param {String} message An error message describing the error.\r\n   * @param {Number} status number The HTTP response status.\r\n   */\r\n  constructor(message, status) {\r\n    super(message);\r\n    switch (status) {\r\n    case 408:\r\n      this.errorType = RosettaErrorType.Timeout;\r\n      break;\r\n    case 500:\r\n      this.errorType = RosettaErrorType.NotFound;\r\n      break;\r\n    default:\r\n      this.errorType = RosettaErrorType.NetworkError;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Contains information about a transaction.\r\n */\r\nexport class Transaction  {\r\n  /**\r\n   * Create a Transaction.\r\n   * @param {Any} rosettaTransaction The Rosetta Transaction object of the transaction.\r\n   * @param {Number} blockIndex The index of the block containing the transaction.\r\n   * milliseconds since the Unix Epoch.\r\n   */\r\n  constructor(rosettaTransaction, blockIndex) {\r\n    this.blockIndex = blockIndex;\r\n    this.hash = rosettaTransaction.transaction_identifier.hash;\r\n    const timestampMs = rosettaTransaction.metadata.timestamp.div(1000000).toNumber();\r\n    this.timestamp = new Date(timestampMs);\r\n    const operations = rosettaTransaction.operations;\r\n    if (operations.length >= 1) { \r\n      this.type = operations[0].type;\r\n      this.status = operations[0].status;\r\n      this.account1Address = operations[0].account.address;\r\n      this.amount = new BigNumber(operations[0].amount.value);\r\n      // Negate amount for TRANSACTION and BURN, so that they appear in the UI as positive values.\r\n      if ((operations[0].type === 'TRANSACTION' || operations[0].type === 'BURN') &&\r\n        !this.amount.isZero()) {\r\n        this.amount = this.amount.negated();\r\n      }\r\n    }\r\n    else {\r\n      this.type = '';\r\n      this.status = '';\r\n      this.account1Address = '';\r\n      this.amount = new BigNumber(0);\r\n    }\r\n    if (operations.length >= 2 && operations[1].type === 'TRANSACTION')\r\n      this.account2Address = operations[1].account.address;\r\n    else\r\n      this.account2Address = '';\r\n    if (operations.length >= 3 && operations[2].type === 'FEE')\r\n      this.fee = new BigNumber(-operations[2].amount.value);\r\n    else\r\n      this.fee = new BigNumber(0);\r\n    this.memo = new BigNumber(rosettaTransaction.metadata.memo);\r\n  }\r\n};\r\n\r\n/**\r\n * Manages Rosetta API calls.\r\n */\r\nexport default class RosettaApi {\r\n  /**\r\n   * Create a RosettaApi.\r\n   */\r\n  constructor() {\r\n    this.axios = axios.create({\r\n      baseURL: 'https://rosetta-api.internetcomputer.org/',\r\n      method: 'post',\r\n      transformRequest: (data) => JSONbig.stringify(data),\r\n      transformResponse: (data) => JSONbig.parse(data),\r\n      headers: { 'Content-Type': 'application/json;charset=utf-8' }\r\n    });\r\n\r\n    this.networkIdentifier = this.networksList().then(res =>\r\n      res.network_identifiers.find(\r\n        networkIdentifier => networkIdentifier.blockchain === 'Internet Computer'\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the ICP account balance of the specified account.\r\n   * @param {string} accountAddress The account address to get the ICP balance of.\r\n   * @returns {Promise<BigNumber|RosettaError>} The ICP account balance of the specified account, or\r\n   * a RosettaError for error.\r\n   */\r\n  async getAccountBalance(accountAddress) {\r\n    try {\r\n      const response = await this.accountBalanceByAddress(accountAddress);\r\n      return new BigNumber(response.balances[0].value);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the latest block index.\r\n   * @returns {Promise<number>} The latest block index, or a RosettaError for error.\r\n   */\r\n  async getLastBlockIndex() {\r\n    try {\r\n      const response = await this.networkStatus();\r\n      return response.current_block_identifier.index;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction object with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Transaction|null} The Transaction object with the specified hash, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransaction(transactionHash) {\r\n    try {\r\n      const responseTransactions = await this.transactionsByHash(transactionHash);\r\n      if (responseTransactions.transactions.length === 0)\r\n        return new RosettaError('Transaction not found.', 500);\r\n\r\n      return new Transaction(\r\n        responseTransactions.transactions[0].transaction,\r\n        responseTransactions.transactions[0].block_identifier.index);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param limit {number} The maximum number of transactions to return in one call.\r\n   * @param maxBlockIndex {number} The block index to start at. If not specified, start at current\r\n   * block.\r\n   * @param offset {number} The offset from maxBlockIndex to start returning transactions.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactions(limit, maxBlockIndex, offset) {\r\n    try {\r\n      // This function can be simplified once /search/transactions supports using the properties\r\n      // max_block, offset, and limit.\r\n      let blockIndex;\r\n      if (maxBlockIndex)\r\n        blockIndex = maxBlockIndex;\r\n      else {\r\n        // Get the latest block index.\r\n        const response = await this.networkStatus();\r\n        blockIndex = response.current_block_identifier.index;\r\n      }\r\n      if (offset)\r\n        blockIndex = Math.max(blockIndex - offset, -1);\r\n      const transactionCount = Math.min(limit, blockIndex + 1);\r\n      const transactions = [];\r\n      for (let i = 0; i < transactionCount; i++)\r\n        transactions.push(await this.getTransactionByBlock(blockIndex - i));\r\n      return transactions;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactionsByAccount(accountAddress) {\r\n    try {\r\n      const response = await this.transactionsByAccount(accountAddress);\r\n      const transactions = await Promise.all(\r\n        response.transactions.map((blockTransaction) => {\r\n          return new Transaction(\r\n            blockTransaction.transaction, blockTransaction.block_identifier.index);\r\n        })\r\n      );\r\n      return transactions.reverse();\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction corresponding to the specified block index (i.e., block height).\r\n   * @param {number} blockIndex The index of the block to return the Transaction for.\r\n   * @returns {Promise<Transaction>} The Transaction corresponding to the specified block index.\r\n   * @private\r\n   */\r\n  async getTransactionByBlock(blockIndex) {\r\n    const response = await this.blockByIndex(blockIndex);\r\n    return new Transaction(response.block.transactions[0], blockIndex);\r\n  }\r\n\r\n  /**\r\n   * Perform the specified http request and return the response data.\r\n   * @param {string} url The server URL that will be used for the request.\r\n   * @param {object} data The data to be sent as the request body.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async request(url, data) {\r\n    return (await this.axios.request({ url: url, data: data })).data;\r\n  }\r\n\r\n  /**\r\n   * Return the /network/list response, containing a list of NetworkIdentifiers that the Rosetta\r\n   * server supports.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  networksList() {\r\n    return this.request('/network/list', {});\r\n  }\r\n\r\n  /**\r\n   * Return /network/status response, describing the current status of the network.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async networkStatus() {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/network/status', {\r\n        network_identifier: networkIdentifier\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /account/balance response for the specified account.\r\n   * @param {string} accountAddress The account address to get the balance of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async accountBalanceByAddress(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/account/balance', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /block response for the block corresponding to the specified block index (i.e.,\r\n   * block height).\r\n   * @param {number} blockIndex The index of the block to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async blockByIndex(blockIndex) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/block', {\r\n        network_identifier: networkIdentifier,\r\n        block_identifier: {index: blockIndex}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions containing an operation that affects\r\n   * the specified account.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByAccount(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions (only one) with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByHash(transactionHash) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        transaction_identifier: {hash: transactionHash}\r\n      }\r\n    );\r\n  }\r\n}","export default ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  const AccountBalanceArgs = IDL.Record({ 'account' : AccountIdentifier });\r\n  const SubAccount = IDL.Vec(IDL.Nat8);\r\n  const BlockHeight = IDL.Nat64;\r\n  const NotifyCanisterArgs = IDL.Record({\r\n    'to_subaccount' : IDL.Opt(SubAccount),\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'to_canister' : IDL.Principal,\r\n    'max_fee' : ICPTs,\r\n    'block_height' : BlockHeight,\r\n  });\r\n  const Memo = IDL.Nat64;\r\n  const TimeStamp = IDL.Record({ 'timestamp_nanos' : IDL.Nat64 });\r\n  const SendArgs = IDL.Record({\r\n    'to' : AccountIdentifier,\r\n    'fee' : ICPTs,\r\n    'memo' : Memo,\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'created_at_time' : IDL.Opt(TimeStamp),\r\n    'amount' : ICPTs,\r\n  });\r\n  return IDL.Service({\r\n    'account_balance_dfx' : IDL.Func([AccountBalanceArgs], [ICPTs], ['query']),\r\n    'notify_dfx' : IDL.Func([NotifyCanisterArgs], [], []),\r\n    'send_dfx' : IDL.Func([SendArgs], [BlockHeight], []),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  return [LedgerCanisterInitPayload];\r\n};","export default ({ IDL }) => {\r\n  const User = IDL.Principal;\r\n  const BalanceRequest = IDL.Record({ 'user' : User });\r\n  const Balance = IDL.Nat;\r\n  const Metadata = IDL.Vec(IDL.Nat8);\r\n  const TransferRequest = IDL.Record({\r\n    'to' : User,\r\n    'metadata' : IDL.Opt(Metadata),\r\n    'from' : User,\r\n    'amount' : Balance,\r\n  });\r\n  const Result_2 = IDL.Variant({\r\n    'ok' : IDL.Null,\r\n    'err' : IDL.Variant({\r\n      'InsufficientBalance' : IDL.Null,\r\n      'InvalidSource' : User,\r\n      'Unauthorized' : IDL.Null,\r\n    }),\r\n  });\r\n  const TransferResponse = Result_2;\r\n  const OperatorAction = IDL.Variant({\r\n    'removeOperator' : IDL.Null,\r\n    'setOperator' : IDL.Null,\r\n  });\r\n  const OperatorRequest = IDL.Record({\r\n    'owner' : User,\r\n    'operators' : IDL.Vec(IDL.Tuple(User, OperatorAction)),\r\n  });\r\n  const Result = IDL.Variant({\r\n    'ok' : IDL.Null,\r\n    'err' : IDL.Variant({ 'Unauthorized' : IDL.Null, 'InvalidOwner' : User }),\r\n  });\r\n  const OperatorResponse = Result;\r\n  return IDL.Service({\r\n    'getBalance' : IDL.Func([BalanceRequest], [IDL.Opt(Balance)], []),\r\n    'getBalanceInsecure' : IDL.Func(\r\n        [BalanceRequest],\r\n        [IDL.Opt(Balance)],\r\n        ['query'],\r\n      ),\r\n    'getCommunityChestValueInsecure' : IDL.Func(\r\n        [],\r\n        [IDL.Opt(IDL.Nat)],\r\n        ['query'],\r\n      ),\r\n    'getInfo' : IDL.Func(\r\n        [],\r\n        [\r\n          IDL.Record({\r\n            'balance' : IDL.Nat,\r\n            'maxLiveSize' : IDL.Nat,\r\n            'heap' : IDL.Nat,\r\n            'size' : IDL.Nat,\r\n          }),\r\n        ],\r\n        ['query'],\r\n      ),\r\n    'getNumberOfAccounts' : IDL.Func([], [IDL.Nat], []),\r\n    'getTokenInfo' : IDL.Func(\r\n        [],\r\n        [\r\n          IDL.Record({\r\n            'fee' : IDL.Nat,\r\n            'totalMinted' : IDL.Nat,\r\n            'totalSupply' : IDL.Nat,\r\n            'totalTransactions' : IDL.Nat,\r\n          }),\r\n        ],\r\n        ['query'],\r\n      ),\r\n    'getTotalMinted' : IDL.Func([], [IDL.Nat], []),\r\n    'mint' : IDL.Func([IDL.Principal, IDL.Nat], [], []),\r\n    'transfer' : IDL.Func([TransferRequest], [TransferResponse], []),\r\n    'updateOperator' : IDL.Func(\r\n        [IDL.Vec(OperatorRequest)],\r\n        [OperatorResponse],\r\n        [],\r\n      ),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => { return []; };","export default ({ IDL }) => {\n  const Proposal = IDL.Rec();\n  const NeuronId = IDL.Record({ 'id' : IDL.Nat64 });\n  const Followees = IDL.Record({ 'followees' : IDL.Vec(NeuronId) });\n  const NodeProvider = IDL.Record({ 'id' : IDL.Opt(IDL.Principal) });\n  const NetworkEconomics = IDL.Record({\n    'neuron_minimum_stake_e8s' : IDL.Nat64,\n    'max_proposals_to_keep_per_topic' : IDL.Nat32,\n    'neuron_management_fee_per_proposal_e8s' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'transaction_fee_e8s' : IDL.Nat64,\n    'neuron_spawn_dissolve_delay_seconds' : IDL.Nat64,\n    'minimum_icp_xdr_rate' : IDL.Nat64,\n    'maximum_node_provider_rewards_e8s' : IDL.Nat64,\n  });\n  const RewardEvent = IDL.Record({\n    'day_after_genesis' : IDL.Nat64,\n    'actual_timestamp_seconds' : IDL.Nat64,\n    'distributed_e8s_equivalent' : IDL.Nat64,\n    'settled_proposals' : IDL.Vec(NeuronId),\n  });\n  const NeuronStakeTransfer = IDL.Record({\n    'to_subaccount' : IDL.Vec(IDL.Nat8),\n    'neuron_stake_e8s' : IDL.Nat64,\n    'from' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n    'from_subaccount' : IDL.Vec(IDL.Nat8),\n    'transfer_timestamp' : IDL.Nat64,\n    'block_height' : IDL.Nat64,\n  });\n  const GovernanceError = IDL.Record({\n    'error_message' : IDL.Text,\n    'error_type' : IDL.Int32,\n  });\n  const Ballot = IDL.Record({ 'vote' : IDL.Int32, 'voting_power' : IDL.Nat64 });\n  const Tally = IDL.Record({\n    'no' : IDL.Nat64,\n    'yes' : IDL.Nat64,\n    'total' : IDL.Nat64,\n    'timestamp_seconds' : IDL.Nat64,\n  });\n  const Spawn = IDL.Record({ 'new_controller' : IDL.Opt(IDL.Principal) });\n  const Split = IDL.Record({ 'amount_e8s' : IDL.Nat64 });\n  const Follow = IDL.Record({\n    'topic' : IDL.Int32,\n    'followees' : IDL.Vec(NeuronId),\n  });\n  const RemoveHotKey = IDL.Record({\n    'hot_key_to_remove' : IDL.Opt(IDL.Principal),\n  });\n  const AddHotKey = IDL.Record({ 'new_hot_key' : IDL.Opt(IDL.Principal) });\n  const IncreaseDissolveDelay = IDL.Record({\n    'additional_dissolve_delay_seconds' : IDL.Nat32,\n  });\n  const SetDissolveTimestamp = IDL.Record({\n    'dissolve_timestamp_seconds' : IDL.Nat64,\n  });\n  const Operation = IDL.Variant({\n    'RemoveHotKey' : RemoveHotKey,\n    'AddHotKey' : AddHotKey,\n    'StopDissolving' : IDL.Record({}),\n    'StartDissolving' : IDL.Record({}),\n    'IncreaseDissolveDelay' : IncreaseDissolveDelay,\n    'SetDissolveTimestamp' : SetDissolveTimestamp,\n  });\n  const Configure = IDL.Record({ 'operation' : IDL.Opt(Operation) });\n  const RegisterVote = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal' : IDL.Opt(NeuronId),\n  });\n  const DisburseToNeuron = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'kyc_verified' : IDL.Bool,\n    'amount_e8s' : IDL.Nat64,\n    'new_controller' : IDL.Opt(IDL.Principal),\n    'nonce' : IDL.Nat64,\n  });\n  const AccountIdentifier = IDL.Record({ 'hash' : IDL.Vec(IDL.Nat8) });\n  const Amount = IDL.Record({ 'e8s' : IDL.Nat64 });\n  const Disburse = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n    'amount' : IDL.Opt(Amount),\n  });\n  const Command = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'Follow' : Follow,\n    'Configure' : Configure,\n    'RegisterVote' : RegisterVote,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'MakeProposal' : Proposal,\n    'Disburse' : Disburse,\n  });\n  const ManageNeuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'command' : IDL.Opt(Command),\n  });\n  const ExecuteNnsFunction = IDL.Record({\n    'nns_function' : IDL.Int32,\n    'payload' : IDL.Vec(IDL.Nat8),\n  });\n  const RewardToNeuron = IDL.Record({ 'dissolve_delay_seconds' : IDL.Nat64 });\n  const RewardToAccount = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n  });\n  const RewardMode = IDL.Variant({\n    'RewardToNeuron' : RewardToNeuron,\n    'RewardToAccount' : RewardToAccount,\n  });\n  const RewardNodeProvider = IDL.Record({\n    'node_provider' : IDL.Opt(NodeProvider),\n    'reward_mode' : IDL.Opt(RewardMode),\n    'amount_e8s' : IDL.Nat64,\n  });\n  const SetDefaultFollowees = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n  });\n  const ApproveGenesisKyc = IDL.Record({\n    'principals' : IDL.Vec(IDL.Principal),\n  });\n  const Change = IDL.Variant({\n    'ToRemove' : NodeProvider,\n    'ToAdd' : NodeProvider,\n  });\n  const AddOrRemoveNodeProvider = IDL.Record({ 'change' : IDL.Opt(Change) });\n  const Motion = IDL.Record({ 'motion_text' : IDL.Text });\n  const Action = IDL.Variant({\n    'ManageNeuron' : ManageNeuron,\n    'ExecuteNnsFunction' : ExecuteNnsFunction,\n    'RewardNodeProvider' : RewardNodeProvider,\n    'SetDefaultFollowees' : SetDefaultFollowees,\n    'ManageNetworkEconomics' : NetworkEconomics,\n    'ApproveGenesisKyc' : ApproveGenesisKyc,\n    'AddOrRemoveNodeProvider' : AddOrRemoveNodeProvider,\n    'Motion' : Motion,\n  });\n  Proposal.fill(\n    IDL.Record({\n      'url' : IDL.Text,\n      'action' : IDL.Opt(Action),\n      'summary' : IDL.Text,\n    })\n  );\n  const ProposalData = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ClaimOrRefreshNeuronFromAccount = IDL.Record({\n    'controller' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n  });\n  const Command_2 = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'ClaimOrRefresh' : ClaimOrRefreshNeuronFromAccount,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'Disburse' : Disburse,\n  });\n  const NeuronInFlightCommand = IDL.Record({\n    'command' : IDL.Opt(Command_2),\n    'timestamp' : IDL.Nat64,\n  });\n  const BallotInfo = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DissolveState = IDL.Variant({\n    'DissolveDelaySeconds' : IDL.Nat64,\n    'WhenDissolvedTimestampSeconds' : IDL.Nat64,\n  });\n  const Neuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'controller' : IDL.Opt(IDL.Principal),\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'kyc_verified' : IDL.Bool,\n    'not_for_profit' : IDL.Bool,\n    'maturity_e8s_equivalent' : IDL.Nat64,\n    'cached_neuron_stake_e8s' : IDL.Nat64,\n    'created_timestamp_seconds' : IDL.Nat64,\n    'aging_since_timestamp_seconds' : IDL.Nat64,\n    'hot_keys' : IDL.Vec(IDL.Principal),\n    'account' : IDL.Vec(IDL.Nat8),\n    'dissolve_state' : IDL.Opt(DissolveState),\n    'followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'neuron_fees_e8s' : IDL.Nat64,\n    'transfer' : IDL.Opt(NeuronStakeTransfer),\n  });\n  const Governance = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'wait_for_quiet_threshold_seconds' : IDL.Nat64,\n    'node_providers' : IDL.Vec(NodeProvider),\n    'economics' : IDL.Opt(NetworkEconomics),\n    'latest_reward_event' : IDL.Opt(RewardEvent),\n    'to_claim_transfers' : IDL.Vec(NeuronStakeTransfer),\n    'short_voting_period_seconds' : IDL.Nat64,\n    'proposals' : IDL.Vec(IDL.Tuple(IDL.Nat64, ProposalData)),\n    'in_flight_commands' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInFlightCommand)),\n    'neurons' : IDL.Vec(IDL.Tuple(IDL.Nat64, Neuron)),\n    'genesis_timestamp_seconds' : IDL.Nat64,\n  });\n  const Result = IDL.Variant({ 'Ok' : IDL.Null, 'Err' : GovernanceError });\n  const Result_1 = IDL.Variant({\n    'Error' : GovernanceError,\n    'NeuronId' : NeuronId,\n  });\n  const ClaimOrRefreshNeuronFromAccountResponse = IDL.Record({\n    'result' : IDL.Opt(Result_1),\n  });\n  const Result_2 = IDL.Variant({ 'Ok' : Neuron, 'Err' : GovernanceError });\n  const NeuronInfo = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'created_timestamp_seconds' : IDL.Nat64,\n    'state' : IDL.Int32,\n    'retrieved_at_timestamp_seconds' : IDL.Nat64,\n    'voting_power' : IDL.Nat64,\n    'age_seconds' : IDL.Nat64,\n  });\n  const Result_3 = IDL.Variant({ 'Ok' : NeuronInfo, 'Err' : GovernanceError });\n  const ProposalInfo = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'status' : IDL.Int32,\n    'topic' : IDL.Int32,\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'reward_status' : IDL.Int32,\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ListNeurons = IDL.Record({\n    'neuron_ids' : IDL.Vec(IDL.Nat64),\n    'include_neurons_readable_by_caller' : IDL.Bool,\n  });\n  const ListNeuronsResponse = IDL.Record({\n    'neuron_infos' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInfo)),\n    'full_neurons' : IDL.Vec(Neuron),\n  });\n  const ListProposalInfo = IDL.Record({\n    'include_reward_status' : IDL.Vec(IDL.Int32),\n    'before_proposal' : IDL.Opt(NeuronId),\n    'limit' : IDL.Nat32,\n    'exclude_topic' : IDL.Vec(IDL.Int32),\n    'include_status' : IDL.Vec(IDL.Int32),\n  });\n  const ListProposalInfoResponse = IDL.Record({\n    'proposal_info' : IDL.Vec(ProposalInfo),\n  });\n  const SpawnResponse = IDL.Record({ 'created_neuron_id' : IDL.Opt(NeuronId) });\n  const MakeProposalResponse = IDL.Record({\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DisburseResponse = IDL.Record({ 'transfer_block_height' : IDL.Nat64 });\n  const Command_1 = IDL.Variant({\n    'Error' : GovernanceError,\n    'Spawn' : SpawnResponse,\n    'Split' : SpawnResponse,\n    'Follow' : IDL.Record({}),\n    'Configure' : IDL.Record({}),\n    'RegisterVote' : IDL.Record({}),\n    'DisburseToNeuron' : SpawnResponse,\n    'MakeProposal' : MakeProposalResponse,\n    'Disburse' : DisburseResponse,\n  });\n  const ManageNeuronResponse = IDL.Record({ 'command' : IDL.Opt(Command_1) });\n  return IDL.Service({\n    'claim_gtc_neurons' : IDL.Func(\n        [IDL.Principal, IDL.Vec(NeuronId)],\n        [Result],\n        [],\n      ),\n    'claim_or_refresh_neuron_from_account' : IDL.Func(\n        [ClaimOrRefreshNeuronFromAccount],\n        [ClaimOrRefreshNeuronFromAccountResponse],\n        [],\n      ),\n    'get_full_neuron' : IDL.Func([IDL.Nat64], [Result_2], ['query']),\n    'get_neuron_ids' : IDL.Func([], [IDL.Vec(IDL.Nat64)], ['query']),\n    'get_neuron_info' : IDL.Func([IDL.Nat64], [Result_3], ['query']),\n    'get_pending_proposals' : IDL.Func([], [IDL.Vec(ProposalInfo)], ['query']),\n    'get_proposal_info' : IDL.Func(\n        [IDL.Nat64],\n        [IDL.Opt(ProposalInfo)],\n        ['query'],\n      ),\n    'list_neurons' : IDL.Func([ListNeurons], [ListNeuronsResponse], ['query']),\n    'list_proposals' : IDL.Func(\n        [ListProposalInfo],\n        [ListProposalInfoResponse],\n        ['query'],\n      ),\n    'manage_neuron' : IDL.Func([ManageNeuron], [ManageNeuronResponse], []),\n    'transfer_gtc_neuron' : IDL.Func([NeuronId, NeuronId], [Result], []),\n  });\n};\nexport const init = ({ IDL }) => {\n  const Proposal = IDL.Rec();\n  const NeuronId = IDL.Record({ 'id' : IDL.Nat64 });\n  const Followees = IDL.Record({ 'followees' : IDL.Vec(NeuronId) });\n  const NodeProvider = IDL.Record({ 'id' : IDL.Opt(IDL.Principal) });\n  const NetworkEconomics = IDL.Record({\n    'neuron_minimum_stake_e8s' : IDL.Nat64,\n    'max_proposals_to_keep_per_topic' : IDL.Nat32,\n    'neuron_management_fee_per_proposal_e8s' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'transaction_fee_e8s' : IDL.Nat64,\n    'neuron_spawn_dissolve_delay_seconds' : IDL.Nat64,\n    'minimum_icp_xdr_rate' : IDL.Nat64,\n    'maximum_node_provider_rewards_e8s' : IDL.Nat64,\n  });\n  const RewardEvent = IDL.Record({\n    'day_after_genesis' : IDL.Nat64,\n    'actual_timestamp_seconds' : IDL.Nat64,\n    'distributed_e8s_equivalent' : IDL.Nat64,\n    'settled_proposals' : IDL.Vec(NeuronId),\n  });\n  const NeuronStakeTransfer = IDL.Record({\n    'to_subaccount' : IDL.Vec(IDL.Nat8),\n    'neuron_stake_e8s' : IDL.Nat64,\n    'from' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n    'from_subaccount' : IDL.Vec(IDL.Nat8),\n    'transfer_timestamp' : IDL.Nat64,\n    'block_height' : IDL.Nat64,\n  });\n  const GovernanceError = IDL.Record({\n    'error_message' : IDL.Text,\n    'error_type' : IDL.Int32,\n  });\n  const Ballot = IDL.Record({ 'vote' : IDL.Int32, 'voting_power' : IDL.Nat64 });\n  const Tally = IDL.Record({\n    'no' : IDL.Nat64,\n    'yes' : IDL.Nat64,\n    'total' : IDL.Nat64,\n    'timestamp_seconds' : IDL.Nat64,\n  });\n  const Spawn = IDL.Record({ 'new_controller' : IDL.Opt(IDL.Principal) });\n  const Split = IDL.Record({ 'amount_e8s' : IDL.Nat64 });\n  const Follow = IDL.Record({\n    'topic' : IDL.Int32,\n    'followees' : IDL.Vec(NeuronId),\n  });\n  const RemoveHotKey = IDL.Record({\n    'hot_key_to_remove' : IDL.Opt(IDL.Principal),\n  });\n  const AddHotKey = IDL.Record({ 'new_hot_key' : IDL.Opt(IDL.Principal) });\n  const IncreaseDissolveDelay = IDL.Record({\n    'additional_dissolve_delay_seconds' : IDL.Nat32,\n  });\n  const SetDissolveTimestamp = IDL.Record({\n    'dissolve_timestamp_seconds' : IDL.Nat64,\n  });\n  const Operation = IDL.Variant({\n    'RemoveHotKey' : RemoveHotKey,\n    'AddHotKey' : AddHotKey,\n    'StopDissolving' : IDL.Record({}),\n    'StartDissolving' : IDL.Record({}),\n    'IncreaseDissolveDelay' : IncreaseDissolveDelay,\n    'SetDissolveTimestamp' : SetDissolveTimestamp,\n  });\n  const Configure = IDL.Record({ 'operation' : IDL.Opt(Operation) });\n  const RegisterVote = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal' : IDL.Opt(NeuronId),\n  });\n  const DisburseToNeuron = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'kyc_verified' : IDL.Bool,\n    'amount_e8s' : IDL.Nat64,\n    'new_controller' : IDL.Opt(IDL.Principal),\n    'nonce' : IDL.Nat64,\n  });\n  const AccountIdentifier = IDL.Record({ 'hash' : IDL.Vec(IDL.Nat8) });\n  const Amount = IDL.Record({ 'e8s' : IDL.Nat64 });\n  const Disburse = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n    'amount' : IDL.Opt(Amount),\n  });\n  const Command = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'Follow' : Follow,\n    'Configure' : Configure,\n    'RegisterVote' : RegisterVote,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'MakeProposal' : Proposal,\n    'Disburse' : Disburse,\n  });\n  const ManageNeuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'command' : IDL.Opt(Command),\n  });\n  const ExecuteNnsFunction = IDL.Record({\n    'nns_function' : IDL.Int32,\n    'payload' : IDL.Vec(IDL.Nat8),\n  });\n  const RewardToNeuron = IDL.Record({ 'dissolve_delay_seconds' : IDL.Nat64 });\n  const RewardToAccount = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n  });\n  const RewardMode = IDL.Variant({\n    'RewardToNeuron' : RewardToNeuron,\n    'RewardToAccount' : RewardToAccount,\n  });\n  const RewardNodeProvider = IDL.Record({\n    'node_provider' : IDL.Opt(NodeProvider),\n    'reward_mode' : IDL.Opt(RewardMode),\n    'amount_e8s' : IDL.Nat64,\n  });\n  const SetDefaultFollowees = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n  });\n  const ApproveGenesisKyc = IDL.Record({\n    'principals' : IDL.Vec(IDL.Principal),\n  });\n  const Change = IDL.Variant({\n    'ToRemove' : NodeProvider,\n    'ToAdd' : NodeProvider,\n  });\n  const AddOrRemoveNodeProvider = IDL.Record({ 'change' : IDL.Opt(Change) });\n  const Motion = IDL.Record({ 'motion_text' : IDL.Text });\n  const Action = IDL.Variant({\n    'ManageNeuron' : ManageNeuron,\n    'ExecuteNnsFunction' : ExecuteNnsFunction,\n    'RewardNodeProvider' : RewardNodeProvider,\n    'SetDefaultFollowees' : SetDefaultFollowees,\n    'ManageNetworkEconomics' : NetworkEconomics,\n    'ApproveGenesisKyc' : ApproveGenesisKyc,\n    'AddOrRemoveNodeProvider' : AddOrRemoveNodeProvider,\n    'Motion' : Motion,\n  });\n  Proposal.fill(\n    IDL.Record({\n      'url' : IDL.Text,\n      'action' : IDL.Opt(Action),\n      'summary' : IDL.Text,\n    })\n  );\n  const ProposalData = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ClaimOrRefreshNeuronFromAccount = IDL.Record({\n    'controller' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n  });\n  const Command_2 = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'ClaimOrRefresh' : ClaimOrRefreshNeuronFromAccount,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'Disburse' : Disburse,\n  });\n  const NeuronInFlightCommand = IDL.Record({\n    'command' : IDL.Opt(Command_2),\n    'timestamp' : IDL.Nat64,\n  });\n  const BallotInfo = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DissolveState = IDL.Variant({\n    'DissolveDelaySeconds' : IDL.Nat64,\n    'WhenDissolvedTimestampSeconds' : IDL.Nat64,\n  });\n  const Neuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'controller' : IDL.Opt(IDL.Principal),\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'kyc_verified' : IDL.Bool,\n    'not_for_profit' : IDL.Bool,\n    'maturity_e8s_equivalent' : IDL.Nat64,\n    'cached_neuron_stake_e8s' : IDL.Nat64,\n    'created_timestamp_seconds' : IDL.Nat64,\n    'aging_since_timestamp_seconds' : IDL.Nat64,\n    'hot_keys' : IDL.Vec(IDL.Principal),\n    'account' : IDL.Vec(IDL.Nat8),\n    'dissolve_state' : IDL.Opt(DissolveState),\n    'followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'neuron_fees_e8s' : IDL.Nat64,\n    'transfer' : IDL.Opt(NeuronStakeTransfer),\n  });\n  const Governance = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'wait_for_quiet_threshold_seconds' : IDL.Nat64,\n    'node_providers' : IDL.Vec(NodeProvider),\n    'economics' : IDL.Opt(NetworkEconomics),\n    'latest_reward_event' : IDL.Opt(RewardEvent),\n    'to_claim_transfers' : IDL.Vec(NeuronStakeTransfer),\n    'short_voting_period_seconds' : IDL.Nat64,\n    'proposals' : IDL.Vec(IDL.Tuple(IDL.Nat64, ProposalData)),\n    'in_flight_commands' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInFlightCommand)),\n    'neurons' : IDL.Vec(IDL.Tuple(IDL.Nat64, Neuron)),\n    'genesis_timestamp_seconds' : IDL.Nat64,\n  });\n  return [Governance];\n};","/* global BigInt */\nimport { Principal } from \"@dfinity/agent\";  \nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\nimport { AuthClient } from \"@dfinity/auth-client\";\nimport { \n  mnemonicToId, \n  validatePrincipal, \n  encrypt, \n  decrypt, \n  bip39 } from \"./utils.js\";\n\nvar identities = {};\nconst processId = (id, type) => {\n  var p = id.getPrincipal().toString();\n  identities[p] = id;\n  return {\n    principal : p,\n    type : type\n  }\n}\nconst StoicIdentity = {\n  getIdentity : (principal) => {\n    if (!identities.hasOwnProperty(principal)) return false;\n    return identities[principal];\n  },\n  setup : (type, optdata) => {\n    return new Promise(async (resolve, reject) => {\n      switch(type){\n        case \"ii\":\n          var auth = await AuthClient.create();\n          auth.login({\n            identityProvider: \"https://identity.ic0.app/\",\n            onSuccess: async () => {\n              var id = await auth.getIdentity()\n              resolve(processId(id, type));\n            },\n            onError : reject\n          });\n        break;\n        case \"private\":\n          localStorage.setItem('_m', optdata.mnemonic);\n          var id = mnemonicToId(optdata.mnemonic);\n          encrypt(optdata.mnemonic, id.getPrincipal().toString(), optdata.password).then(_em => {\n            localStorage.setItem('_em', _em);\n            resolve(processId(id, type));        \n          });\n        break;\n        case \"watch\":\n          resolve({\n            principal : optdata.principal,\n            type : type\n          });   \n        break;\n      }\n    });\n  },\n  load : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n          var auth = await AuthClient.create();\n          var id = await auth.getIdentity();\n          if (id.getPrincipal().toString() != '2vxsx-fae') {\n            resolve(processId(id, _id.type)); \n          } else reject(\"Not logged in\");\n        break;\n        case \"private\":\n          var t = localStorage.getItem('_m');\n          if (!t){\n            reject(\"No seed\");\n          } else {\n            var mnemonic = t;\n            var id = mnemonicToId(mnemonic);\n            resolve(processId(id, _id.type));\n          }\n        break;\n        case \"watch\":\n          resolve({\n            principal : _id.principal,\n            type : _id.type\n          });   \n        break;\n      }\n    });\n  },\n  unlock : (_id, optdata) => {\n    return new Promise(async (resolve, reject) => {\n      StoicIdentity.load(_id).then(resolve).catch(async e => {\n        //Yup we should be here :-(\n        switch(_id.type){\n          case \"ii\":\n            var auth = await AuthClient.create();\n            auth.login({\n              identityProvider: \"https://identity.ic0.app/\",\n              onSuccess: async () => {\n                var id = await auth.getIdentity()\n                resolve(processId(id, _id.type));\n              },\n              onError : reject\n            });\n            break;\n          case \"private\":\n            var t = localStorage.getItem('_em');\n            if (!t) return reject(\"No encrypted data to decrypt\");\n            decrypt(t, _id.principal, optdata.password).then(mnemonic => {\n              localStorage.setItem('_m', mnemonic);\n              var id = mnemonicToId(mnemonic);\n              resolve(processId(id, _id.type));\n            }).catch(reject);\n            break;\n        }\n      });\n    });\n  },\n  lock : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n            var auth = await AuthClient.create();\n            auth.logout();\n          break;\n        case \"private\":\n            localStorage.removeItem(\"_m\");\n          break;\n      }\n      resolve(true);\n    });\n  },\n  clear : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n            var auth = await AuthClient.create();\n            auth.logout();\n          break;\n        case \"private\":\n            localStorage.removeItem(\"_m\");\n            localStorage.removeItem(\"_em\");\n          break;\n      }\n      resolve(true);\n    });\n  },\n  validatePrincipal : validatePrincipal,\n  validateMnemonic : bip39.validateMnemonic,\n  generateMnemonic : bip39.generateMnemonic,\n  validatePassword : (p) => {\n    var re = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;\n    return re.test(p);\n  }\n}\r\nwindow.StoicIdentity = StoicIdentity;\nexport {StoicIdentity};","/* global BigInt */\r\nimport { Actor, HttpAgent, Principal, AnonymousIdentity } from \"@dfinity/agent\";  \r\nimport { principalToAccountIdentifier, toHexString, to32bits, getSubAccountArray, fromHexString } from \"./utils.js\";\r\nimport extjs from \"./extjs.js\";\r\nimport { sha256 as jsSha256 } from 'js-sha256';\r\nimport { blobFromUint8Array } from '@dfinity/agent/lib/esm/types';\r\nimport {StoicIdentity} from \"./identity.js\";\r\n\r\nconst GOVERNANCE_CANISTER = \"rrkah-fqaaa-aaaaa-aaaaq-cai\";\r\nconst LEDGER_CANISTER_ID = \"ryjl3-tyaaa-aaaaa-aaaba-cai\";\r\nconst topics = [\r\n  [\"All topics\", 0],\r\n  [\"Neuron Management\", 1],\r\n  [\"Exchange Rate\", 2],\r\n  [\"Network Economics\", 3],\r\n  [\"Governance\", 4],\r\n  [\"Node Admin\", 5],\r\n  [\"Participant Management\", 6],\r\n  [\"Subnet Management\", 7],\r\n  [\"Network Canister Management\", 8],\r\n  [\"KYC\", 9],\r\n  [\"Node Proivuder Rewards\", 10],\r\n];\r\nconst sha256 = (data) => {\r\n    const shaObj = jsSha256.create();\r\n    shaObj.update(data);\r\n    return blobFromUint8Array(new Uint8Array(shaObj.array()));\r\n}\r\nconst getStakingAddress = (principal, nonce) => {\r\n  if (typeof nonce == 'string') nonce = Buffer(nonce);\r\n  if (nonce.length > 8) return false;\r\n  const array = new Uint8Array([\r\n      [0x0c],\r\n      ...Buffer(\"neuron-stake\"),\r\n      ...Principal.fromText(principal).toBlob(),\r\n      ...nonce\r\n  ]);\r\n  const hash = sha256(array);\r\n  return principalToAccountIdentifier(GOVERNANCE_CANISTER, Array.from(hash));\r\n}\r\n\r\nclass ICNeuron {\r\n  //TODO add voting, proposals, disburse to neuron?\r\n  //TODO deal with errors\r\n  _api = false;\r\n  _neuronid = 0;\r\n  data = {};\r\n  constructor(neuronid, neurondata, identity) {\r\n    if (!neuronid) throw \"NeuronID is required\";\r\n    if (!identity) throw \"Identity is required\";\r\n    this._neuronid = neuronid;\r\n    this.data = neurondata;\r\n    this._api = extjs.connect(\"https://boundary.ic0.app/\", identity).canister('rrkah-fqaaa-aaaaa-aaaaq-cai');\r\n  };\r\n  isAlive() {\r\n    return (this.data.voting_power > 0n);\r\n  };\r\n  async update() {\r\n    var ni = await this._api.get_neuron_info(this._neuronid);\r\n    if (ni.hasOwnProperty(\"Err\")) {\r\n      throw \"Error: \" + JSON.stringify(ni.Error);\r\n    };\r\n    this.data = ni.Ok;\r\n    return this.data;\r\n  };\r\n  async spawn() { //TODO TEST\r\n    var commandArgs = {\r\n      new_controller  : []\r\n    };\r\n    var cmdId = \"Spawn\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async split(amount) { //TODO TEST\r\n    var commandArgs = {\r\n      amount_e8s   : BigInt(amount) * BigInt(10**8)\r\n    };\r\n    var cmdId = \"Split\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async follow(topic, neuron) {\r\n    var commandArgs = {\r\n      topic : BigInt(topic),\r\n      \"followees\" : [{id : BigInt(neuron)}]\r\n    };\r\n    var cmdId = \"Follow\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async startDissolving() {\r\n    var commandArgs = {\r\n      operation  : [{\"StartDissolving\" : {}}]\r\n    };\r\n    var cmdId = \"Configure\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async stopDissolving() {\r\n    var commandArgs = {\r\n      operation  : [{\"StopDissolving\" : {}}]\r\n    };\r\n    var cmdId = \"Configure\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async increaseDissolveDelay(seconds) {\r\n    var commandArgs = {\r\n      operation  : [{\"IncreaseDissolveDelay\" : {\r\n        \"additional_dissolve_delay_seconds\" : BigInt(seconds)\r\n      }}]\r\n    };\r\n    var cmdId = \"Configure\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    console.log(res);\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async setDissolveTime(seconds) {//not really needed\r\n    var commandArgs = {\r\n      operation  : [{\"SetDissolveTimestamp\" : {\r\n        dissolve_timestamp_seconds  : BigInt(seconds)\r\n      }}]\r\n    };\r\n    var cmdId = \"Configure\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n  async disburse() {\r\n    var commandArgs = {\r\n      to_account   : [],\r\n      amount   : []\r\n    };\r\n    var cmdId = \"Disburse\";\r\n    var cmdBody = {};\r\n    cmdBody[cmdId] = commandArgs;\r\n    var res = await this._api.manage_neuron({\r\n      id : [{id : this._neuronid}],\r\n      command : [cmdBody]\r\n    });\r\n    if (res.command[0].hasOwnProperty('Error')) throw \"Error:\" + JSON.stringify(res.command[0].Error.error_message);\r\n    else return res.command[0][cmdId];\r\n  };\r\n};\r\nconst NeuronManager = {\r\n  nextId : 0,\r\n  setIndex : (index) => {\r\n    NeuronManager.nextId = index;\r\n  },\r\n  scan : async (id) => {\r\n    var lastInd = 0;\r\n    var neurons = [];\r\n    while(true){\r\n      try {\r\n        var n = await NeuronManager.get(lastInd, id);\r\n        neurons.push(n);\r\n        lastInd++;\r\n      } catch (e) {\r\n        //dont throw we are expecting an error\r\n        break;\r\n      }\r\n    };\r\n    NeuronManager.nextId = lastInd;\r\n    return neurons;\r\n  },\r\n  create : async (amount, id, sa) => { //new, takes next index\r\n    var index = NeuronManager.nextId;\r\n    var n = await NeuronManager.stake(index, amount, id, sa);\r\n    NeuronManager.nextId++;\r\n    return n;\r\n  },\r\n  stake : async (index, amount, id, sa) => { //stakes, can be new or existing index\r\n    if (index > 2**32) return false; //only 32bits for now/over 4 billion\r\n    if (amount < 1) return false;\r\n    var principal = id.getPrincipal();\r\n    var nonce = Array(4).fill(0).concat(to32bits(index));\r\n    var memo = BigInt(\"0x\"+toHexString(nonce));\r\n    var stakingTo = getStakingAddress(principal.toText(), nonce);\r\n    var args = {\r\n      \"from_subaccount\" : [getSubAccountArray(sa ?? 0)], \r\n      \"to\" : stakingTo,\r\n      \"amount\" : { \"e8s\" : BigInt(amount) * BigInt(10**8) },\r\n      \"fee\" : { \"e8s\" : 10000n }, \r\n      \"memo\" : Number(memo), \r\n      \"created_at_time\" : []\r\n    }\r\n    var bh = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(LEDGER_CANISTER_ID).send_dfx(args);\r\n    var n = await NeuronManager.get(index, id);\r\n    return n;\r\n  },\r\n  get : async (index, id) => {\r\n    if (index > 2**32) return false; //only 32bits for now\r\n    var principal = id.getPrincipal();\r\n    var nonce = Array(4).fill(0).concat(to32bits(index));\r\n    var memo = BigInt(\"0x\"+toHexString(nonce));\r\n    \r\n    var args = {\r\n      controller : [principal], \r\n      memo : Number(memo)\r\n    };\r\n    var nd = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(GOVERNANCE_CANISTER).claim_or_refresh_neuron_from_account(args);\r\n    if (nd.result[0].hasOwnProperty(\"Error\")) {\r\n      throw \"Error: \" + JSON.stringify(nd.result[0].Error);\r\n    }\r\n    var neuronid = nd.result[0].NeuronId.id;\r\n    \r\n    var ni = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(GOVERNANCE_CANISTER).get_neuron_info(neuronid);\r\n    if (ni.hasOwnProperty(\"Err\")) {\r\n      throw \"Error: \" + JSON.stringify(ni.Error);\r\n    };\r\n    var ndata = ni.Ok;\r\n    return new ICNeuron(neuronid, ndata, id);\r\n  },\r\n  topics : topics\r\n};\r\nexport default NeuronManager;\r\nwindow.NeuronManager = NeuronManager;\r\nwindow.StoicIdentity = StoicIdentity;","import React, { useState, useEffect } from 'react';\r\nimport makeBlockie from 'ethereum-blockies-base64';\r\nconst style = {\r\n  width:\"100%\", \r\n  height:\"100%\", \r\n}\r\nfunction Blockie(props) {\r\n  return (<img style={style} src={makeBlockie(props.address)}/>);\r\n}\r\nexport default Blockie;","import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport Blockie from '../components/Blockie';\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    zIndex: 1\r\n  }\r\n}));\r\n    \r\nexport default function AccountDrawer(props) {\r\n  const { window } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const container = window !== undefined ? () => window().document.body : undefined;\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []))\r\n  const idtype = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.type : \"\"));\r\n  const principal = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.principal : \"\"));\r\n  const dispatch = useDispatch()\r\n  \r\n  const addAccount = () => {\r\n    var nextid = accounts.length;\r\n    dispatch({ type: 'account/add', payload : {id : nextid, principal : principal}});\r\n    props.changeRoute('accountDetail', nextid);\r\n  };\r\n  \r\n  const accountsList = (\r\n    <div style={{marginTop:64, marginBottom: 100}}>\r\n      <div style={{width:drawerWidth-1, zIndex: 10, backgroundColor:'white', position:\"fixed\", top:0, textAlign:\"center\"}} className={classes.toolbar}>\r\n        {/*<span style={{display:'block', fontSize:'x-large',padding:'15px 0', textAlign:'center',fontWeight:'bold'}}>Stoic Wallet <span style={{fontSize:'small',fontWeight:'normal'}}>By Toniq Labs</span></span>*/}\r\n        <img style={{maxHeight:'50px',marginTop:'5px'}} alt=\"Stoic Wallet by Toniq Labs\" src=\"logo.png\" />\r\n      </div>\r\n      <Divider />\r\n      <List>\r\n        {accounts.map((account, index) => {\r\n          return (\r\n            <div key={index}>\r\n              <ListItem button onClick={() => props.changeRoute('accountDetail', index)}>\r\n                <ListItemAvatar>\r\n                  <Avatar>\r\n                    <Blockie address={account.address} />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText \r\n                  primaryTypographyProps={{noWrap:true}} \r\n                  secondaryTypographyProps={{noWrap:true}} \r\n                  primary={account.name}\r\n                  secondary={account.address} />\r\n              </ListItem>\r\n            </div>\r\n          )\r\n        })}\r\n        <ListItem button onClick={addAccount}>\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <AddIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Add Account\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <ListItem button onClick={() => props.changeRoute('addressBook')}>\r\n          <ListItemIcon><PeopleIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Address Book\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => props.changeRoute('neurons')}>\r\n          <ListItemIcon><AllInclusiveIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Neurons\" />\r\n        </ListItem>\r\n        {idtype == 'watch' ? \"\" :\r\n        <ListItem button onClick={() => props.lockWallet()}>\r\n          <ListItemIcon><LockIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Lock Wallet\" />\r\n        </ListItem> }\r\n      </List>\r\n      <div style={{width: drawerWidth-1, zIndex: 10, backgroundColor:'white', position:\"fixed\", bottom:0, textAlign:'center'}} className={classes.toolbar}>\r\n        <span style={{position:'absolute', bottom:'10px', left:'0', right:'0'}}>Connected to Mainnet - v0.1.0</span>\r\n      </div>\r\n    </div>\r\n  );\r\n  \r\n  return (\r\n    <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n      <Hidden smUp implementation=\"css\">\r\n        <Drawer\r\n          container={container}\r\n          variant=\"temporary\"\r\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n          open={props.open}\r\n          onClose={props.onClose}\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          ModalProps={{\r\n            keepMounted: true, // Better open performance on mobile.\r\n          }}\r\n        >\r\n          {accountsList}\r\n        </Drawer>\r\n      </Hidden>\r\n      <Hidden xsDown implementation=\"css\">\r\n        <Drawer\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          variant=\"permanent\"\r\n          open\r\n        >\r\n          {accountsList}\r\n        </Drawer>\r\n      </Hidden>\r\n    </nav>\r\n  );\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function SnackbarButton(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (typeof props.onClick != 'undefined') props.onClick();\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  return (  \r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Snackbar\r\n        style={{position:\"fixed\"}}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        anchorOrigin={props.anchorOrigin}\r\n        onClose={handleClose}\r\n        message={props.message}\r\n        action={\r\n          <React.Fragment>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        } \r\n      /> \r\n    </>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport withStyles from \"@material-ui/core/styles/withStyles\"\r\nimport extjs from '../ic/extjs.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nconst styles = {\r\n  root: {\r\n    height: \"100%\",\r\n  },\r\n  selectedCard: {\r\n    height: \"100%\",\r\n    backgroundColor: '#003240',\r\n    color: 'white'\r\n  },\r\n  card: {\r\n    height: \"100%\",\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n};\r\nvar intervalId = 0;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nexport default function TokenCard(props) {\r\n  const [balance, setBalance] = React.useState(false);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const handleClick = () => {\r\n    props.onClick();\r\n  };\r\n  const updateBalance = () => {\r\n    api.token(props.data.id).getBalance(props.address, identity.principal).then(b => {\r\n      setBalance(Number(b)/(10**props.data.decimals));\r\n    });\r\n  }\r\n  React.useEffect(() => {\r\n    updateBalance();\r\n    intervalId = setInterval(() => updateBalance(), 10000);\r\n    return () => {\r\n      clearInterval(intervalId);\r\n    }\r\n  }, []);\r\n  React.useEffect(() => {\r\n    setBalance(false);\r\n    updateBalance();\r\n  }, [props.address]);\r\n  return (\r\n    <Grid style={styles.root} item xl={2} lg={3} md={4}>\r\n      <Card onClick={handleClick} style={props.selected ? styles.selectedCard : styles.card }>\r\n        <CardActionArea>\r\n          <CardContent>\r\n            <Typography style={styles.title} color={props.selected ? \"inherit\" : \"textSecondary\"} gutterBottom>\r\n              {props.data.name}\r\n            </Typography>\r\n            <Typography variant=\"h6\" >\r\n              {balance === false ? \"Loading\" : balance + \" \" + props.data.symbol}\r\n            </Typography>\r\n            {/*<Typography style={styles.pos} color={props.selected ? \"inherit\" : \"textSecondary\"}>\r\n              ~$123.04USD\r\n            </Typography>*/}\r\n          </CardContent>\r\n        </CardActionArea>\r\n      </Card>\r\n    </Grid>\r\n  );\r\n}\r\n","function fallbackCopyTextToClipboard(text) {\r\n  \r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n  \r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\nfunction copyTextToClipboard(text) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function() {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function(err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\nconst \r\nidentityTypes = {\r\n  'ii' : \"Internet Identity\",\r\n  'private' : \"Mnemonic Key\",\r\n  'watch' : \"Read-only\",\r\n},\r\nclipboardCopy = (text) => {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function() {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function(err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n},\r\nisHex = (h) => {\r\n  var regexp = /^[0-9a-fA-F]+$/;\r\n  return regexp.test(h);\r\n},\r\ncompressAddress = (a) => {\r\n  if (!a) return \"\";\r\n  if (a.length == 64 && isHex(a)) return a.substr(0, 40) + \"...\";\r\n  else {\r\n    var pp = a.split(\"-\");\r\n    if (pp.length <= 4) return a;\r\n    else {\r\n      return pp[0] + \"-\" + pp[1].substr(0, 3) + \"...\" + pp[pp.length-3].substr(2) + \"-\" + pp[pp.length-2] + \"-\" + pp[pp.length-1];\r\n    }\r\n  }\r\n},\r\ndisplayDate = (d) => {\r\n  return new Date(d).toString();\r\n},\r\nnumf = (n, d) => {\r\n  if (n === \"N/A\") return n;\r\n  d = (d ?? 2);\r\n  return n.toFixed(d).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,');\r\n};\r\nexport {\r\n  clipboardCopy, compressAddress, displayDate, numf, identityTypes\r\n};","/* global BigInt */\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {validatePrincipal, validateAddress} from '../ic/utils.js';\r\nimport {compressAddress} from '../utils.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nexport default function SendForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [open, setOpen] = React.useState(false);\r\n  const [step, setStep] = React.useState(0);\r\n  const [balance, setBalance] = React.useState(false);\r\n\r\n  const [amount, setAmount] = React.useState(0);\r\n  const [minFee, setMinFee] = React.useState(0);\r\n  const [fee, setFee] = React.useState(0);\r\n  const [to, setTo] = React.useState('');\r\n  \r\n  const [advanced, setAdvanced] = React.useState(false);\r\n  const [memo, setMemo] = React.useState('');\r\n  const [notify, setNotify] = React.useState(false);\r\n  \r\n  //cold API\r\n  const api = extjs.connect(\"https://boundary.ic0.app/\");\r\n\r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const review = () => {\r\n    if (isNaN(amount)) return error(\"Please enter a valid amount to send\");\r\n    if (isNaN(fee)) return error(\"Please enter a valid fee to use\");\r\n    if (fee != minFee) return error(\"The fee must be \" + minFee);\r\n    switch(props.data.symbol){\r\n      case \"ICP\":\r\n        if (!validateAddress(to)) return error(\"Please enter a valid address\");      \r\n      break;\r\n      case \"HZLD\":\r\n        if (!validatePrincipal(to)) return error(\"Please enter a valid principal to send to\");      \r\n      break;\r\n      default:\r\n        if (!validateAddress(to) && !validatePrincipal(to)) return error(\"Please enter a valid address to send to\");      \r\n      break;\r\n    }\r\n    if ((amount+fee) > balance)  return error(\"You have insufficient \" + props.data.symbol); \r\n    setStep(1);\r\n  }\r\n  const submit = () => {\r\n    //Submit to blockchain here\r\n    var _from_principal = identity.principal;\r\n    var _from_sa = currentAccount;\r\n    var _to_user = to;\r\n    var _amount = BigInt(amount*(10**props.data.decimals));\r\n    var _fee = BigInt(fee*(10**props.data.decimals));\r\n    var _memo = memo;\r\n    var _notify = false;//hardcoded false for now\r\n    \r\n    //Load signing ID\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    \r\n    props.loader(true);\r\n    handleClose();\r\n    \r\n    //hot api, will sign as identity - BE CAREFUL\r\n    extjs.connect(\"https://boundary.ic0.app/\", id).token(props.data.id).transfer(_from_principal, _from_sa, _to_user, _amount, _fee, _memo, _notify).then(r => {\r\n      if (r) {\r\n        return props.alert(\"Transaction complete\", \"Your transfer was sent successfully\");\r\n      } else {        \r\n        return error(\"Something went wrong with this transfer\");\r\n      }\r\n    }).catch(e => {\r\n      return error(\"There was an error: \" + e);\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setStep(0);\r\n    setAmount(0);\r\n    setMinFee(0);\r\n    setFee(0);\r\n    setBalance(false);\r\n    setTo('');\r\n    setAdvanced(false);\r\n    setMemo('');\r\n    setNotify(false);\r\n  };\r\n  React.useEffect(() => {\r\n    api.token(props.data.id).fee().then(f => {\r\n      setMinFee(f/10**(props.data.decimals));\r\n      setFee(f/10**(props.data.decimals));\r\n    });\r\n    api.token(props.data.id).getBalance(props.address, identity.principal).then(b => {\r\n      setBalance(Number(b)/(10**props.data.decimals));\r\n    });\r\n  }, [props.data.id, open]);\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose}  maxWidth={'sm'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Send {props.data.name} Tokens ({props.data.symbol})</DialogTitle>\r\n        {step == 0 ?\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Please enter the recipient address and amount that you wish to send below.</DialogContentText>\r\n            <>\r\n              <TextField\r\n                autoFocus\r\n                margin=\"dense\"\r\n                label=\"Address of the Recipient\"\r\n                value={to}\r\n                onChange={(e) => setTo(e.target.value)}\r\n                type=\"text\"\r\n                fullWidth\r\n              />\r\n              <TextField\r\n                style={{width:'49%', marginRight:'2%'}}\r\n                margin=\"dense\"\r\n                label={\"Amount of \" + props.data.symbol + \" to Send\"}\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                type=\"text\"\r\n              />\r\n              { minFee > 0 ?\r\n              <TextField\r\n                style={{width:'49%'}}\r\n                margin=\"dense\"\r\n                label=\"Fee\"\r\n                value={fee}\r\n                onChange={(e) => setFee(e.target.value)}\r\n                type=\"text\"\r\n              /> : \"\" }\r\n              <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n                { balance !== false ? \"Balance: \"+balance+\" \"+props.data.symbol +\" \": \"\"}\r\n                { minFee > 0 ? \"Min Fee: \"+minFee+\" \"+props.data.symbol : \"\"}\r\n              </DialogContentText>\r\n              { advanced ?\r\n                <a style={{cursor: 'pointer', fontWeight:'bold'}} onClick={() => setAdvanced(false)}>Hide Advanced Options</a>\r\n              :\r\n                <a style={{cursor: 'pointer', fontWeight:'bold'}} onClick={() => setAdvanced(true)}>Show Advanced Options</a>\r\n              }\r\n            </>\r\n            { advanced ?\r\n            <>\r\n              <TextField\r\n                margin=\"dense\"\r\n                multiline\r\n                rows='2'\r\n                rowsMax='4'\r\n                label=\"Optional Memo\"\r\n                value={memo}\r\n                onChange={(e) => setMemo(e.target.value)}\r\n                type=\"text\"\r\n                fullWidth\r\n              />\r\n              {/*\r\n              <FormControlLabel\r\n                control={<Switch checked={notify} onChange={(event) => setNotify(event.target.checked)} name=\"notify\" />}\r\n                label=\"Notify\"\r\n              />*/}\r\n            </> : \"\" }\r\n          </DialogContent>\r\n        :\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n            Please confirm that you are about to send <br />\r\n            <strong style={{color:'red'}}>{amount} {props.data.symbol}</strong><br /> \r\n            from <strong style={{color:'red'}}>{compressAddress(props.address)}</strong><br />\r\n            to <strong style={{color:'red'}}>{compressAddress(to)}</strong><br />\r\n            { fee > 0 ? \" using a fee of \" + fee : \"\"} \r\n            </DialogContentText>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n              <strong>All transactions are irreversible, so ensure the above details are correct before you continue.</strong>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n        }\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          {step == 0 ?\r\n            <Button onClick={review} color=\"primary\">Review Transaction</Button>\r\n            :\r\n            <Button onClick={submit} color=\"primary\">Confirm Transaction</Button>\r\n          }\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Timestamp from 'react-timestamp';\r\nimport extjs from '../ic/extjs.js';\r\n\r\nvar intervalId = 0;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nexport default function Transactions(props) {\r\n  const [transactions, setTransactions] = React.useState(false);\r\n  const styles = {\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n    },\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n  };\r\n  const updateTransactions = (_id, _address) => {\r\n    //ugly set new code?\r\n    var id = JSON.parse(JSON.stringify(_id));\r\n    var address = JSON.parse(JSON.stringify(_address));\r\n    return api.token(id).getTransactions(address).then(txs => {\r\n      return [txs, id, address];\r\n    });\r\n  }\r\n  const stopPoll = () => {\r\n    if (intervalId) clearInterval(intervalId);\r\n    intervalId = 0;\r\n  }\r\n  const startPoll = () => {\r\n    if (intervalId) stopPoll();\r\n    fetchTx();\r\n    intervalId = setInterval(fetchTx, 10000);\r\n  };\r\n  const fetchTx = () => {\r\n    //console.log(\"Fetching for \" + props.data.id);\r\n    updateTransactions(props.data.id, props.address).then(txs => {\r\n      //console.log(\"Fetched for \" + txs[1]);\r\n      //console.log(\"Current \" + props.data.id);\r\n      if (txs[1] != props.data.id || txs[2] != props.address) return;\r\n      setTransactions(txs[0]);\r\n    });\r\n  };\r\n  React.useEffect(() => {\r\n    startPoll();\r\n    return () => {\r\n      stopPoll();\r\n    }\r\n  }, []);\r\n  React.useEffect(() => {\r\n    let canceled = false;\r\n    \r\n    stopPoll();\r\n    setTimeout( () => {\r\n      setTransactions(false);\r\n      startPoll();\r\n    }, 100);\r\n    return () => (canceled = true);\r\n  }, [props.address, props.data.id]);\r\n\r\n  return (\r\n    <>\r\n      {transactions === false ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          Loading transactions...\r\n        </Typography>\r\n      </div> : (transactions.length === 0 ?\r\n        <div style={styles.empty}>\r\n          <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n            No transactions available\r\n          </Typography>\r\n        </div> :\r\n        <TableContainer component={Paper}>\r\n          <Table style={styles.table} aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Date</TableCell>\r\n                <TableCell>Description</TableCell>\r\n                <TableCell align=\"right\">Amount</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {transactions.map((tx, i) => (\r\n                <TableRow key={props.data.id + props.address + tx.hash + i}>\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    <Timestamp relative autoUpdate date={tx.timestamp} />\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {tx.from == props.address ?\r\n                      <>Sent <strong>{tx.amount} {props.data.symbol}</strong> to {tx.to} with a <strong>{tx.fee} {props.data.symbol}</strong> Fee<br />(<a href={\"https://ic.rocks/transaction/\"+tx.hash} target=\"_blank\">View Transaction</a>)</> :\r\n                      <>Received <strong>{tx.amount} {props.data.symbol}</strong> from {tx.from}<br />(<a href={\"https://ic.rocks/transaction/\"+tx.hash} target=\"_blank\">View Transaction</a>)</> }\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {tx.from == props.address ? \r\n                      <span style={{color:'red',fontWeight:'bold'}}>-{tx.amount + tx.fee}</span> : \r\n                      <span style={{color:'#00b894',fontWeight:'bold'}}>+{tx.amount}</span>\r\n                    }\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>) }\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport NavigationIcon from '@material-ui/icons/Navigation';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function MainFab(props) {\r\n  const classes = useStyles();\r\n  const style = {\r\n      margin: 0,\r\n      top: 'auto',\r\n      right: 20,\r\n      bottom: 20,\r\n      left: 'auto',\r\n      position: 'fixed',\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab style={style} {...props}>\r\n        {props.children}\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function InputForm(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(props.defaultValue ?? \"\");\r\n  const [secondaryValue, setSecondaryValue] = React.useState(props.defaultSecondaryValue ?? \"\");\r\n\r\n  const submit = () => {\r\n    if (typeof props.onClick != 'undefined') props.onClick(value, secondaryValue);\r\n    setOpen(false);\r\n    setValue(props.defaultValue ?? \"\");\r\n    setSecondaryValue(props.defaultSecondaryValue ?? \"\");\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{props.content}</DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label={props.inputLabel}\r\n            value={value}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            type=\"text\"\r\n            fullWidth\r\n          />\r\n          { props.secondaryInput ? \r\n            <TextField\r\n              margin=\"dense\"\r\n              label={props.secondaryInput}\r\n              value={secondaryValue}\r\n              onChange={(e) => setSecondaryValue(e.target.value)}\r\n              type=\"text\"\r\n              fullWidth\r\n            /> : \"\" }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={submit} color=\"primary\">{props.buttonLabel}</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\nimport Blockie from '../components/Blockie';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport TokenCard from '../components/TokenCard';\r\nimport SendForm from '../components/SendForm';\r\nimport AddTokenCard from '../components/AddTokenCard';\r\nimport Transactions from '../components/Transactions';\r\nimport MainFab from '../components/MainFab';\r\nimport InputForm from '../components/InputForm';\r\nimport extjs from '../ic/extjs.js';\r\nimport {validatePrincipal} from '../ic/utils.js';\r\n\r\nimport { clipboardCopy } from '../utils';\r\n\r\n\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nfunction AccountDetail(props) {\r\n  const currentToken = useSelector(state => state.currentToken)\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const idtype = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.type : \"\"));\r\n  const account = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts[currentAccount] : {}));\r\n  const [tokens, setTokens] = React.useState(account.tokens);\r\n  \r\n  const dispatch = useDispatch()\r\n  React.useEffect(() => {\r\n    setTokens(account.tokens);\r\n  }, [currentToken, currentAccount, currentPrincipal]);\r\n  \r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    grid: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2)\r\n    }\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  const alert = (t, m) => {\r\n    props.alert(t, m);\r\n  };\r\n  \r\n  const changeToken = (i) => {\r\n    dispatch({ type: 'currentToken', payload: {index:i}});\r\n  }\r\n  const editAccountName = (name) => {\r\n    if (!name) return error(\"Please enter a valid account name\");\r\n    if (name.length > 20) return error(\"Max length or account names is 20 characters\");\r\n    dispatch({ type: 'account/edit', payload: {name:name}});\r\n  };\r\n  const addToken = (cid) => {\r\n    if (!validatePrincipal(cid)) return error(\"Please enter a valid canister ID\");\r\n    if (account.tokens.findIndex(x => x.id === cid) >= 0) return error(\"Canister has already been added\");\r\n    props.loader(true);\r\n    api.token(cid).getMetadata().then(md => {\r\n      if (md.type != 'fungible') return error(\"NFT's are not supported yet\");\r\n      md.id = cid;\r\n      dispatch({ type: 'account/token/add', payload: {\r\n        metadata : md\r\n      }});\r\n      props.loader(false);\r\n      dispatch({ type: 'currentToken', payload: {index:account.tokens.length}});\r\n    });\r\n  };\r\n  return (\r\n    <div style={styles.root}>\r\n      <List>\r\n        <ListItem>\r\n          <ListItemAvatar>\r\n            <Avatar style={{width:60, height:60}}>\r\n              <Blockie address={account.address} />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText \r\n            style={{paddingLeft:20}}\r\n            primaryTypographyProps={{noWrap:true, variant:'h4'}} \r\n            secondaryTypographyProps={{noWrap:true, variant:'subtitle1'}} \r\n            primary={account.name}\r\n            secondary={\r\n              <>\r\n                {account.address}\r\n                <SnackbarButton\r\n                  message=\"Address Copied\"\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                  }}\r\n                  onClick={() => clipboardCopy(account.address)}\r\n                >\r\n                  <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                    <FileCopyIcon style={{ fontSize: 18 }} />\r\n                  </IconButton>\r\n                </SnackbarButton>\r\n              </>\r\n            }              />\r\n          <ListItemSecondaryAction>\r\n            <InputForm\r\n              onClick={editAccountName}\r\n              title=\"Change Account Name\"\r\n              inputLabel=\"Account Name\"\r\n              secondaryInput={false}\r\n              content=\"Enter a new friendly name for this account.\"\r\n              defaultValue={account.name}\r\n              buttonLabel=\"Save\"\r\n            >\r\n              <IconButton edge=\"end\" aria-label=\"edit\">\r\n                <EditIcon />\r\n              </IconButton>\r\n            </InputForm>\r\n            <IconButton href={\"https://ic.rocks/account/\"+account.address} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n              <LaunchIcon />\r\n            </IconButton>\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      </List>\r\n      <div style={styles.grid}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          direction=\"row\"\r\n          justify=\"flex-start\"\r\n          alignItems=\"flex-start\"\r\n        >\r\n          {tokens.map((token, index) => {\r\n            return (<TokenCard key={account.address + token.symbol} address={account.address} data={token} onClick={() => changeToken(index)} selected={index == currentToken} />)\r\n          })}\r\n          <InputForm\r\n            onClick={addToken}\r\n            title=\"Add token\"\r\n            inputLabel=\"Canister ID\"\r\n            content=\"Enter the Canister ID for the token you wish to add\"\r\n            buttonLabel=\"Add\"\r\n          >\r\n            <Fab style={{verticalAlign: 'center', marginRight:20}} color=\"primary\" aria-label=\"add\">\r\n              <AddIcon />\r\n            </Fab>\r\n          </InputForm>\r\n        </Grid>\r\n      </div>\r\n      {currentToken != 0 ?\r\n      <p style={{marginLeft:'15px', color:'rgba(0, 0, 0, 0.54)'}}>\r\n        <strong>Token ID:</strong> {account.tokens[currentToken].id}\r\n        <SnackbarButton\r\n          message=\"Token ID Copied\"\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n          }}\r\n          onClick={() => clipboardCopy(account.tokens[currentToken].id)}\r\n        >\r\n          <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n            <FileCopyIcon style={{ fontSize: 14 }} />\r\n          </IconButton>\r\n        </SnackbarButton>\r\n      </p>: \"\"}\r\n      <Transactions data={account.tokens[currentToken]} address={account.address} />\r\n      {idtype == 'watch' ? \"\" :\r\n        <SendForm alert={alert} loader={props.loader} error={error} address={account.address} data={account.tokens[currentToken]}>\r\n          <MainFab color=\"primary\" aria-label=\"send\"><SendIcon /></MainFab>\r\n        </SendForm>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AccountDetail;","import React from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MainFab from '../components/MainFab';\r\nimport InputForm from '../components/InputForm';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport Blockie from '../components/Blockie';\r\nimport { clipboardCopy } from '../utils';\r\nimport {validatePrincipal, validateAddress} from '../ic/utils.js';\r\nfunction AddressBook(props) {\r\n  const addresses = useSelector(state => state.addresses)\r\n  const dispatch = useDispatch()\r\n  \r\n  const editAddress = (name, address, index) => {\r\n    dispatch({ type: 'addresses/edit', payload: {\r\n      index : index,\r\n      name : name,\r\n      address : address,\r\n    }});\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  const addAddress = (name, address) => {\r\n    if (!name) return error(\"Please enter a valid contact name\");\r\n    if (name.length > 30) return error(\"Max length or contact names is 30 characters\");\r\n    if (!validateAddress(address) && !validatePrincipal(address)) return error(\"Please enter a valid address or principal\");\r\n    var a = dispatch({ type: 'addresses/add', payload: {\r\n      name : name,\r\n      address : address,\r\n    }});\r\n  };\r\n  const deleteAddress = (id) => {\r\n    dispatch({ type: 'addresses/delete', payload: id});\r\n  };\r\n  \r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n      paddingTop : 30\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      { addresses.length > 0 ?\r\n        <List>\r\n          {addresses.map((contact, index) => {\r\n            return (\r\n              <ListItem key={index}>\r\n                <ListItemAvatar>\r\n                  <Avatar>\r\n                    <Blockie address={contact.address} />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText \r\n                  primaryTypographyProps={{noWrap:true}} \r\n                  secondaryTypographyProps={{noWrap:true}} \r\n                  primary={contact.name}\r\n                  secondary={\r\n                    <>\r\n                      {contact.address}\r\n                      <SnackbarButton\r\n                        message=\"Address Copied\"\r\n                        anchorOrigin={{\r\n                          vertical: 'bottom',\r\n                          horizontal: 'left',\r\n                        }}\r\n                        onClick={() => clipboardCopy(contact.address)}\r\n                      >\r\n                        <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                          <FileCopyIcon style={{ fontSize: 18 }} />\r\n                        </IconButton>\r\n                      </SnackbarButton>\r\n                    </>\r\n                  } />\r\n                <ListItemSecondaryAction>\r\n                  <InputForm\r\n                    onClick={(name, address) => editAddress(name, address, index)}\r\n                    title=\"Edit contact from address book\"\r\n                    inputLabel=\"Contact Name\"\r\n                    secondaryInput=\"Contact Address\"\r\n                    content=\"Update the details of a saved contact\"\r\n                    buttonLabel=\"Save\"\r\n                    defaultValue={contact.name} \r\n                    defaultSecondaryValue={contact.address} \r\n                  >\r\n                    <IconButton edge=\"end\" aria-label=\"edit\">\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                  </InputForm>\r\n                  <IconButton onClick={() => deleteAddress(index)} edge=\"end\" aria-label=\"delete\">\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            )\r\n          })}\r\n        </List> :\r\n        <div style={styles.empty}>\r\n          <Typography paragraph align=\"center\">\r\n            <PeopleIcon style={styles.largeIcon} />\r\n          </Typography>\r\n          <Typography paragraph style={{fontWeight:\"bold\"}} align=\"center\">\r\n            Your address book is empty\r\n          </Typography>\r\n          <Typography paragraph align=\"center\">\r\n            You can create contacts in your address book to associate addresses with easy to read names.\r\n          </Typography>\r\n        </div>\r\n      }\r\n      <InputForm\r\n        onClick={addAddress}\r\n        title=\"Add contact to address book\"\r\n        inputLabel=\"Contact Name\"\r\n        secondaryInput=\"Contact Address\"\r\n        content=\"Save names and addresses of common people and services.\"\r\n        buttonLabel=\"Save\"\r\n      >\r\n        <MainFab color=\"primary\" aria-label=\"add\"><AddIcon /></MainFab>\r\n      </InputForm>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddressBook;","import React from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\n\r\nfunction Neurons(props) {\r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n      paddingTop : 30\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={styles.root}>\r\n      <div style={styles.empty}>\r\n        <Typography paragraph align=\"center\">\r\n          <AllInclusiveIcon style={styles.largeIcon} />\r\n        </Typography>\r\n        <Typography paragraph align=\"center\">\r\n          Sorry, neuron management is still cooking away over at Toniq Labs. Please be patient!\r\n        </Typography>\r\n        \r\n        \r\n        {/*\r\n        <Typography paragraph align=\"center\">\r\n          <AllInclusiveIcon style={styles.largeIcon} />\r\n        </Typography>\r\n        <Typography paragraph style={{fontWeight:\"bold\"}} align=\"center\">\r\n          No neurons available\r\n        </Typography>\r\n        <Typography paragraph align=\"center\">\r\n          You can create create and manage neurons directly from Stoic.\r\n        </Typography>*/}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Neurons;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport InboxIcon from '@material-ui/icons/Inbox';\r\nimport DraftsIcon from '@material-ui/icons/Drafts';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport UsbIcon from '@material-ui/icons/Usb';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { clipboardCopy, identityTypes } from '../utils';\r\n\r\nimport Blockie from '../components/Blockie';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\n\r\nfunction Settings(props) {\r\n  const [assets, setAssets] = React.useState([]);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []));\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const principals = useSelector(state => state.principals);\r\n  const makeAssets = () => {  \r\n    var assets = ['ICP'];\r\n    accounts.map(account => {\r\n      account.tokens.map(token => {\r\n        if (assets.indexOf(token.symbol) < 0) assets.push(token.symbol);\r\n      });\r\n    });\r\n    setAssets(assets);\r\n  }\r\n  const clearWallet = () => {\r\n    props.confirm(\"Please confirm\", \"You are about to clear your wallet, which will remove all data from this device. Are you sure you want to continue?\").then(v => {\r\n      if (v) props.clearWallet();\r\n    });\r\n  };\r\n  React.useEffect(() => {\r\n    makeAssets();\r\n  }, [currentPrincipal]);\r\n  return (\r\n    <>\r\n      <List\r\n        component=\"nav\"\r\n        aria-labelledby=\"settings-list\"\r\n        subheader={\r\n          <ListSubheader id=\"nested-list-subheader\">\r\n            Active Principal\r\n          </ListSubheader>\r\n        }\r\n      >\r\n        <ListItem>\r\n          <ListItemAvatar>\r\n            <Avatar style={{width:60, height:60}}>\r\n              <Blockie address={identity.principal ?? ''} />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText \r\n            style={{paddingLeft:20}}\r\n            primaryTypographyProps={{noWrap:true}} \r\n            primary={\r\n              <>\r\n                {identity.principal}\r\n                <SnackbarButton\r\n                  message=\"Principal Copied\"\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                  }}\r\n                  onClick={() => clipboardCopy(identity.principal)}\r\n                >\r\n                  <IconButton size=\"small\" edge=\"end\" aria-label=\"edit\">\r\n                    <FileCopyIcon  style={{ fontSize: 18 }} />\r\n                  </IconButton>\r\n                </SnackbarButton>\r\n              </>\r\n            }\r\n            secondary={\r\n              <>\r\n                <>{identityTypes[identity.type]}<br />{accounts.length + (accounts.length === 1 ? \" Account\" : \" Accounts\")} containing {assets.join(\", \")}</>\r\n              </>\r\n            } />\r\n          <ListItemSecondaryAction>\r\n            <IconButton href={\"https://ic.rocks/principal/\"+identity.principal} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n              <LaunchIcon />\r\n            </IconButton>\r\n            { principals.length > 1 ?\r\n            <IconButton edge=\"end\" aria-label=\"search\">\r\n              <DeleteIcon />\r\n            </IconButton> : \"\" }\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      {principals.length > 1 ?\r\n        <><List\r\n          component=\"nav\"\r\n          aria-labelledby=\"settings-list\"\r\n          subheader={\r\n            <ListSubheader id=\"nested-list-subheader\">\r\n              Other Principals\r\n            </ListSubheader>\r\n          }\r\n        >\r\n          {principals.map((principal, i) => {\r\n            if (i == currentPrincipal) return;\r\n            return (\r\n            <ListItem button>\r\n              <ListItemAvatar>\r\n                <Avatar>\r\n                  <Blockie address={principal.identity.principal ?? ''} />\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText \r\n                primaryTypographyProps={{noWrap:true}} \r\n                primary={principal.identity.principal}\r\n                secondary={\r\n                  <>\r\n                    <>{identityTypes[principal.identity.type]}</>\r\n                  </>\r\n                } />\r\n            </ListItem>) \r\n          })}\r\n        </List>\r\n        <Divider /> </>: \"\" }\r\n        {/*\r\n      <List component=\"nav\" aria-label=\"secondary add principal\">\r\n        <ListItem button>\r\n          <ListItemIcon>\r\n            <AddIcon />\r\n          </ListItemIcon>\r\n          <ListItemText \r\n            primary=\"Create Principal\" \r\n            secondary=\"I want to create a new account by generating a random seed phrase\" \r\n          />\r\n        </ListItem>\r\n        <ListItem button>\r\n          <ListItemIcon>\r\n            <GetAppIcon />\r\n          </ListItemIcon>\r\n          <ListItemText \r\n            primary=\"Import Principal\" \r\n            secondary=\"I want to add an existing account using a seed phrase, or as a 'read-only' account\" \r\n          />\r\n        </ListItem>\r\n        <ListItem button>\r\n          <ListItemIcon>\r\n            <AllInclusiveIcon />\r\n          </ListItemIcon>\r\n          <ListItemText \r\n            primary=\"Link Internet Identitiy\" \r\n            secondary=\"I want to link create an account using an Internet Identity\" \r\n          />\r\n        </ListItem>\r\n        <ListItem button>\r\n          <ListItemIcon>\r\n            <UsbIcon />\r\n          </ListItemIcon>\r\n          <ListItemText \r\n            primary=\"Connect Hardware Wallet\" \r\n            secondary=\"I want to import an account from my Ledger or Trezor device\" \r\n          />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      */}\r\n      <List\r\n        component=\"nav\"\r\n        aria-labelledby=\"settings-list\"\r\n        subheader={\r\n          <ListSubheader id=\"nested-list-subheader\">\r\n            Advanced Settings\r\n          </ListSubheader>\r\n        }\r\n      >\r\n        <ListItem button onClick={clearWallet}>\r\n          <ListItemText \r\n            primaryTypographyProps={{noWrap:true, color : \"error\"}} \r\n            primary=\"Remove this wallet from this device\"/>\r\n        </ListItem>\r\n      </List>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport AccountDrawer from '../components/AccountDrawer';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\n\r\nimport AccountDetail from '../views/AccountDetail';\r\nimport AddressBook from '../views/AddressBook';\r\nimport Neurons from '../views/Neurons';\r\nimport Settings from '../views/Settings';\r\n\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 300;\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  toolbarButtons: {\r\n    marginLeft: 'auto',\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n\r\n}));\r\n\r\n\r\nvar UNLOCKED = false, ACTIVE = false, INTV = false;\r\n  const routes = {\r\n    'accountDetail' : {\r\n      title : \"Account Details\",\r\n      view : AccountDetail\r\n    },\r\n    'neurons' : {\r\n      title : \"Neuron Management\",\r\n      view : Neurons\r\n    },\r\n    'addressBook' : {\r\n      title : \"Address Book\",\r\n      view : AddressBook\r\n    },\r\n    'settings' : {\r\n      title : \"Settings\",\r\n      view : Settings\r\n    },\r\n  };\r\n//Helpers\r\n\r\n\r\nfunction Wallet(props) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n  const [mobileOpen, setMobileOpen] = React.useState(false);\r\n  const [route, setRoute] = React.useState('accountDetail');\r\n  const [toolbarTitle, setToolbarTitle] = React.useState(routes[route].title);\r\n  const dispatch = useDispatch()\r\n  \r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n  const renderView = (r) => {\r\n    switch(r){\r\n      case \"accountDetail\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      case \"settings\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, clearWallet : clearWallet})\r\n      break;\r\n      default:\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm})\r\n      break;\r\n    }\r\n  }\r\n  const changeRoute = (r, i) => {\r\n    setToolbarTitle(routes[r].title);\r\n    setRoute(r);\r\n    if (typeof i !== 'undefined') dispatch({ type: 'currentAccount', payload: {index:i}});\r\n  };\r\n  \r\n  const lockWallet = () => {\r\n    props.logout();\r\n  };\r\n  const clearWallet = () => {\r\n    props.remove();\r\n  };\r\n  const wallet = {}; //Load in JS api?\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar position=\"fixed\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={handleDrawerToggle}\r\n            className={classes.menuButton}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          \r\n          <Typography variant=\"h6\" noWrap>\r\n            {toolbarTitle}\r\n          </Typography>\r\n          <div className={classes.toolbarButtons}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"settings\"   \r\n              edge=\"end\"\r\n              onClick={() => changeRoute('settings')}\r\n            >\r\n              <AccountCircleIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <AccountDrawer lockWallet={lockWallet} changeRoute={changeRoute} onClose={handleDrawerToggle} open={mobileOpen} />\r\n      <main className={classes.content}>\r\n        <div className={classes.toolbar} />\r\n          {renderView(route)}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Wallet;\r\n","import React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport UsbIcon from '@material-ui/icons/Usb';\r\n\r\nexport default function ConnectList(props) {\r\n  const handleClick = (t) => {\r\n    props.handler(t);\r\n  };\r\n  return (\r\n    <List component=\"nav\" aria-label=\"secondary add principal\">\r\n      <ListItem button onClick={() => handleClick('create') }>\r\n        <ListItemIcon>\r\n          <AddIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary=\"Create a new Wallet\" \r\n          secondary=\"I want to create a new wallet by generating a random seed phrase\" \r\n        />\r\n        \r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('import') }>\r\n        <ListItemIcon>\r\n          <GetAppIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary=\"Import an existing Wallet\" \r\n          secondary=\"I want to recover an existing wallet using a seed phrase\"\r\n        />\r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('link') }>\r\n        <ListItemIcon>\r\n          <AllInclusiveIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary=\"Link your Internet Identitiy\" \r\n          secondary=\"I want to link create a wallet using an Internet Identity\" \r\n        />\r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('connect') }>\r\n        <ListItemIcon>\r\n          <UsbIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary=\"Connect Hardware Wallet\" \r\n          secondary=\"I want to import a wallet from my Ledger or Trezor device\" \r\n        />\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport UsbIcon from '@material-ui/icons/Usb';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\n\r\nconst tips = [\r\n  \"When accessing this wallet, always type the URL into the browser address bar yourself or use a bookmark that you yourself created. Never trust links posted on social media, in search results, sent in emails or listed on other websites.\",\r\n  \"If your browser gives you any sort of security warning about this web wallet, get in touch with us and report it. Do not ignore the warning nor enter your mnemonic secret!\",\r\n  \"Only use your own devices when accessing your accounts. Do not enter your mnemonic secret on untrustworthy devices (public computers, friends computers/phones, etc) as they might be littered with malware and keyloggers.\",\r\n  \"Always keep your operating system, anti-virus software and browser up to date with latest security updates.\",\r\n  \"If possible, prefer hardware wallets over mnemonic secret for storing larger amounts of RISE.\",\r\n];\r\nvar type = '';\r\nexport default function WalletDialog(props) {\r\n  const [route, setRoute] = React.useState(props.initialRoute);\r\n  const [newMnemonic, setNewMnemonic] = React.useState('');\r\n  const [mnemonic, setMnemonic] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [password2, setPassword2] = React.useState('');\r\n  const [address, setAddress] = React.useState('');\r\n  const [tipsIndex, setTipsIndex] = React.useState(1);\r\n  React.useEffect(() => {\r\n    setRoute(props.initialRoute);\r\n  }, [props.initialRoute]);\r\n  \r\n  const cancel = () => {\r\n    type = '';\r\n    setTipsIndex(1);\r\n    setRoute(\"\");\r\n    setNewMnemonic(\"\");\r\n    setMnemonic(\"\");\r\n    setPassword(\"\");\r\n    setPassword2(\"\");\r\n    setAddress(\"\");\r\n    props.cancel();\r\n  }\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const showNewMnemonic = () => {\r\n    setTipsIndex(1);\r\n    setRoute(\"newMnemonic\");\r\n    type = 'create';\r\n    setNewMnemonic(StoicIdentity.generateMnemonic());\r\n  }\r\n  const showRecoverMnemonic = () => {\r\n    setRoute(\"confirmMnemonic\");\r\n    type = 'import';\r\n  }  \r\n  const showAddress = () => {\r\n    setRoute(\"address\");\r\n    type = 'watch';\r\n  }\r\n  \r\n  const confirmAddress = () => {\r\n    if (!StoicIdentity.validatePrincipal(address)) return error(\"Please enter a valid principal\");\r\n    submit();\r\n  }\r\n  const confirmMnemonic = () => {\r\n    if (!StoicIdentity.validateMnemonic(mnemonic)) return error(\"The mnemonic you entered is not valid\"); //show error\r\n    if (type == 'create' && mnemonic !== newMnemonic) return error(\"The mnemonic you entered does not match the one displayed\"); //show error\r\n    setRoute(\"passwords\");\r\n  };\r\n  const confirmPasswords = () => {\r\n    if (password !== password2) return error(\"Your passwords do not match\");\r\n    if (!StoicIdentity.validatePassword(password)) return error(\"Password is invalid, please try again\");\r\n    submit();\r\n  }\r\n  const submit = () => {\r\n    var od = {}, t = '';\r\n    switch(type) {\r\n      case \"create\":\r\n      case \"import\":\r\n        t = 'private';\r\n        od.mnemonic = mnemonic;\r\n        od.password = password;\r\n      break;\r\n      case \"watch\":\r\n        t = 'watch';\r\n        od.principal = address;\r\n      break;\r\n    };\r\n    props.submit(t,od);\r\n    //Clear\r\n    type = '';\r\n    setTipsIndex(1);\r\n    setRoute(\"\");\r\n    setNewMnemonic(\"\");\r\n    setMnemonic(\"\");\r\n    setPassword(\"\");\r\n    setPassword2(\"\");\r\n    setAddress(\"\");\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      { route == 'tips' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Security Tips</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Things to keep in mind to increase the security of your funds:</strong></p>\r\n            <ul>\r\n            {tips.map( (t,i) => {\r\n              if (i >= tipsIndex) return \"\";\r\n              return(<li key={i}>{t}</li>)\r\n            })}\r\n            </ul>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            {tipsIndex < tips.length ?\r\n            <Button onClick={() => setTipsIndex(tipsIndex+1)} color=\"primary\">Next Tip</Button>\r\n            :\r\n            <Button onClick={showNewMnemonic} color=\"primary\">Continue</Button> }\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route == 'import' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Select Import Type</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={showRecoverMnemonic}>\r\n                <ListItemIcon>\r\n                  <VpnKeyIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Import using a seed phrase\" \r\n                  secondary=\"Enter your mnemonic seed to recover full access to your wallet\" \r\n                />\r\n                \r\n              </ListItem>\r\n              <ListItem button onClick={showAddress}>\r\n                <ListItemIcon>\r\n                  <VisibilityIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Read only account\" \r\n                  secondary=\"Enter the address of a wallet you would like to add, but not spend from\"\r\n                />\r\n              </ListItem>\r\n            </List>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route == 'newMnemonic' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Write down your seed phrase</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>This is your 12 word seed phrase:</strong></p>\r\n            <div style={{textAlign:'center'}}>\r\n              {newMnemonic.split(\" \").map((w, i) => {\r\n                return (<span key={i} style={{fontSize:'large', display:'inline-block', padding:'5px 15px'}}>{w}{i < 11 ? <>&nbsp;</> : \"\"}</span>);\r\n              })}\r\n            </div>\r\n            <p>Write your mnemonic down on a physical piece of paper and store it somewhere safe and private. Anyone who knows this can transfer funds out of your account.</p>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={() =>  setRoute(\"confirmMnemonic\")} color=\"primary\">Continue</Button>\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route == 'confirmMnemonic' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Confirm your mnemonic seed</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Please confirm your 12 word seed phrase:</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Confirm Mnemonic Seed\"\r\n              multiline\r\n              fullWidth\r\n              value={mnemonic}\r\n              rows={2}\r\n              onChange={(e) => setMnemonic(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmMnemonic} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route == 'address' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Enter the Principal to watch</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Please enter a valid Principal (e.g. 4opr7-aaepd-uw2ok...)</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Principal\"\r\n              fullWidth\r\n              value={address}\r\n              required\r\n              onChange={(e) => setAddress(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmAddress} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route == 'passwords' ?\r\n      <>\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Enter a password</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>This password is used to further encrypt your private data on your device.</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Enter Password\"\r\n              fullWidth\r\n              required\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              style={{marginBottom: 20}}\r\n            />\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Confirm Password\"\r\n              fullWidth\r\n              required\r\n              type=\"password\"\r\n              value={password2}\r\n              onChange={(e) => setPassword2(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmPasswords} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      \r\n    </>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport ConnectList from '../components/ConnectList';\r\nimport WalletDialog from '../components/WalletDialog';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nfunction Connect(props) {\r\n  const [open, setOpen] = React.useState(true);\r\n  const [initialRoute, setInitialRoute] = React.useState('');\r\n  const dispatch = useDispatch()\r\n  const submit = (type, optdata) => {\r\n    props.loader(true);\r\n    StoicIdentity.setup(type, optdata).then(identity => {\r\n      dispatch({ type: 'createwallet', payload : {identity : identity}});\r\n      props.loader(false);\r\n      setOpen(true)\r\n      props.login();\r\n    }).catch(e => {\r\n      props.loader(false);\r\n      setOpen(true)\r\n    }).finally(() => {\r\n      setOpen(true)\r\n      props.loader(false)\r\n    });\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const cancel = (t) => {\r\n    setInitialRoute('');\r\n    setOpen(true);\r\n  };\r\n  const handleClick = (t) => {\r\n    setOpen(false);\r\n    switch(t) {\r\n      case \"create\":\r\n        setInitialRoute('tips');\r\n      break;\r\n      case \"import\":\r\n        setInitialRoute('import');\r\n      break;\r\n      case \"link\":\r\n        props.loader(true);\r\n        StoicIdentity.setup(\"ii\").then(identity => {\r\n          dispatch({ type: 'createwallet', payload : {identity : identity}});\r\n          props.loader(false);\r\n          setOpen(true)\r\n          props.login();\r\n        }).catch(e => {\r\n          props.loader(false);\r\n          setOpen(true)\r\n        }).finally(() => {\r\n          setOpen(true)\r\n          props.loader(false)\r\n        });\r\n      break;\r\n      case \"connect\":\r\n        //Show error\r\n        error(\"Hardware wallet support is coming soon!\")\r\n        setOpen(true)\r\n      break;\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Stoic Wallet</DialogTitle>\r\n        <DialogContent>\r\n          <ConnectList handler={handleClick} />\r\n        </DialogContent>\r\n      </Dialog>\r\n      <WalletDialog alert={props.alert} initialRoute={initialRoute} cancel={cancel} submit={submit} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Connect;\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nfunction Unlock(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}))\r\n  const [open, setOpen] = React.useState(true);\r\n  const [password, setPassword] = React.useState('');\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const clear = () => {\r\n    props.confirm(\"Please confirm\", \"You are about to clear your wallet, which will remove all data from this device. Are you sure you want to continue?\").then(v => {\r\n      if (v) props.remove();\r\n    });\r\n  };\r\n  const loginPassword = () => {\r\n    if (!StoicIdentity.validatePassword(password)) return error(\"Password is invalid, please try again\");\r\n    props.loader(true);\r\n    setOpen(false);\r\n    \r\n    StoicIdentity.unlock(identity, {password : password}).then(r => {\r\n      props.login();\r\n    }).catch(e => {\r\n      setPassword('');\r\n      return error(\"You entered an incorrect password\");\r\n    }).finally(() => {\r\n      setOpen(true)\r\n      props.loader(false)\r\n    });\r\n  }\r\n  const iiLogin = () => {\r\n    props.loader(true);\r\n    setOpen(false);\r\n    \r\n    StoicIdentity.unlock(identity).then(r => {\r\n      props.login();\r\n    }).catch(e => {\r\n      console.log(e);\r\n    }).finally(() => {\r\n      setOpen(true)\r\n      props.loader(false)\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n    {identity.type == 'ii' ?\r\n      <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n        <DialogContent>\r\n          <List component=\"nav\" aria-label=\"secondary add principal\">\r\n            <ListItem button onClick={iiLogin}>\r\n              <ListItemIcon>\r\n                <AllInclusiveIcon />\r\n              </ListItemIcon>\r\n              <ListItemText \r\n                primary=\"Re-authenticate\" \r\n                secondary=\"We need to authenticate your Internet Identity\" \r\n              />\r\n            </ListItem>\r\n          </List> \r\n            \r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n        </DialogActions>\r\n      </Dialog>: \"\"}\r\n      {identity.type == 'private' ?\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Enter your password to unlock your wallet.</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Enter Password\"\r\n              fullWidth\r\n              required\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n            <Button onClick={loginPassword} color=\"primary\">Unlock</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      : \"\"}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Unlock;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog(props) {\r\n  const handleClick = () => {\r\n    if (typeof props.handler != 'undefined') props.handler();\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={props.open}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">{props.message}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n      <Button onClick={handleClick} color=\"primary\">\r\n        {props.buttonLabel ?? \"OK\" }\r\n      </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function ConfirmDialog(props) {\r\n  const handleClick = (t) => {\r\n    if (typeof props.handler != 'undefined') props.handler(t);\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={props.open}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">{props.message}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n      <Button onClick={() => handleClick(false)} color=\"primary\">\r\n        {props.buttonCancel ?? \"Cancel\" }\r\n      </Button>\r\n      <Button onClick={() => handleClick(true)} color=\"primary\">\r\n        {props.buttonConfirm ?? \"Confirm\" }\r\n      </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Wallet from './containers/Wallet';\r\nimport Connect from './containers/Connect';\r\nimport Unlock from './containers/Unlock';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {StoicIdentity} from './ic/identity.js';\r\nimport AlertDialog from './components/AlertDialog';\r\nimport ConfirmDialog from './components/ConfirmDialog';\r\nimport NeuronManager from './ic/neuron.js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\nconst emptyAlert = {\r\n  title : \"\",\r\n  message : \"\",\r\n};\r\nexport default function App() {\r\n  const classes = useStyles();\r\n  const [loaderOpen, setLoaderOpen] = React.useState(false);\r\n  const [appState, setAppState] = React.useState(0); //0 = nologin, 1 = locked, 2 = unlocked\r\n  const principals = useSelector(state => state.principals)\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const dispatch = useDispatch()\r\n  const [alertData, setAlertData] = React.useState(emptyAlert); \r\n  const [confirmData, setConfirmData] = React.useState(emptyAlert); \r\n  const [showAlert, setShowAlert] = React.useState(false);\r\n  const [showConfirm, setShowConfirm] = React.useState(false);\r\n  \r\n  const remove = () => {\r\n    loader(true);\r\n    StoicIdentity.clear(principals[currentPrincipal].identity).then(r => {\r\n      setAppState(0);\r\n      loader(false);\r\n      setTimeout(() => {\r\n        dispatch({ type: 'removewallet'})\r\n      }, 1000);//hack in timeout to clear views...\r\n    })\r\n  };\r\n  const login = () => {\r\n    if (principals.length === 0) {\r\n      setAppState(0);\r\n    } else {\r\n      StoicIdentity.load(principals[currentPrincipal].identity).then(i => {\r\n        setAppState(2);\r\n      }).catch(e => {\r\n        setAppState(1);\r\n      });\r\n    }    \r\n  };\r\n  const logout = () => {\r\n    loader(true);\r\n    StoicIdentity.lock(principals[currentPrincipal].identity).then(r => {\r\n      setAppState(1);\r\n      login();\r\n    }).finally(() => {\r\n      loader(false);\r\n    });\r\n  };\r\n  \r\n  const alert = (title, message, buttonLabel) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      setAlertData({\r\n        title : title,\r\n        message : message,\r\n        buttonLabel : buttonLabel,\r\n        handler :  () => {\r\n          setShowAlert(false);\r\n          resolve(true);\r\n          setTimeout(() => setAlertData(emptyAlert), 100);\r\n        },\r\n      });\r\n      setShowAlert(true);\r\n    })\r\n  };\r\n  \r\n  const confirm = (title, message, buttonCancel, buttonConfirm) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      setConfirmData({\r\n        title : title,\r\n        message : message,\r\n        buttonCancel : buttonCancel,\r\n        buttonConfirm : buttonConfirm,\r\n        handler : (v) => {\r\n          setShowConfirm(false);\r\n          resolve(v);\r\n          setTimeout(() => setConfirmData(emptyAlert), 100);\r\n        },\r\n      });\r\n      setShowConfirm(true);\r\n    })\r\n  };\r\n  \r\n  React.useEffect(() => {\r\n    login();\r\n  }, []);\r\n  React.useEffect(() => {\r\n    login();\r\n  }, [currentPrincipal, principals]);\r\n  \r\n  const loader = (l) => {\r\n    setLoaderOpen(l);\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      {appState === 0 ?\r\n      <Connect alert={alert} confirm={confirm} login={login} loader={loader} /> :\r\n      (appState === 1 ?\r\n      <Unlock alert={alert} confirm={confirm} login={login} remove={remove} loader={loader} /> :\r\n      <Wallet alert={alert} confirm={confirm} logout={logout} remove={remove} loader={loader} /> )}\r\n      <Backdrop className={classes.backdrop} open={loaderOpen} onClick={() => loader(false)}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <AlertDialog open={showAlert} title={alertData.title} message={alertData.message} buttonLabel={alertData.buttonLabel} handler={alertData.handler} />\r\n      <ConfirmDialog open={showConfirm} title={confirmData.title} message={confirmData.message} buttonCancel={confirmData.buttonCancel} buttonConfirm={confirmData.buttonConfirm} handler={confirmData.handler} />\r\n    </>\r\n  );\r\n}","import { createStore } from \"redux\";\r\nimport {principalToAccountIdentifier} from './ic/utils.js';\r\n\r\nvar appData = {\r\n  principals : [],\r\n  addresses : [],\r\n  neurons : [],\r\n  currentPrincipal : 0,\r\n  currentAccount : 0,\r\n  currentToken : 0,\r\n};\r\nfunction initDb(){\r\n  var db = localStorage.getItem('_db');\r\n  if (db){\r\n    db = JSON.parse(db);\r\n    \r\n    //db versioning\r\n    var savenow = false;\r\n    if (!Array.isArray(db)) {\r\n      db = [[db],[],[0,0,0]];\r\n      console.log(\"Converting old DB to new\");\r\n      savenow = true;\r\n    }\r\n    if (db.length == 2) {\r\n      db[2] = [0,0,0];\r\n      db[3] = [];\r\n      savenow = true;\r\n    }\r\n    if (db.length == 3) {\r\n      db[3] = [];\r\n      savenow = true;\r\n    }\r\n    \r\n    appData.currentPrincipal = db[2][0];\r\n    appData.currentAccount = db[2][1];\r\n    appData.currentToken = db[2][2];\r\n    appData.addresses = db[1];\r\n    appData.neurons = db[3];\r\n    db[0].map(principal => {\r\n      var _principal = {\r\n        accounts : [],\r\n        identity : principal.identity\r\n      };\r\n      principal.accounts.map((account, subaccount) => {\r\n        //savenow = true;\r\n        //if (subaccount >= 2) return;\r\n        var tokens = [];\r\n        tokens.push({\r\n          id : \"ryjl3-tyaaa-aaaaa-aaaba-cai\",\r\n          name : \"Internet Computer\",\r\n          symbol : \"ICP\",\r\n          decimals : 8,\r\n          type : 'fungible',\r\n        });\r\n        \r\n        var address = principalToAccountIdentifier(principal.identity.principal, subaccount);\r\n        account[1].map(token => {\r\n          tokens.push(token);\r\n          return true;\r\n        });\r\n        _principal.accounts.push({\r\n          name : account[0],\r\n          address : address,\r\n          tokens : tokens\r\n        });\r\n      });\r\n      appData.principals.push(_principal);\r\n    });\r\n    if (savenow) saveDb(appData);\r\n    return appData;\r\n  }\r\n}\r\nfunction newDb(identity){\r\n  var tc = [[\r\n    {\r\n      accounts : [\r\n        [\"Main\", \r\n          []\r\n        ]\r\n      ],\r\n      identity : identity\r\n    }\r\n  ],[],[0,0,0],[]];\r\n  localStorage.setItem('_db', JSON.stringify(tc));\r\n  return initDb();\r\n}\r\nfunction clearDb(){\r\n  localStorage.removeItem('_db');\r\n  var clearState = {\r\n    principals : [],\r\n    addresses : [],\r\n    neurons : [],\r\n    currentPrincipal : 0,\r\n    currentAccount : 0,\r\n    currentToken : 0,\r\n  };\r\n  appData = clearState;\r\n  return clearState;\r\n}\r\nfunction saveDb(newState){\r\n  var updatedDb = [[], newState.addresses,[newState.currentPrincipal, newState.currentAccount, newState.currentToken], newState.neurons];\r\n  \r\n  newState.principals.map(principal => {\r\n    var _p = {\r\n      accounts : [],\r\n      identity : principal.identity\r\n    };\r\n    principal.accounts.map(account => {\r\n      var _a = [account.name, []];\r\n      account.tokens.map((b, i) => {\r\n      if (i === 0) return false;\r\n        _a[1].push({\r\n          id : b.id,\r\n          name : b.name,\r\n          symbol : b.symbol,\r\n          decimals : b.decimals,\r\n        });\r\n        return true;      \r\n      });\r\n      _p.accounts.push(_a);\r\n    });\r\n    updatedDb[0].push(_p);\r\n  });\r\n  localStorage.setItem('_db', JSON.stringify(updatedDb));\r\n  appData = newState;\r\n  return newState;\r\n}\r\n\r\ninitDb();\r\nfunction rootReducer(state = appData, action) {\r\n  switch(action.type){\r\n    case \"neuron/add\": //TODO\r\n    break;\r\n    case \"neuron/update\": //TODO\r\n    break;\r\n    case \"removewallet\":\r\n      return clearDb();\r\n    break;\r\n    case \"createwallet\":\r\n      return newDb(action.payload.identity);\r\n    break;\r\n    case \"currentPrincipal\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : 0,\r\n        currentAccount : 0,\r\n        currentPrincipal : action.payload.index\r\n      });\r\n    break;\r\n    case \"currentAccount\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : 0,\r\n        currentAccount : action.payload.index\r\n      });\r\n    break;\r\n    case \"currentToken\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : action.payload.index\r\n      });\r\n    break;\r\n    case \"principal/add\": //TODO\r\n    break;\r\n    case \"account/edit\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i == state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii == state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    name : action.payload.name\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    break;\r\n    case \"account/add\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i == state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : [...principal.accounts, {\r\n                name : \"Account \" + action.payload.id,\r\n                address : principalToAccountIdentifier(action.payload.principal, action.payload.id),\r\n                tokens : [{\r\n                  name : \"Internet Computer\",\r\n                  symbol : \"ICP\",\r\n                  decimals : 8,\r\n                }]\r\n              }]\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    break;\r\n    case \"account/token/add\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i == state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii == state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    tokens : [...account.tokens, action.payload.metadata]\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    break;\r\n    case \"addresses/add\":\r\n      return saveDb({\r\n        ...state,\r\n        addresses: [...state.addresses, action.payload]\r\n      });\r\n    break;\r\n    case \"addresses/edit\": \r\n      return saveDb({\r\n        ...state,\r\n        addresses:  state.addresses.map((address,i) => {\r\n          if (i == action.payload.index) {\r\n            return {\r\n              name : action.payload.name,\r\n              address : action.payload.address,\r\n            }\r\n          } else {\r\n            return address;\r\n          }\r\n        })\r\n      });\r\n    break;\r\n    case \"addresses/delete\":\r\n      return saveDb({\r\n        ...state,\r\n        addresses : state.addresses.filter((e,i) => i !== action.payload)\r\n      });\r\n    break;\r\n  }\r\n  return state;\r\n};\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;","import { red } from '@material-ui/core/colors';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n// A custom theme for this app\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#003240',\r\n    },\r\n    secondary: {\r\n      main: '#00b894',\r\n    },\r\n    error: {\r\n      main: red.A400,\r\n    },\r\n    background: {\r\n      default: '#fafafa',\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiIconButton: {\r\n      label : {\r\n        color : \"#00b894\"\r\n      }\r\n    },\r\n    MuiAvatar: {\r\n      colorDefault: {\r\n        backgroundColor : '#00b894',\r\n        color : 'white'\r\n      },\r\n    },\r\n    MuiListItemIcon: {\r\n      root: {\r\n        color : '#00b894'\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\nimport theme from './theme';\r\nimport '@fontsource/roboto';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <App />\r\n    </ThemeProvider>\r\n  </Provider>,\r\n  document.querySelector('#root'),\r\n);","/* global BigInt */\r\nimport { Actor, HttpAgent, Principal, AnonymousIdentity } from \"@dfinity/agent\";  \r\nimport { AuthClient } from \"@dfinity/auth-client\";\r\nimport { principalToAccountIdentifier, toHexString, from32bits, to32bits, isHex, getSubAccountArray, fromHexString } from \"./utils.js\";\r\nimport RosettaApi from './RosettaApi.js';\r\n\r\nimport ledgerIDL from './candid/ledger.did.js';\r\nimport hzldIDL from './candid/hzld.did.js'; //hardcode to hzld...\r\nimport extIDL from './candid/ext.did.js';\r\nimport governanceIDL from './candid/governance.did.js';\r\n\r\nconst LEDGER_CANISTER_ID = \"ryjl3-tyaaa-aaaaa-aaaba-cai\";\r\nconst CYCLES_MINTING_CANISTER_ID = \"rkp4c-7iaaa-aaaaa-aaaca-cai\";\r\n\r\nconst rosettaApi = new RosettaApi();\r\nconst constructUser = (u) => {\r\n  if (isHex(u) && u.length == 64) {\r\n    return { 'address' : u };\r\n  } else {\r\n    return { 'principal' : Principal.fromText(u) };\r\n  };\r\n};\r\nconst tokenIdentifier = (principal, index) => {\r\n  const padding = Buffer(\"\\x0Atid\");\r\n  const array = new Uint8Array([\r\n      ...padding,\r\n      ...Principal.fromText(principal).toBlob(),\r\n      ...to32bits(index),\r\n  ]);\r\n  return Principal.fromBlob(array).toText();\r\n};\r\nconst decodeTokenId = (tid) => {\r\n  var p = [...Principal.fromText(tid).toBlob()];\r\n  var padding = p.splice(0, 4);\r\n  if (toHexString(padding) != toHexString(Buffer(\"\\x0Atid\"))) {\r\n    return {\r\n      index : 0,\r\n      canister : tid,\r\n      token : tokenIdentifier(tid, 0)\r\n    };\r\n  } else {\r\n    return {\r\n      index : from32bits(p.splice(-4)), \r\n      canister : Principal.fromBlob(p).toText(),\r\n      token : tid\r\n    };\r\n  }\r\n};\r\n\r\nconst getCyclesTopupAddress = (canisterId) => {\r\n  return principalToAccountIdentifier(CYCLES_MINTING_CANISTER_ID, getCyclesTopupSubAccount(canisterId));\r\n}\r\nconst getCyclesTopupSubAccount = (canisterId) => {\r\n  var pb = Array.from(Principal.fromText(canisterId).toBlob());\r\n  return [pb.length, ...pb];\r\n}\r\nconst amountToBigInt = (amount, decimals) => {\r\n  //decimals = decimals ?? 8;\r\n  if (amount < 1) {\r\n    amount = BigInt(amount*(10**decimals));\r\n  } else {\r\n    amount = BigInt(amount)*BigInt(10**decimals)\r\n  }\r\n  return amount;\r\n}\r\n\r\n//Preload IDLS against a common name\r\nconst _preloadedIdls = {\r\n  'governance' : governanceIDL,\r\n  'ledger' : ledgerIDL,\r\n  'hzld' : hzldIDL,\r\n  'ext' : extIDL,\r\n  'default' : extIDL,\r\n};\r\n\r\nclass ExtConnection {\r\n  //map known canisters to preloaded IDLs\r\n  _mapIdls = {\r\n    \"ryjl3-tyaaa-aaaaa-aaaba-cai\" : _preloadedIdls['ledger'],\r\n    \"qz7gu-giaaa-aaaaf-qaaka-cai\" : _preloadedIdls['hzld'],\r\n    \"rrkah-fqaaa-aaaaa-aaaaq-cai\" : _preloadedIdls['governance'],\r\n  };\r\n  _metadata = {\r\n    LEDGER_CANISTER_ID : {\r\n      name : \"ICP\",\r\n      symbol : \"ICP\",\r\n      decimals : 8,\r\n    }\r\n  };\r\n  _identity = false;//new AnonymousIdentity();\r\n  _host = false;\r\n  _agent = false;\r\n  _canisters = {};\r\n  \r\n  constructor(host, identity) {\r\n    if (identity) this._identity = identity;\r\n    if (host) this._host = host;\r\n    this._makeAgent();\r\n  }\r\n  idl(canister, idl) {\r\n    //Map a canister to a preloaded idl\r\n    this._mapIdls[canister] = idl;\r\n  };\r\n  setIdentity(identity) {\r\n    if (identity) this._identity = identity;\r\n    else this._identity = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  setHost(host) {\r\n    if (host) this._host = host;\r\n    else this._host = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  canister(cid, idl) {\r\n    if (!idl){\r\n      if (this._mapIdls.hasOwnProperty(cid)) {\r\n        idl = this._mapIdls[cid];\r\n      } else {\r\n        //Resort to default IDLS\r\n        //todo: Look into loading IDLs on the fly\r\n        idl = _preloadedIdls['default'];\r\n      }\r\n    } else if (typeof idl == 'string') {\r\n      if (_preloadedIdls.hasOwnProperty(idl)) {\r\n        idl = _preloadedIdls[idl];\r\n      } else {\r\n        throw idl + \" is not a preloaded IDL\";\r\n        return false;\r\n      }\r\n    }\r\n    if (!this._canisters.hasOwnProperty(cid)){\r\n      this._canisters[cid] = Actor.createActor(idl, {agent : this._agent, canisterId : cid});\r\n    }\r\n    return this._canisters[cid];\r\n  }\r\n  token(tid, idl) {\r\n    if (!tid) tid = LEDGER_CANISTER_ID;//defaults to ledger\r\n    var tokenObj = decodeTokenId(tid);\r\n    if (!idl) {\r\n      if (this._mapIdls.hasOwnProperty(tokenObj.canister)) idl = this._mapIdls[tokenObj.canister];\r\n      else idl = _preloadedIdls['ext']; //ext is our token default...\r\n    }\r\n    var api = this.canister(tokenObj.canister, idl);\r\n    return {\r\n      call : api,\r\n      fee : () => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              resolve(10000);\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              resolve(1);\r\n            break;\r\n            default:\r\n              //TODO compute fees\r\n              resolve(0);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      getMetadata : () => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              resolve({\r\n                name : \"Internet Computer\",\r\n                symbol : \"ICP\",\r\n                type : 'fungible',\r\n                decimals : 8\r\n              });\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              resolve({\r\n                name : \"HZLD\",\r\n                symbol : \"HZLD\",\r\n                decimals : 0,\r\n                type : 'fungible',\r\n              });\r\n            break;\r\n            default:\r\n              api.metadata(tokenObj.token).then(r => {\r\n                if (typeof r.ok != 'undefined') {\r\n                  if (typeof r.ok.fungible != 'undefined') {\r\n                    resolve({\r\n                      name : r.ok.fungible.name,\r\n                      symbol : r.ok.fungible.symbol,\r\n                      decimals : r.ok.fungible.decimals,\r\n                      metadata : r.ok.fungible.metadata,\r\n                      type : 'fungible'\r\n                    });\r\n                  } else {\r\n                    resolve({\r\n                      metadata : r.ok.nonfungible.metadata,\r\n                      type : 'nonfungible'\r\n                    });\r\n                  }\r\n                } else if (typeof r.err != 'undefined') reject(r.err)\r\n                else reject(r);\r\n              }).catch(reject);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      getBalance : (address, princpal) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              rosettaApi.getAccountBalance(address).then(b => {       \r\n                resolve(b)\r\n              });\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              var args = {\r\n                \"user\" : Principal.fromText(princpal)\r\n              };\r\n              api.getBalanceInsecure(args).then(b => {\r\n                var bal = b.length == 0 ? 0 : b[0];\r\n                resolve(bal);\r\n              }).catch(reject);\r\n            break;\r\n            default:\r\n              var args = {\r\n                \"user\" : constructUser(address),\r\n                'token' : tokenObj.token\r\n              };\r\n              api.balance(args).then(r => {\r\n                if (typeof r.ok != 'undefined') resolve(r.ok)\r\n                else if (typeof r.err != 'undefined') reject(r.err)\r\n                else reject(r);\r\n              }).catch(reject);            \r\n            break;\r\n          }\r\n        });\r\n      },\r\n      getTransactions : (address, princpal) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              rosettaApi.getTransactionsByAccount(address).then(ts => {    \r\n                if (!Array.isArray(ts)) resolve([]);\r\n                var _ts = [];\r\n                ts.map(_t => {\r\n                  if (_t.type != \"TRANSACTION\") return;\r\n                  if (_t.status != \"COMPLETED\") return;\r\n                  _ts.push({\r\n                    from : _t.account1Address,\r\n                    to :  _t.account2Address,\r\n                    amount : Number(_t.amount)/(10**8),\r\n                    fee : Number(_t.fee)/(10**8),\r\n                    hash : _t.hash,\r\n                    timestamp : _t.timestamp,\r\n                    memo : Number(_t.memo),\r\n                  });\r\n                });\r\n                resolve(_ts);\r\n              }).catch(reject);\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n            default:\r\n              resolve([]);         \r\n            break;\r\n          }\r\n        });\r\n      },\r\n      /*\r\n        from_principal = principal of account as text\r\n        from_sa = subaccount (to produce hex address). null/0 default as number\r\n        to_user = valid User (address or principal) as text\r\n        amount = valid amount as BigInt\r\n        fee = valid fee as BigInt\r\n        memo = data to be sent as text/hex/number\r\n        notify = if we need to notify TODO\r\n      */\r\n      transfer : (from_principal, from_sa, to_user, amount, fee, memo, notify) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              var args = {\r\n                \"from_subaccount\" : [getSubAccountArray(from_sa ?? 0)], \r\n                \"to\" : to_user, //Should be an address\r\n                \"amount\" : { \"e8s\" : amount },\r\n                \"fee\" : { \"e8s\" : fee }, \r\n                \"memo\" : memo ? Number(BigInt(memo)) : 0, \r\n                \"created_at_time\" : []\r\n              };\r\n              api.send_dfx(args).then(bh => {\r\n                resolve(true);\r\n              }).catch(reject);\r\n              //Notify here\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              var args = {\r\n                \"to\" : Principal.fromText(to_user), \r\n                \"metadata\" : [],\r\n                \"from\" : Principal.fromText(from_principal),\r\n                \"amount\" : amount\r\n              };\r\n              api.transfer(args).then(b => {\r\n                if (typeof b.ok != 'undefined') {          \r\n                  resolve(true);\r\n                } else {\r\n                  reject(JSON.stringify(b.err));\r\n                }\r\n              }).catch(reject);\r\n            break;\r\n            default:\r\n              var args = {\r\n                'token' : tid,\r\n                'from' : { 'address' : principalToAccountIdentifier(from_principal, from_sa ?? 0) },\r\n                'subaccount' : [getSubAccountArray(from_sa ?? 0)],\r\n                'to' : constructUser(to_user),\r\n                'amount' : amount,\r\n                'fee' : fee,\r\n                'memo' : fromHexString(memo),\r\n                'notify' : notify\r\n              };\r\n              api.transfer(args).then(b => {\r\n                if (typeof b.ok != 'undefined') {\r\n                  resolve(true);\r\n                } else {\r\n                  reject(JSON.stringify(b.err));\r\n                }\r\n              }).catch(reject);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      mintCycles : (from_principal, from_sa, canister, amount, fee) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              var _to_sub = getCyclesTopupSubAccount(canister);\r\n              var _to = principalToAccountIdentifier(CYCLES_MINTING_CANISTER_ID, _to_sub);\r\n              var args = {\r\n                \"from_subaccount\" : [getSubAccountArray(from_sa ?? 0)], \r\n                \"to\" : _to, \r\n                \"fee\" : { \"e8s\" : amountToBigInt(fee, 8) }, \r\n                \"memo\" : Number(BigInt(\"0x50555054\")), \r\n                \"created_at_time\" : [], \r\n                \"amount\" : { \"e8s\" : amountToBigInt(amount, 8) }\r\n              };\r\n              api.send_dfx(args).then(block => {\r\n                var args = {\r\n                  \"block_height\" : block,\r\n                  \"max_fee\": {e8s: amountToBigInt(fee, 8)},\r\n                  \"from_subaccount\": [getSubAccountArray(from_sa ?? 0)],\r\n                  \"to_subaccount\": [getSubAccountArray(_to_sub)],\r\n                  \"to_canister\": Principal.fromText(CYCLES_MINTING_CANISTER_ID)\r\n                };\r\n                api.notify_dfx(args).then(resolve).catch(reject);\r\n              }).catch(reject);\r\n            break;\r\n            case \"5ymop-yyaaa-aaaah-qaa4q-cai\"://WTC\r\n            break;\r\n            default:\r\n              reject(\"Cycle topup is not supported by this token\");\r\n            break;\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n  _makeAgent() {\r\n    var args = {};\r\n    if (this._identity) args['identity'] = this._identity;\r\n    if (this._host) args['host'] = this._host;\r\n    this._agent = new HttpAgent(args);\r\n  };\r\n};\r\n\r\nconst extjs = {\r\n  connect : (identity, host) => new ExtConnection(identity, host)\r\n};\r\nexport default extjs;\r\n\r\n\r\n"],"sourceRoot":""}