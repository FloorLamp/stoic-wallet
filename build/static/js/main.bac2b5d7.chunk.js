(this["webpackJsonpstoic-wallet"]=this["webpackJsonpstoic-wallet"]||[]).push([[0],{187:function(e,t,n){"use strict";t.a=function(e){var t=e.IDL,n=t.Text,a=t.Text,r=t.Variant({principal:t.Principal,address:a}),c=t.Record({token:n,user:r}),i=t.Nat,o=t.Variant({InvalidToken:n,Other:t.Text}),s=t.Variant({ok:i,err:o}),l=i,u=t.Text,d=n,b=t.Variant({fungible:t.Record({decimals:t.Nat8,metadata:t.Opt(t.Vec(t.Nat8)),name:t.Text,symbol:t.Text}),nonfungible:t.Record({metadata:t.Opt(t.Vec(t.Nat8))})}),j=o,p=t.Variant({ok:b,err:j}),h=t.Variant({ok:l,err:j}),f=t.Vec(t.Nat8),m=t.Vec(t.Nat8),O=t.Record({to:r,fee:i,token:n,notify:t.Bool,from:r,memo:f,subaccount:t.Opt(m),amount:i}),x=t.Variant({ok:i,err:t.Variant({CannotNotify:a,InsufficientBalance:t.Null,InvalidToken:n,Rejected:t.Null,Unauthorized:a,Other:t.Text})});return t.Service({balance:t.Func([c],[s],["query"]),balance_secure:t.Func([c],[s],[]),extensions:t.Func([],[t.Vec(u)],["query"]),extensions_secure:t.Func([],[t.Vec(u)],[]),fee:t.Func([],[l],["query"]),metadata:t.Func([d],[p],["query"]),metadata_secure:t.Func([d],[p],[]),supply:t.Func([d],[h],["query"]),supply_secure:t.Func([d],[h],[]),transfer:t.Func([O],[x],[])})}},25:function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return y})),n.d(t,"a",(function(){return l})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return v}));var a=n(17),r=n(14),c=n(49),i=n(146),o=n(147),s=n(335),l=n(429),u=n(127),d=function(t,n){var c=e("\naccount-id"),s=new Uint8Array([].concat(Object(a.a)(c),Object(a.a)(r.d.fromText(t).toBlob()),Object(a.a)(b(n)))),l=Object(o.a)(s),u=p(Object(i.a)(l)),d=new Uint8Array([].concat(Object(a.a)(u),Object(a.a)(l)));return h(d)},b=function(e){return Array.isArray(e)?e.concat(Array(32-e.length).fill(0)):Array(28).fill(0).concat(p(e||0))},j=function(e){for(var t,n=0;n<4;n++)t=t<<8|e[n];return t},p=function(e){var t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e),Array.from(new Uint8Array(t))},h=function(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("")},f=function(e){"0x"==e.substr(0,2)&&(e=e.substr(2));for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},m=function(e){var t=l.mnemonicToSeedSync(e);return t=(t=Array.from(t)).splice(0,32),t=new Uint8Array(t),c.d.generate(t)},O=function(e,t,n){return new Promise((function(a,r){u.pbkdf2(n,t,3e4,512,"sha512",(function(t,n){if(t)return r(t);a(s.encrypt(n.toString(),btoa(e)))}))}))},x=function(e,t,n){return new Promise((function(a,r){u.pbkdf2(n,t,3e4,512,"sha512",(function(t,n){if(t)return r(t);try{a(atob(s.decrypt(n.toString(),e)))}catch(t){r(t)}}))}))},y=function(e){return/^[0-9a-fA-F]+$/.test(e)},g=function(e){return y(e)&&64==e.length},v=function(e){try{return e==r.d.fromText(e).toText()}catch(t){return!1}}}).call(this,n(5).Buffer)},276:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(3),r=n.n(a),c=n(10),i=n(13),o=n(12),s=n(18),l=n(19),u=n(287),d=n(86),b=n.n(d),j=n(47),p=n.n(j),h=n(277),f=n.n(h)()({strict:!0}),m=Object.freeze({NotFound:0,Timeout:1,NetworkError:2}),O=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,a){var r;switch(Object(o.a)(this,n),r=t.call(this,e),a){case 408:r.errorType=m.Timeout;break;case 500:r.errorType=m.NotFound;break;default:r.errorType=m.NetworkError}return r}return n}(Object(u.a)(Error)),x=function e(t,n){Object(o.a)(this,e),this.blockIndex=n,this.hash=t.transaction_identifier.hash;var a=t.metadata.timestamp.div(1e6).toNumber();this.timestamp=new Date(a);var r=t.operations;r.length>=1?(this.type=r[0].type,this.status=r[0].status,this.account1Address=r[0].account.address,this.amount=new p.a(r[0].amount.value),"TRANSACTION"!==r[0].type&&"BURN"!==r[0].type||this.amount.isZero()||(this.amount=this.amount.negated())):(this.type="",this.status="",this.account1Address="",this.amount=new p.a(0)),r.length>=2&&"TRANSACTION"===r[1].type?this.account2Address=r[1].account.address:this.account2Address="",r.length>=3&&"FEE"===r[2].type?this.fee=new p.a(-r[2].amount.value):this.fee=new p.a(0),this.memo=new p.a(t.metadata.memo)},y=function(){function e(){Object(o.a)(this,e),this.axios=b.a.create({baseURL:"https://rosetta-api.internetcomputer.org/",method:"post",transformRequest:function(e){return f.stringify(e)},transformResponse:function(e){return f.parse(e)},headers:{"Content-Type":"application/json;charset=utf-8"}}),this.networkIdentifier=this.networksList().then((function(e){return e.network_identifiers.find((function(e){return"Internet Computer"===e.blockchain}))}))}return Object(i.a)(e,[{key:"getAccountBalance",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.accountBalanceByAddress(t);case 3:return n=e.sent,e.abrupt("return",new p.a(n.balances[0].value));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new O(e.t0.message,b.a.isAxiosError(e.t0)?null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status:void 0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLastBlockIndex",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.networkStatus();case 3:return t=e.sent,e.abrupt("return",t.current_block_identifier.index);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",new O(e.t0.message,b.a.isAxiosError(e.t0)?null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.status:void 0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.transactionsByHash(t);case 3:if(0!==(n=e.sent).transactions.length){e.next=6;break}return e.abrupt("return",new O("Transaction not found.",500));case 6:return e.abrupt("return",new x(n.transactions[0].transaction,n.transactions[0].block_identifier.index));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",new O(e.t0.message,b.a.isAxiosError(e.t0)?null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status:void 0));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactions",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c,i,o,s,l,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=5;break}c=n,e.next=9;break;case 5:return e.next=7,this.networkStatus();case 7:i=e.sent,c=i.current_block_identifier.index;case 9:a&&(c=Math.max(c-a,-1)),o=Math.min(t,c+1),s=[],l=0;case 13:if(!(l<o)){e.next=22;break}return e.t0=s,e.next=17,this.getTransactionByBlock(c-l);case 17:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 19:l++,e.next=13;break;case 22:return e.abrupt("return",s);case 25:return e.prev=25,e.t2=e.catch(0),e.abrupt("return",new O(e.t2.message,b.a.isAxiosError(e.t2)?null===e.t2||void 0===e.t2||null===(u=e.t2.response)||void 0===u?void 0:u.status:void 0));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getTransactionsByAccount",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.transactionsByAccount(t);case 3:return n=e.sent,e.next=6,Promise.all(n.transactions.map((function(e){return new x(e.transaction,e.block_identifier.index)})));case 6:return a=e.sent,e.abrupt("return",a.reverse());case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",new O(e.t0.message,b.a.isAxiosError(e.t0)?null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status:void 0));case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionByBlock",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.blockByIndex(t);case 2:return n=e.sent,e.abrupt("return",new x(n.block.transactions[0],t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.request({url:t,data:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"networksList",value:function(){return this.request("/network/list",{})}},{key:"networkStatus",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.networkIdentifier;case 2:return t=e.sent,e.abrupt("return",this.request("/network/status",{network_identifier:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountBalanceByAddress",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.networkIdentifier;case 2:return n=e.sent,e.abrupt("return",this.request("/account/balance",{network_identifier:n,account_identifier:{address:t}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"blockByIndex",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.networkIdentifier;case 2:return n=e.sent,e.abrupt("return",this.request("/block",{network_identifier:n,block_identifier:{index:t}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transactionsByAccount",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.networkIdentifier;case 2:return n=e.sent,e.abrupt("return",this.request("/search/transactions",{network_identifier:n,account_identifier:{address:t}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transactionsByHash",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.networkIdentifier;case 2:return n=e.sent,e.abrupt("return",this.request("/search/transactions",{network_identifier:n,transaction_identifier:{hash:t}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},278:function(e,t,n){"use strict";t.a=function(e){var t=e.IDL,n=t.Text,a=t.Record({secs:t.Nat64,nanos:t.Nat32}),r=t.Record({max_message_size_bytes:t.Opt(t.Nat32),node_max_memory_size_bytes:t.Opt(t.Nat32),controller_id:t.Principal}),c=t.Record({e8s:t.Nat64}),i=(t.Record({send_whitelist:t.Vec(t.Tuple(t.Principal)),minting_account:n,transaction_window:t.Opt(a),max_message_size_bytes:t.Opt(t.Nat32),archive_options:t.Opt(r),initial_values:t.Vec(t.Tuple(n,c))}),t.Record({account:n})),o=t.Vec(t.Nat8),s=t.Nat64,l=t.Record({to_subaccount:t.Opt(o),from_subaccount:t.Opt(o),to_canister:t.Principal,max_fee:c,block_height:s}),u=t.Nat64,d=t.Record({timestamp_nanos:t.Nat64}),b=t.Record({to:n,fee:c,memo:u,from_subaccount:t.Opt(o),created_at_time:t.Opt(d),amount:c});return t.Service({account_balance_dfx:t.Func([i],[c],["query"]),notify_dfx:t.Func([l],[],[]),send_dfx:t.Func([b],[s],[])})}},279:function(e,t,n){"use strict";t.a=function(e){var t=e.IDL,n=t.Principal,a=t.Record({user:n}),r=t.Nat,c=t.Vec(t.Nat8),i=t.Record({to:n,metadata:t.Opt(c),from:n,amount:r}),o=t.Variant({ok:t.Null,err:t.Variant({InsufficientBalance:t.Null,InvalidSource:n,Unauthorized:t.Null})}),s=t.Variant({removeOperator:t.Null,setOperator:t.Null}),l=t.Record({owner:n,operators:t.Vec(t.Tuple(n,s))}),u=t.Variant({ok:t.Null,err:t.Variant({Unauthorized:t.Null,InvalidOwner:n})});return t.Service({getBalance:t.Func([a],[t.Opt(r)],[]),getBalanceInsecure:t.Func([a],[t.Opt(r)],["query"]),getCommunityChestValueInsecure:t.Func([],[t.Opt(t.Nat)],["query"]),getInfo:t.Func([],[t.Record({balance:t.Nat,maxLiveSize:t.Nat,heap:t.Nat,size:t.Nat})],["query"]),getNumberOfAccounts:t.Func([],[t.Nat],[]),getTokenInfo:t.Func([],[t.Record({fee:t.Nat,totalMinted:t.Nat,totalSupply:t.Nat,totalTransactions:t.Nat})],["query"]),getTotalMinted:t.Func([],[t.Nat],[]),mint:t.Func([t.Principal,t.Nat],[],[]),transfer:t.Func([i],[o],[]),updateOperator:t.Func([t.Vec(l)],[u],[])})}},334:function(e,t){},338:function(e,t){},340:function(e,t){},350:function(e,t){},352:function(e,t){},379:function(e,t){},380:function(e,t){},385:function(e,t){},387:function(e,t){},394:function(e,t){},413:function(e,t){},460:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),i=n.n(c),o=n(545),s=n(549),l=n(3),u=n.n(l),d=n(10),b=n(8),j=n(48),p=n(21),h=n(546),f=n(525),m=n(282),O=n.n(m),x=n(283),y=n.n(x),g=n(547),v=n(110),k=n(517),w=n(554),C=n(551),A=n(519),S=n(520),I=n(523),T=n(522),P=n(521),_=n(553),N=n(55),W=n.n(N),F=n(142),B=n.n(F),R=n(59),E=n.n(R),L=n(272),M=n.n(L),z=n(514),q=n(36),V=n(271),D=n.n(V),U=n(1),H={width:"100%",height:"100%"};var J=function(e){return Object(U.jsx)("img",{style:H,src:D()(e.address)})},Y=300,G=Object(z.a)((function(e){return{drawer:Object(j.a)({},e.breakpoints.up("sm"),{width:Y,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:Y,zIndex:1}}}));function Z(e){var t=e.window,n=G(),a=Object(q.a)(),r=void 0!==t?function(){return t().document.body}:void 0,c=Object(p.c)((function(e){return e.currentPrincipal})),i=Object(p.c)((function(e){return e.principals.length?e.principals[c].accounts:[]})),o=Object(p.c)((function(e){return e.principals.length?e.principals[c].identity.type:""})),s=Object(p.c)((function(e){return e.principals.length?e.principals[c].identity.principal:""})),l=Object(p.b)(),u=Object(U.jsxs)("div",{style:{marginTop:64,marginBottom:100},children:[Object(U.jsx)("div",{style:{width:299,zIndex:10,backgroundColor:"white",position:"fixed",top:0,textAlign:"center"},className:n.toolbar,children:Object(U.jsx)("img",{style:{maxHeight:"50px",marginTop:"5px"},alt:"Stoic Wallet by Toniq Labs",src:"logo.png"})}),Object(U.jsx)(k.a,{}),Object(U.jsxs)(A.a,{children:[i.map((function(t,n){return Object(U.jsx)("div",{children:Object(U.jsxs)(S.a,{button:!0,onClick:function(){return e.changeRoute("accountDetail",n)},children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{children:Object(U.jsx)(J,{address:t.address})})}),Object(U.jsx)(T.a,{primaryTypographyProps:{noWrap:!0},secondaryTypographyProps:{noWrap:!0},primary:t.name,secondary:t.address})]})},n)})),Object(U.jsxs)(S.a,{button:!0,onClick:function(){var t=i.length;l({type:"account/add",payload:{id:t,principal:s}}),e.changeRoute("accountDetail",t)},children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{children:Object(U.jsx)(W.a,{})})}),Object(U.jsx)(T.a,{primary:"Add Account"})]})]}),Object(U.jsx)(k.a,{}),Object(U.jsxs)(A.a,{children:[Object(U.jsxs)(S.a,{button:!0,onClick:function(){return e.changeRoute("addressBook")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(B.a,{})}),Object(U.jsx)(T.a,{primary:"Address Book"})]}),Object(U.jsxs)(S.a,{button:!0,onClick:function(){return e.changeRoute("neurons")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(T.a,{primary:"Neurons"})]}),"watch"==o?"":Object(U.jsxs)(S.a,{button:!0,onClick:function(){return e.lockWallet()},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(M.a,{})}),Object(U.jsx)(T.a,{primary:"Lock Wallet"})]})]}),Object(U.jsx)("div",{style:{width:299,zIndex:10,backgroundColor:"white",position:"fixed",bottom:0,textAlign:"center"},className:n.toolbar,children:Object(U.jsx)("span",{style:{position:"absolute",bottom:"10px",left:"0",right:"0"},children:"Connected to Mainnet - v0.1.0"})})]});return Object(U.jsxs)("nav",{className:n.drawer,"aria-label":"mailbox folders",children:[Object(U.jsx)(C.a,{smUp:!0,implementation:"css",children:Object(U.jsx)(w.a,{container:r,variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:e.open,onClose:e.onClose,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:u})}),Object(U.jsx)(C.a,{xsDown:!0,implementation:"css",children:Object(U.jsx)(w.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:u})})]})}var $=n(552),K=n(273),Q=n.n(K);function X(e){var t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],i=function(e,t){"clickaway"!==t&&c(!1)};return Object(U.jsxs)(U.Fragment,{children:[r.a.cloneElement(e.children,{onClick:function(){"undefined"!=typeof e.onClick&&e.onClick(),c(!0)}}),Object(U.jsx)($.a,{style:{position:"fixed"},open:a,autoHideDuration:6e3,anchorOrigin:e.anchorOrigin,onClose:i,message:e.message,action:Object(U.jsx)(r.a.Fragment,{children:Object(U.jsx)(f.a,{size:"small","aria-label":"close",color:"inherit",onClick:i,children:Object(U.jsx)(Q.a,{fontSize:"small"})})})})]})}var ee=n(526),te=n(543),ne=n(150),ae=n.n(ne),re=n(281),ce=n.n(re),ie=n(82),oe=n.n(ie),se=n(117),le=n.n(se),ue=n(542),de=n(527),be=n(528),je=n(529),pe=n(64),he={root:{height:"100%"},selectedCard:{height:"100%",backgroundColor:"#003240",color:"white"},card:{height:"100%"},title:{fontSize:14},pos:{marginBottom:12}},fe=0,me=pe.a.connect("https://boundary.ic0.app/");function Oe(e){var t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],i=Object(p.c)((function(e){return e.currentPrincipal})),o=Object(p.c)((function(e){return e.principals.length?e.principals[i].identity:{}})),s=function(){me.token(e.data.id).getBalance(e.address,o.principal).then((function(t){c(Number(t)/Math.pow(10,e.data.decimals))}))};return r.a.useEffect((function(){return s(),fe=setInterval((function(){return s()}),1e4),function(){clearInterval(fe)}}),[]),r.a.useEffect((function(){c(!1),s()}),[e.address]),Object(U.jsx)(ee.a,{style:he.root,item:!0,xl:2,lg:3,md:4,children:Object(U.jsx)(de.a,{onClick:function(){e.onClick()},style:e.selected?he.selectedCard:he.card,children:Object(U.jsx)(be.a,{children:Object(U.jsxs)(je.a,{children:[Object(U.jsx)(v.a,{style:he.title,color:e.selected?"inherit":"textSecondary",gutterBottom:!0,children:e.data.name}),Object(U.jsx)(v.a,{variant:"h6",children:!1===a?"Loading":a+" "+e.data.symbol})]})})})})}var xe=n(535),ye=n(550),ge=n(530),ve=n(534),ke=n(532),we=n(533),Ce=n(531),Ae=(n(14),n(49),n(84)),Se=n(25),Ie={},Te=function(e,t){var n=e.getPrincipal().toString();return Ie[n]=e,{principal:n,type:t}},Pe={getIdentity:function(e){return!!Ie.hasOwnProperty(e)&&Ie[e]},setup:function(e,t){return new Promise(function(){var n=Object(d.a)(u.a.mark((function n(a,r){var c,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e,n.next="ii"===n.t0?3:"private"===n.t0?8:"watch"===n.t0?12:14;break;case 3:return n.next=5,Ae.a.create();case 5:return(c=n.sent).login({identityProvider:"https://identity.ic0.app/",onSuccess:function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.getIdentity();case 2:n=t.sent,a(Te(n,e));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onError:r}),n.abrupt("break",14);case 8:return localStorage.setItem("_m",t.mnemonic),i=Object(Se.h)(t.mnemonic),Object(Se.c)(t.mnemonic,i.getPrincipal().toString(),t.password).then((function(t){localStorage.setItem("_em",t),a(Te(i,e))})),n.abrupt("break",14);case 12:return a({principal:t.principal,type:e}),n.abrupt("break",14);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},load:function(e){return new Promise(function(){var t=Object(d.a)(u.a.mark((function t(n,a){var r,c,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="ii"===t.t0?3:"private"===t.t0?11:"watch"===t.t0?14:16;break;case 3:return t.next=5,Ae.a.create();case 5:return r=t.sent,t.next=8,r.getIdentity();case 8:return"2vxsx-fae"!=(c=t.sent).getPrincipal().toString()?n(Te(c,e.type)):a("Not logged in"),t.abrupt("break",16);case 11:return(i=localStorage.getItem("_m"))?(o=i,c=Object(Se.h)(o),n(Te(c,e.type))):a("No seed"),t.abrupt("break",16);case 14:return n({principal:e.principal,type:e.type}),t.abrupt("break",16);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},unlock:function(e,t){return new Promise(function(){var n=Object(d.a)(u.a.mark((function n(a,r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:Pe.load(e).then(a).catch(function(){var n=Object(d.a)(u.a.mark((function n(c){var i,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e.type,n.next="ii"===n.t0?3:"private"===n.t0?8:13;break;case 3:return n.next=5,Ae.a.create();case 5:return(i=n.sent).login({identityProvider:"https://identity.ic0.app/",onSuccess:function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getIdentity();case 2:n=t.sent,a(Te(n,e.type));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onError:r}),n.abrupt("break",13);case 8:if(o=localStorage.getItem("_em")){n.next=11;break}return n.abrupt("return",r("No encrypted data to decrypt"));case 11:return Object(Se.b)(o,e.principal,t.password).then((function(t){localStorage.setItem("_m",t);var n=Object(Se.h)(t);a(Te(n,e.type))})).catch(r),n.abrupt("break",13);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},lock:function(e){return new Promise(function(){var t=Object(d.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="ii"===t.t0?3:"private"===t.t0?8:10;break;case 3:return t.next=5,Ae.a.create();case 5:return t.sent.logout(),t.abrupt("break",10);case 8:return localStorage.removeItem("_m"),t.abrupt("break",10);case 10:n(!0);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},clear:function(e){return new Promise(function(){var t=Object(d.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="ii"===t.t0?3:"private"===t.t0?8:11;break;case 3:return t.next=5,Ae.a.create();case 5:return t.sent.logout(),t.abrupt("break",11);case 8:return localStorage.removeItem("_m"),localStorage.removeItem("_em"),t.abrupt("break",11);case 11:n(!0);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},validatePrincipal:Se.m,validateMnemonic:Se.a.validateMnemonic,generateMnemonic:Se.a.generateMnemonic,validatePassword:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/.test(e)}};function _e(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(a){console.error("Fallback: Oops, unable to copy",a)}document.body.removeChild(t)}window.StoicIdentity=Pe;var Ne={ii:"Internet Identity",private:"Mnemonic Key",watch:"Read-only"},We=function(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):_e(e)},Fe=function(e){if(!e)return"";if(64==e.length&&/^[0-9a-fA-F]+$/.test(e))return e.substr(0,40)+"...";var t=e.split("-");return t.length<=4?e:t[0]+"-"+t[1].substr(0,3)+"..."+t[t.length-3].substr(2)+"-"+t[t.length-2]+"-"+t[t.length-1]};function Be(e){var t=Object(p.c)((function(e){return e.currentPrincipal})),n=Object(p.c)((function(e){return e.currentAccount})),a=Object(p.c)((function(e){return e.principals.length?e.principals[t].identity:{}})),c=r.a.useState(!1),i=Object(b.a)(c,2),o=i[0],s=i[1],l=r.a.useState(0),u=Object(b.a)(l,2),d=u[0],j=u[1],h=r.a.useState(!1),f=Object(b.a)(h,2),m=f[0],O=f[1],x=r.a.useState(0),y=Object(b.a)(x,2),g=y[0],v=y[1],k=r.a.useState(0),w=Object(b.a)(k,2),C=w[0],A=w[1],S=r.a.useState(0),I=Object(b.a)(S,2),T=I[0],P=I[1],_=r.a.useState(""),N=Object(b.a)(_,2),W=N[0],F=N[1],B=r.a.useState(!1),R=Object(b.a)(B,2),E=R[0],L=R[1],M=r.a.useState(""),z=Object(b.a)(M,2),q=z[0],V=z[1],D=r.a.useState(!1),H=Object(b.a)(D,2),J=(H[0],H[1]),Y=pe.a.connect("https://boundary.ic0.app/"),G=function(t){e.error(t)},Z=function(){s(!1),j(0),v(0),A(0),P(0),O(!1),F(""),L(!1),V(""),J(!1)};return r.a.useEffect((function(){Y.token(e.data.id).fee().then((function(t){A(t/Math.pow(10,e.data.decimals)),P(t/Math.pow(10,e.data.decimals))})),Y.token(e.data.id).getBalance(e.address,a.principal).then((function(t){O(Number(t)/Math.pow(10,e.data.decimals))}))}),[e.data.id,o]),Object(U.jsxs)(U.Fragment,{children:[r.a.cloneElement(e.children,{onClick:function(){s(!0)}}),Object(U.jsxs)(ge.a,{open:o,onClose:Z,maxWidth:"sm",fullWidth:!0,children:[Object(U.jsxs)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:["Send ",e.data.name," Tokens (",e.data.symbol,")"]}),0==d?Object(U.jsxs)(ke.a,{children:[Object(U.jsx)(we.a,{style:{textAlign:"center",fontWeight:"bold"},children:"Please enter the recipient address and amount that you wish to send below."}),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ye.a,{autoFocus:!0,margin:"dense",label:"Address of the Recipient",value:W,onChange:function(e){return F(e.target.value)},type:"text",fullWidth:!0}),Object(U.jsx)(ye.a,{style:{width:"49%",marginRight:"2%"},margin:"dense",label:"Amount of "+e.data.symbol+" to Send",value:g,onChange:function(e){return v(e.target.value)},type:"text"}),C>0?Object(U.jsx)(ye.a,{style:{width:"49%"},margin:"dense",label:"Fee",value:T,onChange:function(e){return P(e.target.value)},type:"text"}):"",Object(U.jsxs)(we.a,{style:{fontSize:"small",textAlign:"center",marginTop:"20px"},children:[!1!==m?"Balance: "+m+" "+e.data.symbol+" ":"",C>0?"Min Fee: "+C+" "+e.data.symbol:""]}),E?Object(U.jsx)("a",{style:{cursor:"pointer",fontWeight:"bold"},onClick:function(){return L(!1)},children:"Hide Advanced Options"}):Object(U.jsx)("a",{style:{cursor:"pointer",fontWeight:"bold"},onClick:function(){return L(!0)},children:"Show Advanced Options"})]}),E?Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(ye.a,{margin:"dense",multiline:!0,rows:"2",rowsMax:"4",label:"Optional Memo",value:q,onChange:function(e){return V(e.target.value)},type:"text",fullWidth:!0})}):""]}):Object(U.jsxs)(ke.a,{children:[Object(U.jsxs)(we.a,{style:{textAlign:"center"},children:["Please confirm that you are about to send ",Object(U.jsx)("br",{}),Object(U.jsxs)("strong",{style:{color:"red"},children:[g," ",e.data.symbol]}),Object(U.jsx)("br",{}),"from ",Object(U.jsx)("strong",{style:{color:"red"},children:Fe(e.address)}),Object(U.jsx)("br",{}),"to ",Object(U.jsx)("strong",{style:{color:"red"},children:Fe(W)}),Object(U.jsx)("br",{}),T>0?" using a fee of "+T:""]}),Object(U.jsx)(we.a,{style:{textAlign:"center"},children:Object(U.jsx)("strong",{children:"All transactions are irreversible, so ensure the above details are correct before you continue."})})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:Z,color:"primary",children:"Cancel"}),0==d?Object(U.jsx)(xe.a,{onClick:function(){if(isNaN(g))return G("Please enter a valid amount to send");if(isNaN(T))return G("Please enter a valid fee to use");if(T!=C)return G("The fee must be "+C);switch(e.data.symbol){case"ICP":if(!Object(Se.l)(W))return G("Please enter a valid address");break;case"HZLD":if(!Object(Se.m)(W))return G("Please enter a valid principal to send to");break;default:if(!Object(Se.l)(W)&&!Object(Se.m)(W))return G("Please enter a valid address to send to")}if(g+T>m)return G("You have insufficient "+e.data.symbol);j(1)},color:"primary",children:"Review Transaction"}):Object(U.jsx)(xe.a,{onClick:function(){var t=a.principal,r=n,c=W,i=BigInt(g*Math.pow(10,e.data.decimals)),o=BigInt(T*Math.pow(10,e.data.decimals)),s=q,l=Pe.getIdentity(a.principal);if(!l)return G("Something wrong with your wallet, try logging in again");e.loader(!0),Z(),pe.a.connect("https://boundary.ic0.app/",l).token(e.data.id).transfer(t,r,c,i,o,s,!1).then((function(t){return t?e.alert("Transaction complete","Your transfer was sent successfully"):G("Something went wrong with this transfer")})).catch((function(e){return G("There was an error: "+e)})).finally((function(){e.loader(!1)}))},color:"primary",children:"Confirm Transaction"})]})]})]})}var Re=n(537),Ee=n(541),Le=n(540),Me=n(536),ze=n(538),qe=n(539),Ve=n(188),De=n(280),Ue=n.n(De),He=0,Je=pe.a.connect("https://boundary.ic0.app/");function Ye(e){var t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],i={empty:{maxWidth:400,margin:"0 auto"},table:{minWidth:650}},o=function(){He&&clearInterval(He),He=0},s=function(){He&&o(),l(),He=setInterval(l,1e4)},l=function(){console.log("Fetching for "+e.data.id),function(e,t){var n=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(t));return Je.token(n).getTransactions(a).then((function(e){return[e,n,a]}))}(e.data.id,e.address).then((function(t){console.log("Fetched for "+t[1]),console.log("Current "+e.data.id),t[1]==e.data.id&&t[2]==e.address&&c(t[0])}))};return r.a.useEffect((function(){return s(),function(){o()}}),[]),r.a.useEffect((function(){return o(),setTimeout((function(){c(!1),s()}),100),function(){return!0}}),[e.address,e.data.id]),Object(U.jsx)(U.Fragment,{children:!1===a?Object(U.jsx)("div",{style:i.empty,children:Object(U.jsx)(v.a,{paragraph:!0,style:{paddingTop:20,fontWeight:"bold"},align:"center",children:"Loading transactions..."})}):0===a.length?Object(U.jsx)("div",{style:i.empty,children:Object(U.jsx)(v.a,{paragraph:!0,style:{paddingTop:20,fontWeight:"bold"},align:"center",children:"No transactions available"})}):Object(U.jsx)(Me.a,{component:Ve.a,children:Object(U.jsxs)(Re.a,{style:i.table,"aria-label":"simple table",children:[Object(U.jsx)(ze.a,{children:Object(U.jsxs)(qe.a,{children:[Object(U.jsx)(Le.a,{children:"Date"}),Object(U.jsx)(Le.a,{children:"Description"}),Object(U.jsx)(Le.a,{align:"right",children:"Amount"})]})}),Object(U.jsx)(Ee.a,{children:a.map((function(t,n){return Object(U.jsxs)(qe.a,{children:[Object(U.jsx)(Le.a,{component:"th",scope:"row",children:Object(U.jsx)(Ue.a,{relative:!0,autoUpdate:!0,date:t.timestamp})}),Object(U.jsx)(Le.a,{children:t.from==e.address?Object(U.jsxs)(U.Fragment,{children:["Sent ",Object(U.jsxs)("strong",{children:[t.amount," ",e.data.symbol]})," to ",t.to," with a ",Object(U.jsxs)("strong",{children:[t.fee," ",e.data.symbol]})," Fee",Object(U.jsx)("br",{}),"(",Object(U.jsx)("a",{href:"https://ic.rocks/transaction/"+t.hash,target:"_blank",children:"View Transaction"}),")"]}):Object(U.jsxs)(U.Fragment,{children:["Received ",Object(U.jsxs)("strong",{children:[t.amount," ",e.data.symbol]})," from ",t.from,Object(U.jsx)("br",{}),"(",Object(U.jsx)("a",{href:"https://ic.rocks/transaction/771f1ebeb599d34429cff7d7a5148864d238a0e4081166f50ac20e401d6e1b26",target:"_blank",children:"View Transaction"}),")"]})}),Object(U.jsx)(Le.a,{align:"right",children:t.from==e.address?Object(U.jsxs)("span",{style:{color:"red",fontWeight:"bold"},children:["-",t.amount+t.fee]}):Object(U.jsxs)("span",{style:{color:"#00b894",fontWeight:"bold"},children:["+",t.amount]})})]},e.data.id+e.address+t.hash+n)}))})]})})})}var Ge=n(26),Ze=Object(z.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));function $e(e){var t=Ze();return Object(U.jsx)("div",{className:t.root,children:Object(U.jsx)(ue.a,Object(Ge.a)(Object(Ge.a)({style:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"}},e),{},{children:e.children}))})}function Ke(e){var t,n,a=r.a.useState(!1),c=Object(b.a)(a,2),i=c[0],o=c[1],s=r.a.useState(null!==(t=e.defaultValue)&&void 0!==t?t:""),l=Object(b.a)(s,2),u=l[0],d=l[1],j=r.a.useState(null!==(n=e.defaultSecondaryValue)&&void 0!==n?n:""),p=Object(b.a)(j,2),h=p[0],f=p[1],m=function(){o(!1)};return Object(U.jsxs)(U.Fragment,{children:[r.a.cloneElement(e.children,{onClick:function(){o(!0)}}),Object(U.jsxs)(ge.a,{open:i,onClose:m,"aria-labelledby":"form-dialog-title",children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",children:e.title}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)(we.a,{children:e.content}),Object(U.jsx)(ye.a,{autoFocus:!0,margin:"dense",label:e.inputLabel,value:u,onChange:function(e){return d(e.target.value)},type:"text",fullWidth:!0}),e.secondaryInput?Object(U.jsx)(ye.a,{margin:"dense",label:e.secondaryInput,value:h,onChange:function(e){return f(e.target.value)},type:"text",fullWidth:!0}):""]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:m,color:"primary",children:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){var t,n;"undefined"!=typeof e.onClick&&e.onClick(u,h),o(!1),d(null!==(t=e.defaultValue)&&void 0!==t?t:""),f(null!==(n=e.defaultSecondaryValue)&&void 0!==n?n:"")},color:"primary",children:e.buttonLabel})]})]})]})}var Qe=pe.a.connect("https://boundary.ic0.app/");var Xe=function(e){var t=Object(p.c)((function(e){return e.currentToken})),n=Object(p.c)((function(e){return e.currentPrincipal})),a=Object(p.c)((function(e){return e.currentAccount})),c=Object(p.c)((function(e){return e.principals.length?e.principals[n].identity.type:""})),i=Object(p.c)((function(e){return e.principals.length?e.principals[n].accounts[a]:{}})),o=r.a.useState(i.tokens),s=Object(b.a)(o,2),l=s[0],u=s[1],d=Object(p.b)();r.a.useEffect((function(){u(i.tokens)}),[t,a,n]);var j=Object(q.a)(),h={root:{flexGrow:1,padding:j.spacing(3)},grid:{flexGrow:1,padding:j.spacing(2)}},m=function(t){e.alert("There was an error",t)};return Object(U.jsxs)("div",{style:h.root,children:[Object(U.jsx)(A.a,{children:Object(U.jsxs)(S.a,{children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{style:{width:60,height:60},children:Object(U.jsx)(J,{address:i.address})})}),Object(U.jsx)(T.a,{style:{paddingLeft:20},primaryTypographyProps:{noWrap:!0,variant:"h4"},secondaryTypographyProps:{noWrap:!0,variant:"subtitle1"},primary:i.name,secondary:Object(U.jsxs)(U.Fragment,{children:[i.address,Object(U.jsx)(X,{message:"Address Copied",anchorOrigin:{vertical:"bottom",horizontal:"left"},onClick:function(){return We(i.address)},children:Object(U.jsx)(f.a,{size:"small",edge:"end","aria-label":"copy",children:Object(U.jsx)(oe.a,{style:{fontSize:18}})})})]})}),Object(U.jsxs)(te.a,{children:[Object(U.jsx)(Ke,{onClick:function(e){return e?e.length>20?m("Max length or account names is 20 characters"):void d({type:"account/edit",payload:{name:e}}):m("Please enter a valid account name")},title:"Change Account Name",inputLabel:"Account Name",secondaryInput:!1,content:"Enter a new friendly name for this account.",defaultValue:i.name,buttonLabel:"Save",children:Object(U.jsx)(f.a,{edge:"end","aria-label":"edit",children:Object(U.jsx)(le.a,{})})}),Object(U.jsx)(f.a,{href:"https://ic.rocks/account/"+i.address,target:"_blank",edge:"end","aria-label":"search",children:Object(U.jsx)(ae.a,{})})]})]})}),Object(U.jsx)("div",{style:h.grid,children:Object(U.jsxs)(ee.a,{container:!0,spacing:2,direction:"row",justify:"flex-start",alignItems:"flex-start",children:[l.map((function(e,n){return Object(U.jsx)(Oe,{address:i.address,data:e,onClick:function(){d({type:"currentToken",payload:{index:n}})},selected:n==t},i.address+e.symbol)})),Object(U.jsx)(Ke,{onClick:function(t){return Object(Se.m)(t)?i.tokens.findIndex((function(e){return e.id===t}))>=0?m("Canister has already been added"):(e.loader(!0),void Qe.token(t).getMetadata().then((function(n){if("fungible"!=n.type)return m("NFT's are not supported yet");n.id=t,d({type:"account/token/add",payload:{metadata:n}}),e.loader(!1),d({type:"currentToken",payload:{index:i.tokens.length}})}))):m("Please enter a valid canister ID")},title:"Add token",inputLabel:"Canister ID",content:"Enter the Canister ID for the token you wish to add",buttonLabel:"Add",children:Object(U.jsx)(ue.a,{style:{verticalAlign:"center",marginRight:20},color:"primary","aria-label":"add",children:Object(U.jsx)(W.a,{})})})]})}),0!=t?Object(U.jsxs)("p",{style:{marginLeft:"15px",color:"rgba(0, 0, 0, 0.54)"},children:[Object(U.jsx)("strong",{children:"Token ID:"})," ",i.tokens[t].id,Object(U.jsx)(X,{message:"Token ID Copied",anchorOrigin:{vertical:"bottom",horizontal:"left"},onClick:function(){return We(i.tokens[t].id)},children:Object(U.jsx)(f.a,{size:"small",edge:"end","aria-label":"copy",children:Object(U.jsx)(oe.a,{style:{fontSize:14}})})})]}):"",Object(U.jsx)(Ye,{data:i.tokens[t],address:i.address}),"watch"==c?"":Object(U.jsx)(Be,{alert:function(t,n){e.alert(t,n)},loader:e.loader,error:m,address:i.address,data:i.tokens[t],children:Object(U.jsx)($e,{color:"primary","aria-label":"send",children:Object(U.jsx)(ce.a,{})})})]})},et=n(151),tt=n.n(et);var nt=function(e){var t=Object(p.c)((function(e){return e.addresses})),n=Object(p.b)(),a=function(t){e.alert("There was an error",t)},r={root:{flexGrow:1,padding:Object(q.a)().spacing(3)},empty:{maxWidth:400,margin:"0 auto",paddingTop:30},largeIcon:{width:60,height:60}};return Object(U.jsxs)(U.Fragment,{children:[t.length>0?Object(U.jsx)(A.a,{children:t.map((function(e,t){return Object(U.jsxs)(S.a,{children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{children:Object(U.jsx)(J,{address:e.address})})}),Object(U.jsx)(T.a,{primaryTypographyProps:{noWrap:!0},secondaryTypographyProps:{noWrap:!0},primary:e.name,secondary:Object(U.jsxs)(U.Fragment,{children:[e.address,Object(U.jsx)(X,{message:"Address Copied",anchorOrigin:{vertical:"bottom",horizontal:"left"},onClick:function(){return We(e.address)},children:Object(U.jsx)(f.a,{size:"small",edge:"end","aria-label":"copy",children:Object(U.jsx)(oe.a,{style:{fontSize:18}})})})]})}),Object(U.jsxs)(te.a,{children:[Object(U.jsx)(Ke,{onClick:function(e,a){return function(e,t,a){n({type:"addresses/edit",payload:{index:a,name:e,address:t}})}(e,a,t)},title:"Edit contact from address book",inputLabel:"Contact Name",secondaryInput:"Contact Address",content:"Update the details of a saved contact",buttonLabel:"Save",defaultValue:e.name,defaultSecondaryValue:e.address,children:Object(U.jsx)(f.a,{edge:"end","aria-label":"edit",children:Object(U.jsx)(le.a,{})})}),Object(U.jsx)(f.a,{onClick:function(){n({type:"addresses/delete",payload:t})},edge:"end","aria-label":"delete",children:Object(U.jsx)(tt.a,{})})]})]},t)}))}):Object(U.jsxs)("div",{style:r.empty,children:[Object(U.jsx)(v.a,{paragraph:!0,align:"center",children:Object(U.jsx)(B.a,{style:r.largeIcon})}),Object(U.jsx)(v.a,{paragraph:!0,style:{fontWeight:"bold"},align:"center",children:"Your address book is empty"}),Object(U.jsx)(v.a,{paragraph:!0,align:"center",children:"You can create contacts in your address book to associate addresses with easy to read names."})]}),Object(U.jsx)(Ke,{onClick:function(e,t){if(!e)return a("Please enter a valid contact name");if(e.length>30)return a("Max length or contact names is 30 characters");if(!Object(Se.l)(t)&&!Object(Se.m)(t))return a("Please enter a valid address or principal");n({type:"addresses/add",payload:{name:e,address:t}})},title:"Add contact to address book",inputLabel:"Contact Name",secondaryInput:"Contact Address",content:"Save names and addresses of common people and services.",buttonLabel:"Save",children:Object(U.jsx)($e,{color:"primary","aria-label":"add",children:Object(U.jsx)(W.a,{})})})]})};var at=function(e){var t={root:{flexGrow:1,padding:Object(q.a)().spacing(3)},empty:{maxWidth:400,margin:"0 auto",paddingTop:30},largeIcon:{width:60,height:60}};return Object(U.jsx)("div",{style:t.root,children:Object(U.jsxs)("div",{style:t.empty,children:[Object(U.jsx)(v.a,{paragraph:!0,align:"center",children:Object(U.jsx)(E.a,{style:t.largeIcon})}),Object(U.jsx)(v.a,{paragraph:!0,align:"center",children:"Sorry, neuron management is still cooking away over at Toniq Labs. Please be patient!"})]})})},rt=n(544);var ct=function(e){var t,n=r.a.useState([]),a=Object(b.a)(n,2),c=a[0],i=a[1],o=Object(p.c)((function(e){return e.currentPrincipal})),s=Object(p.c)((function(e){return e.principals.length?e.principals[o].accounts:[]})),l=Object(p.c)((function(e){return e.principals.length?e.principals[o].identity:{}})),u=Object(p.c)((function(e){return e.principals}));return r.a.useEffect((function(){!function(){var e=["ICP"];s.map((function(t){t.tokens.map((function(t){e.indexOf(t.symbol)<0&&e.push(t.symbol)}))})),i(e)}()}),[o]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(A.a,{component:"nav","aria-labelledby":"settings-list",subheader:Object(U.jsx)(rt.a,{id:"nested-list-subheader",children:"Active Principal"}),children:Object(U.jsxs)(S.a,{children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{style:{width:60,height:60},children:Object(U.jsx)(J,{address:null!==(t=l.principal)&&void 0!==t?t:""})})}),Object(U.jsx)(T.a,{style:{paddingLeft:20},primaryTypographyProps:{noWrap:!0},primary:Object(U.jsxs)(U.Fragment,{children:[l.principal,Object(U.jsx)(X,{message:"Principal Copied",anchorOrigin:{vertical:"bottom",horizontal:"left"},onClick:function(){return We(l.principal)},children:Object(U.jsx)(f.a,{size:"small",edge:"end","aria-label":"edit",children:Object(U.jsx)(oe.a,{style:{fontSize:18}})})})]}),secondary:Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(U.Fragment,{children:[Ne[l.type],Object(U.jsx)("br",{}),s.length+(1===s.length?" Account":" Accounts")," containing ",c.join(", ")]})})}),Object(U.jsxs)(te.a,{children:[Object(U.jsx)(f.a,{href:"https://ic.rocks/principal/"+l.principal,target:"_blank",edge:"end","aria-label":"search",children:Object(U.jsx)(ae.a,{})}),u.length>1?Object(U.jsx)(f.a,{edge:"end","aria-label":"search",children:Object(U.jsx)(tt.a,{})}):""]})]})}),Object(U.jsx)(k.a,{}),u.length>1?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(A.a,{component:"nav","aria-labelledby":"settings-list",subheader:Object(U.jsx)(rt.a,{id:"nested-list-subheader",children:"Other Principals"}),children:u.map((function(e,t){var n;if(t!=o)return Object(U.jsxs)(S.a,{button:!0,children:[Object(U.jsx)(P.a,{children:Object(U.jsx)(_.a,{children:Object(U.jsx)(J,{address:null!==(n=e.identity.principal)&&void 0!==n?n:""})})}),Object(U.jsx)(T.a,{primaryTypographyProps:{noWrap:!0},primary:e.identity.principal,secondary:Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(U.Fragment,{children:Ne[e.identity.type]})})})]})}))}),Object(U.jsx)(k.a,{})," "]}):"",Object(U.jsx)(A.a,{component:"nav","aria-labelledby":"settings-list",subheader:Object(U.jsx)(rt.a,{id:"nested-list-subheader",children:"Advanced Settings"}),children:Object(U.jsx)(S.a,{button:!0,onClick:function(){e.confirm("Please confirm","You are about to clear your wallet, which will remove all data from this device. Are you sure you want to continue?").then((function(t){t&&e.clearWallet()}))},children:Object(U.jsx)(T.a,{primaryTypographyProps:{noWrap:!0,color:"error"},primary:"Remove this wallet from this device"})})})]})},it=Object(z.a)((function(e){return{root:{display:"flex"},appBar:Object(j.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(300,"px)"),marginLeft:300}),menuButton:Object(j.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,toolbarButtons:{marginLeft:"auto"},content:{flexGrow:1}}})),ot={accountDetail:{title:"Account Details",view:Xe},neurons:{title:"Neuron Management",view:at},addressBook:{title:"Address Book",view:nt},settings:{title:"Settings",view:ct}};var st=function(e){Object(q.a)();var t=it(),n=r.a.useState(!1),a=Object(b.a)(n,2),c=a[0],i=a[1],s=r.a.useState("accountDetail"),l=Object(b.a)(s,2),u=l[0],d=l[1],j=r.a.useState(ot[u].title),m=Object(b.a)(j,2),x=m[0],k=m[1],w=Object(p.b)(),C=function(){i(!c)},A=function(e,t){k(ot[e].title),d(e),"undefined"!==typeof t&&w({type:"currentAccount",payload:{index:t}})},S=function(){e.remove()};return Object(U.jsxs)("div",{className:t.root,children:[Object(U.jsx)(o.a,{}),Object(U.jsx)(h.a,{position:"fixed",className:t.appBar,children:Object(U.jsxs)(g.a,{children:[Object(U.jsx)(f.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:C,className:t.menuButton,children:Object(U.jsx)(O.a,{})}),Object(U.jsx)(v.a,{variant:"h6",noWrap:!0,children:x}),Object(U.jsx)("div",{className:t.toolbarButtons,children:Object(U.jsx)(f.a,{color:"inherit","aria-label":"settings",edge:"end",onClick:function(){return A("settings")},children:Object(U.jsx)(y.a,{})})})]})}),Object(U.jsx)(Z,{lockWallet:function(){e.logout()},changeRoute:A,onClose:C,open:c}),Object(U.jsxs)("main",{className:t.content,children:[Object(U.jsx)("div",{className:t.toolbar}),function(t){switch(t){case"accountDetail":return r.a.createElement(ot[t].view,{alert:e.alert,confirm:e.confirm,loader:e.loader});case"settings":return r.a.createElement(ot[t].view,{alert:e.alert,confirm:e.confirm,clearWallet:S});default:return r.a.createElement(ot[t].view,{alert:e.alert,confirm:e.confirm})}}(u)]})]})},lt=n(136),ut=n.n(lt),dt=n(137),bt=n.n(dt);function jt(e){var t=function(t){e.handler(t)};return Object(U.jsxs)(A.a,{component:"nav","aria-label":"secondary add principal",children:[Object(U.jsxs)(S.a,{button:!0,onClick:function(){return t("create")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(W.a,{})}),Object(U.jsx)(T.a,{primary:"Create a new Wallet",secondary:"I want to create a new wallet by generating a random seed phrase"})]}),Object(U.jsxs)(S.a,{button:!0,onClick:function(){return t("import")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(ut.a,{})}),Object(U.jsx)(T.a,{primary:"Import an existing Wallet",secondary:"I want to recover an existing wallet using a seed phrase"})]}),Object(U.jsxs)(S.a,{button:!0,onClick:function(){return t("link")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(T.a,{primary:"Link your Internet Identitiy",secondary:"I want to link create a wallet using an Internet Identity"})]}),Object(U.jsxs)(S.a,{button:!0,onClick:function(){return t("connect")},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(bt.a,{})}),Object(U.jsx)(T.a,{primary:"Connect Hardware Wallet",secondary:"I want to import a wallet from my Ledger or Trezor device"})]})]})}var pt=n(285),ht=n.n(pt),ft=n(284),mt=n.n(ft),Ot=["When accessing this wallet, always type the URL into the browser address bar yourself or use a bookmark that you yourself created. Never trust links posted on social media, in search results, sent in emails or listed on other websites.","If your browser gives you any sort of security warning about this web wallet, get in touch with us and report it. Do not ignore the warning nor enter your mnemonic secret!","Only use your own devices when accessing your accounts. Do not enter your mnemonic secret on untrustworthy devices (public computers, friends computers/phones, etc) as they might be littered with malware and keyloggers.","Always keep your operating system, anti-virus software and browser up to date with latest security updates.","If possible, prefer hardware wallets over mnemonic secret for storing larger amounts of RISE."],xt="";function yt(e){var t=r.a.useState(e.initialRoute),n=Object(b.a)(t,2),a=n[0],c=n[1],i=r.a.useState(""),o=Object(b.a)(i,2),s=o[0],l=o[1],u=r.a.useState(""),d=Object(b.a)(u,2),j=d[0],p=d[1],h=r.a.useState(""),f=Object(b.a)(h,2),m=f[0],O=f[1],x=r.a.useState(""),y=Object(b.a)(x,2),g=y[0],v=y[1],k=r.a.useState(""),w=Object(b.a)(k,2),C=w[0],P=w[1],_=r.a.useState(1),N=Object(b.a)(_,2),W=N[0],F=N[1];r.a.useEffect((function(){c(e.initialRoute)}),[e.initialRoute]);var B=function(){xt="",F(1),c(""),l(""),p(""),O(""),v(""),P(""),e.cancel()},R=function(t){e.alert("There was an error",t)},E=function(){var t={},n="";switch(xt){case"create":case"import":n="private",t.mnemonic=j,t.password=m;break;case"watch":n="watch",t.principal=C}e.submit(n,t),xt="",F(1),c(""),l(""),p(""),O(""),v(""),P("")};return Object(U.jsxs)(U.Fragment,{children:["tips"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Security Tips"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"Things to keep in mind to increase the security of your funds:"})}),Object(U.jsx)("ul",{children:Ot.map((function(e,t){return t>=W?"":Object(U.jsx)("li",{children:e},t)}))})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"}),W<Ot.length?Object(U.jsx)(xe.a,{onClick:function(){return F(W+1)},color:"primary",children:"Next Tip"}):Object(U.jsx)(xe.a,{onClick:function(){F(1),c("newMnemonic"),xt="create",l(Pe.generateMnemonic())},color:"primary",children:"Continue"})]})]})}):"","import"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Select Import Type"}),Object(U.jsx)(ke.a,{children:Object(U.jsxs)(A.a,{component:"nav","aria-label":"secondary add principal",children:[Object(U.jsxs)(S.a,{button:!0,onClick:function(){c("confirmMnemonic"),xt="import"},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(mt.a,{})}),Object(U.jsx)(T.a,{primary:"Import using a seed phrase",secondary:"Enter your mnemonic seed to recover full access to your wallet"})]}),Object(U.jsxs)(S.a,{button:!0,onClick:function(){c("address"),xt="watch"},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(ht.a,{})}),Object(U.jsx)(T.a,{primary:"Read only account",secondary:"Enter the address of a wallet you would like to add, but not spend from"})]})]})}),Object(U.jsx)(ve.a,{children:Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"})})]})}):"","newMnemonic"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Write down your seed phrase"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"This is your 12 word seed phrase:"})}),Object(U.jsx)("div",{style:{textAlign:"center"},children:s.split(" ").map((function(e,t){return Object(U.jsxs)("span",{style:{fontSize:"large",display:"inline-block",padding:"5px 15px"},children:[e,t<11?Object(U.jsx)(U.Fragment,{children:"\xa0"}):""]},t)}))}),Object(U.jsx)("p",{children:"Write your mnemonic down on a physical piece of paper and store it somewhere safe and private. Anyone who knows this can transfer funds out of your account."})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){return c("confirmMnemonic")},color:"primary",children:"Continue"})]})]})}):"","confirmMnemonic"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Confirm your mnemonic seed"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"Please confirm your 12 word seed phrase:"})}),Object(U.jsx)(ye.a,{id:"standard-textarea",label:"Confirm Mnemonic Seed",multiline:!0,fullWidth:!0,value:j,rows:2,onChange:function(e){return p(e.target.value)}})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){return Pe.validateMnemonic(j)?"create"==xt&&j!==s?R("The mnemonic you entered does not match the one displayed"):void c("passwords"):R("The mnemonic you entered is not valid")},color:"primary",children:"Continue"})]})]})}):"","address"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Enter the Principal to watch"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"Please enter a valid Principal (e.g. 4opr7-aaepd-uw2ok...)"})}),Object(U.jsx)(ye.a,{id:"standard-textarea",label:"Principal",fullWidth:!0,value:C,required:!0,onChange:function(e){return P(e.target.value)}})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){if(!Pe.validatePrincipal(C))return R("Please enter a valid principal");E()},color:"primary",children:"Continue"})]})]})}):"","passwords"==a?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:!0,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Enter a password"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"This password is used to further encrypt your private data on your device."})}),Object(U.jsx)(ye.a,{id:"standard-textarea",label:"Enter Password",fullWidth:!0,required:!0,type:"password",value:m,onChange:function(e){return O(e.target.value)},style:{marginBottom:20}}),Object(U.jsx)(ye.a,{id:"standard-textarea",label:"Confirm Password",fullWidth:!0,required:!0,type:"password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:B,color:"primary",children:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){return m!==g?R("Your passwords do not match"):Pe.validatePassword(m)?void E():R("Password is invalid, please try again")},color:"primary",children:"Continue"})]})]})}):""]})}var gt=function(e){var t=r.a.useState(!0),n=Object(b.a)(t,2),a=n[0],c=n[1],i=r.a.useState(""),o=Object(b.a)(i,2),s=o[0],l=o[1],u=Object(p.b)();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:a,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Stoic Wallet"}),Object(U.jsx)(ke.a,{children:Object(U.jsx)(jt,{handler:function(t){switch(c(!1),t){case"create":l("tips");break;case"import":l("import");break;case"link":e.loader(!0),Pe.setup("ii").then((function(t){u({type:"createwallet",payload:{identity:t}}),e.loader(!1),c(!0),e.login()})).catch((function(t){e.loader(!1),c(!0)})).finally((function(){c(!0),e.loader(!1)}));break;case"connect":n="Hardware wallet support is coming soon!",e.alert("There was an error",n),c(!0)}var n}})})]}),Object(U.jsx)(yt,{alert:e.alert,initialRoute:s,cancel:function(e){l(""),c(!0)},submit:function(t,n){e.loader(!0),Pe.setup(t,n).then((function(t){u({type:"createwallet",payload:{identity:t}}),e.loader(!1),c(!0),e.login()})).catch((function(t){e.loader(!1),c(!0)})).finally((function(){c(!0),e.loader(!1)}))}})]})};var vt=function(e){var t=Object(p.c)((function(e){return e.currentPrincipal})),n=Object(p.c)((function(e){return e.principals.length?e.principals[t].identity:{}})),a=r.a.useState(!0),c=Object(b.a)(a,2),i=c[0],o=c[1],s=r.a.useState(""),l=Object(b.a)(s,2),u=l[0],d=l[1],j=function(t){e.alert("There was an error",t)},h=function(){e.confirm("Please confirm","You are about to clear your wallet, which will remove all data from this device. Are you sure you want to continue?").then((function(t){t&&e.remove()}))};return Object(U.jsxs)(U.Fragment,{children:["ii"==n.type?Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:i,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Unlock your Wallet"}),Object(U.jsx)(ke.a,{children:Object(U.jsx)(A.a,{component:"nav","aria-label":"secondary add principal",children:Object(U.jsxs)(S.a,{button:!0,onClick:function(){e.loader(!0),o(!1),Pe.unlock(n).then((function(t){e.login()})).catch((function(e){console.log(e)})).finally((function(){o(!0),e.loader(!1)}))},children:[Object(U.jsx)(I.a,{children:Object(U.jsx)(E.a,{})}),Object(U.jsx)(T.a,{primary:"Re-authenticate",secondary:"We need to authenticate your Internet Identity"})]})})}),Object(U.jsx)(ve.a,{children:Object(U.jsx)(xe.a,{onClick:h,color:"primary",children:"Clear Wallet"})})]}):"","private"==n.type?Object(U.jsxs)(ge.a,{hideBackdrop:!0,maxWidth:"sm",fullWidth:!0,open:i,children:[Object(U.jsx)(Ce.a,{id:"form-dialog-title",style:{textAlign:"center"},children:"Unlock your Wallet"}),Object(U.jsxs)(ke.a,{children:[Object(U.jsx)("p",{children:Object(U.jsx)("strong",{children:"Enter your password to unlock your wallet."})}),Object(U.jsx)(ye.a,{id:"standard-textarea",label:"Enter Password",fullWidth:!0,required:!0,type:"password",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:h,color:"primary",children:"Clear Wallet"}),Object(U.jsx)(xe.a,{onClick:function(){if(!Pe.validatePassword(u))return j("Password is invalid, please try again");e.loader(!0),o(!1),Pe.unlock(n,{password:u}).then((function(t){e.login()})).catch((function(e){return d(""),j("You entered an incorrect password")})).finally((function(){o(!0),e.loader(!1)}))},color:"primary",children:"Unlock"})]})]}):""]})},kt=n(462),wt=n(548);function Ct(e){var t;return Object(U.jsxs)(ge.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsx)(Ce.a,{id:"alert-dialog-title",children:e.title}),Object(U.jsx)(ke.a,{children:Object(U.jsx)(we.a,{id:"alert-dialog-description",children:e.message})}),Object(U.jsx)(ve.a,{children:Object(U.jsx)(xe.a,{onClick:function(){"undefined"!=typeof e.handler&&e.handler()},color:"primary",children:null!==(t=e.buttonLabel)&&void 0!==t?t:"OK"})})]})}function At(e){var t,n,a=function(t){"undefined"!=typeof e.handler&&e.handler(t)};return Object(U.jsxs)(ge.a,{open:e.open,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsx)(Ce.a,{id:"alert-dialog-title",children:e.title}),Object(U.jsx)(ke.a,{children:Object(U.jsx)(we.a,{id:"alert-dialog-description",children:e.message})}),Object(U.jsxs)(ve.a,{children:[Object(U.jsx)(xe.a,{onClick:function(){return a(!1)},color:"primary",children:null!==(t=e.buttonCancel)&&void 0!==t?t:"Cancel"}),Object(U.jsx)(xe.a,{onClick:function(){return a(!0)},color:"primary",children:null!==(n=e.buttonConfirm)&&void 0!==n?n:"Confirm"})]})]})}var St=Object(z.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),It={title:"",message:""};function Tt(){var e=St(),t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],i=r.a.useState(0),o=Object(b.a)(i,2),s=o[0],l=o[1],j=Object(p.c)((function(e){return e.principals})),h=Object(p.c)((function(e){return e.currentPrincipal})),f=Object(p.b)(),m=r.a.useState(It),O=Object(b.a)(m,2),x=O[0],y=O[1],g=r.a.useState(It),v=Object(b.a)(g,2),k=v[0],w=v[1],C=r.a.useState(!1),A=Object(b.a)(C,2),S=A[0],I=A[1],T=r.a.useState(!1),P=Object(b.a)(T,2),_=P[0],N=P[1],W=function(){E(!0),Pe.clear(j[h].identity).then((function(e){l(0),E(!1),setTimeout((function(){f({type:"removewallet"})}),1e3)}))},F=function(){0===j.length?l(0):Pe.load(j[h].identity).then((function(e){l(2)})).catch((function(e){l(1)}))},B=function(e,t,n){return new Promise(function(){var a=Object(d.a)(u.a.mark((function a(r,c){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:y({title:e,message:t,buttonLabel:n,handler:function(){I(!1),r(!0),setTimeout((function(){return y(It)}),100)}}),I(!0);case 2:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())},R=function(e,t,n,a){return new Promise(function(){var r=Object(d.a)(u.a.mark((function r(c,i){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:w({title:e,message:t,buttonCancel:n,buttonConfirm:a,handler:function(e){N(!1),c(e),setTimeout((function(){return w(It)}),100)}}),N(!0);case 2:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())};r.a.useEffect((function(){F()}),[]),r.a.useEffect((function(){F()}),[h,j]);var E=function(e){c(e)};return Object(U.jsxs)(U.Fragment,{children:[0===s?Object(U.jsx)(gt,{alert:B,confirm:R,login:F,loader:E}):1===s?Object(U.jsx)(vt,{alert:B,confirm:R,login:F,remove:W,loader:E}):Object(U.jsx)(st,{alert:B,confirm:R,logout:function(){E(!0),Pe.lock(j[h].identity).then((function(e){l(1),F()})).finally((function(){E(!1)}))},remove:W,loader:E}),Object(U.jsx)(kt.a,{className:e.backdrop,open:a,onClick:function(){return E(!1)},children:Object(U.jsx)(wt.a,{color:"inherit"})}),Object(U.jsx)(Ct,{open:S,title:x.title,message:x.message,buttonLabel:x.buttonLabel,handler:x.handler}),Object(U.jsx)(At,{open:_,title:k.title,message:k.message,buttonCancel:k.buttonCancel,buttonConfirm:k.buttonConfirm,handler:k.handler})]})}var Pt=n(17),_t=n(288),Nt={principals:[],addresses:[],currentPrincipal:0,currentAccount:0,currentToken:0};function Wt(){var e=localStorage.getItem("_db");if(e){e=JSON.parse(e);var t=!1;return Array.isArray(e)||(e=[[e],[],[0,0,0]],console.log("Converting old DB to new"),t=!0),2==e.length&&(e[2]=[0,0,0],t=!0),Nt.currentPrincipal=e[2][0],Nt.currentAccount=e[2][1],Nt.currentToken=e[2][2],Nt.addresses=e[1],e[0].map((function(e){var t={accounts:[],identity:e.identity};e.accounts.map((function(n,a){var r=[];r.push({id:"ryjl3-tyaaa-aaaaa-aaaba-cai",name:"Internet Computer",symbol:"ICP",decimals:8,type:"fungible"});var c=Object(Se.i)(e.identity.principal,a);n[1].map((function(e){return r.push(e),!0})),t.accounts.push({name:n[0],address:c,tokens:r})})),Nt.principals.push(t)})),t&&Rt(Nt),Nt}}function Ft(e){var t=[[{accounts:[["Main",[]]],identity:e}],[],[0,0,0]];return localStorage.setItem("_db",JSON.stringify(t)),Wt()}function Bt(){localStorage.removeItem("_db");var e={principals:[],addresses:[],currentPrincipal:0,currentAccount:0,currentToken:0};return Nt=e,e}function Rt(e){var t=[[],e.addresses,[Nt.currentPrincipal,Nt.currentAccount,Nt.currentToken]];return e.principals.map((function(e){var n={accounts:[],identity:e.identity};e.accounts.map((function(e){var t=[e.name,[]];e.tokens.map((function(e,n){return 0!==n&&(t[1].push({id:e.id,name:e.name,symbol:e.symbol,decimals:e.decimals}),!0)})),n.accounts.push(t)})),t[0].push(n)})),localStorage.setItem("_db",JSON.stringify(t)),Nt=e,e}Wt();var Et=Object(_t.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"removewallet":return Bt();case"createwallet":return Ft(t.payload.identity);case"currentPrincipal":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{currentToken:0,currentAccount:0,currentPrincipal:t.payload.index}));case"currentAccount":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{currentToken:0,currentAccount:t.payload.index}));case"currentToken":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{currentToken:t.payload.index}));case"principal/add":break;case"account/edit":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{principals:e.principals.map((function(n,a){return a==e.currentPrincipal?Object(Ge.a)(Object(Ge.a)({},n),{},{accounts:n.accounts.map((function(n,a){return a==e.currentAccount?Object(Ge.a)(Object(Ge.a)({},n),{},{name:t.payload.name}):n}))}):n}))}));case"account/add":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{principals:e.principals.map((function(n,a){return a==e.currentPrincipal?Object(Ge.a)(Object(Ge.a)({},n),{},{accounts:[].concat(Object(Pt.a)(n.accounts),[{name:"Account "+t.payload.id,address:Object(Se.i)(t.payload.principal,t.payload.id),tokens:[{name:"Internet Computer",symbol:"ICP",decimals:8}]}])}):n}))}));case"account/token/add":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{principals:e.principals.map((function(n,a){return a==e.currentPrincipal?Object(Ge.a)(Object(Ge.a)({},n),{},{accounts:n.accounts.map((function(n,a){return a==e.currentAccount?Object(Ge.a)(Object(Ge.a)({},n),{},{tokens:[].concat(Object(Pt.a)(n.tokens),[t.payload.metadata])}):n}))}):n}))}));case"addresses/add":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{addresses:[].concat(Object(Pt.a)(e.addresses),[t.payload])}));case"addresses/edit":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{addresses:e.addresses.map((function(e,n){return n==t.payload.index?{name:t.payload.name,address:t.payload.address}:e}))}));case"addresses/delete":return Rt(Object(Ge.a)(Object(Ge.a)({},e),{},{addresses:e.addresses.filter((function(e,n){return n!==t.payload}))}))}return e})),Lt=n(152),Mt=n(286),zt=Object(Mt.a)({palette:{primary:{main:"#003240"},secondary:{main:"#00b894"},error:{main:Lt.a.A400},background:{default:"#fafafa"}},overrides:{MuiIconButton:{label:{color:"#00b894"}},MuiAvatar:{colorDefault:{backgroundColor:"#00b894",color:"white"}},MuiListItemIcon:{root:{color:"#00b894"}}}});n(459);i.a.render(Object(U.jsx)(p.a,{store:Et,children:Object(U.jsxs)(s.a,{theme:zt,children:[Object(U.jsx)(o.a,{}),Object(U.jsx)(Tt,{})]})}),document.querySelector("#root"))},64:function(e,t,n){"use strict";(function(e){var a=n(12),r=n(13),c=n(17),i=n(14),o=(n(84),n(25)),s=n(276),l=n(278),u=n(279),d=n(187),b="ryjl3-tyaaa-aaaaa-aaaba-cai",j=new s.a,p=function(e){return Object(o.g)(e)&&64==e.length?{address:e}:{principal:i.d.fromText(e)}},h=function(t,n){var a=e("\ntid"),r=new Uint8Array([].concat(Object(c.a)(a),Object(c.a)(i.d.fromText(t).toBlob()),Object(c.a)(Object(o.j)(n))));return i.d.fromBlob(r).toText()},f=function(){function t(e,n){Object(a.a)(this,t),this._preloadedIdls={"ryjl3-tyaaa-aaaaa-aaaba-cai":l.a,"qz7gu-giaaa-aaaaf-qaaka-cai":u.a},this._metadata={LEDGER_CANISTER_ID:{name:"ICP",symbol:"ICP",decimals:8}},this._identity=!1,this._host=!1,this._agent=!1,this._canisters={},n&&(this._identity=n),e&&(this._host=e),this._makeAgent()}return Object(r.a)(t,[{key:"setIdentity",value:function(e){return this._identity=e||!1,this._makeAgent(),this}},{key:"setHost",value:function(e){return this._host=e||!1,this._makeAgent(),this}},{key:"canister",value:function(e,t){return t||(t=this._preloadedIdls.hasOwnProperty(e)?this._preloadedIdls[e]:d.a),this._canisters.hasOwnProperty(e)||(this._canisters[e]=i.a.createActor(t,{agent:this._agent,canisterId:e})),this._canisters[e]}},{key:"token",value:function(t,n){t||(t=b);var a=function(t){var n=Object(c.a)(i.d.fromText(t).toBlob()),a=n.splice(0,4);return Object(o.k)(a)!=Object(o.k)(e("\ntid"))?{index:0,canister:t,token:h(t,0)}:{index:Object(o.d)(n.splice(-4)),canister:i.d.fromBlob(n).toText(),token:t}}(t);n||(n=this._preloadedIdls.hasOwnProperty(a.canister)?this._preloadedIdls[a.canister]:d.a);var r=this.canister(a.canister,n);return{fee:function(){return new Promise((function(e,t){switch(a.canister){case b:e(1e4);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":e(1);break;default:e(0)}}))},getMetadata:function(){return new Promise((function(e,t){switch(a.canister){case b:e({name:"Internet Computer",symbol:"ICP",type:"fungible",decimals:8});break;case"qz7gu-giaaa-aaaaf-qaaka-cai":e({name:"HZLD",symbol:"HZLD",decimals:0,type:"fungible"});break;default:r.metadata(a.token).then((function(n){"undefined"!=typeof n.ok?"undefined"!=typeof n.ok.fungible?e({name:n.ok.fungible.name,symbol:n.ok.fungible.symbol,decimals:n.ok.fungible.decimals,metadata:n.ok.fungible.metadata,type:"fungible"}):e({metadata:n.ok.nonfungible.metadata,type:"nonfungible"}):"undefined"!=typeof n.err?t(n.err):t(n)})).catch(t)}}))},getBalance:function(e,t){return new Promise((function(n,c){switch(a.canister){case b:j.getAccountBalance(e).then((function(e){n(e)}));break;case"qz7gu-giaaa-aaaaf-qaaka-cai":var o={user:i.d.fromText(t)};r.getBalanceInsecure(o).then((function(e){var t=0==e.length?0:e[0];n(t)})).catch(c);break;default:o={user:p(e),token:a.token};r.balance(o).then((function(e){"undefined"!=typeof e.ok?n(e.ok):"undefined"!=typeof e.err?c(e.err):c(e)})).catch(c)}}))},getTransactions:function(e,t){return new Promise((function(t,n){switch(a.canister){case b:j.getTransactionsByAccount(e).then((function(e){Array.isArray(e)||t([]);var n=[];e.map((function(e){"TRANSACTION"==e.type&&"COMPLETED"==e.status&&n.push({from:e.account1Address,to:e.account2Address,amount:Number(e.amount)/Math.pow(10,8),fee:Number(e.fee)/Math.pow(10,8),hash:e.hash,timestamp:e.timestamp})})),t(n)})).catch(n);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":default:t([])}}))},transfer:function(e,n,c,s,l,u,d){return new Promise((function(j,h){switch(a.canister){case b:var f={from_subaccount:[Object(o.f)(null!==n&&void 0!==n?n:0)],to:c,amount:{e8s:s},fee:{e8s:l},memo:u?Number(BigInt(u)):0,created_at_time:[]};r.send_dfx(f).then((function(e){j(!0)})).catch(h);break;case"qz7gu-giaaa-aaaaf-qaaka-cai":f={to:i.d.fromText(c),metadata:[],from:i.d.fromText(e),amount:s};r.transfer(f).then((function(e){"undefined"!=typeof e.ok?j(!0):h(JSON.stringify(e.err))})).catch(h);break;default:f={token:t,from:{address:Object(o.i)(e,null!==n&&void 0!==n?n:0)},subaccount:[Object(o.f)(null!==n&&void 0!==n?n:0)],to:p(c),amount:s,fee:l,memo:Object(o.e)(u),notify:d};r.transfer(f).then((function(e){"undefined"!=typeof e.ok?j(!0):h(JSON.stringify(e.err))})).catch(h)}}))},mintCycles:function(){return new Promise((function(e,t){}))}}}},{key:"_makeAgent",value:function(){var e={};this._identity&&(e.identity=this._identity),this._host&&(e.host=this._host),this._agent=new i.c(e)}}]),t}(),m={connect:function(e,t){return new f(e,t)}};t.a=m}).call(this,n(5).Buffer)}},[[460,1,2]]]);
//# sourceMappingURL=main.bac2b5d7.chunk.js.map