{"version":3,"sources":["ic/utils.js","ic/neuron.js","ic/candid/ext.did.js","ic/extjs.js","ic/RosettaApi.js","ic/candid/ledger.did.js","ic/candid/governance.did.js","ic/candid/nns.did.js","ic/candid/hzld.did.js","ic/candid/advanced.did.js","components/Blockie.js","components/AccountDrawer.js","components/SnackbarButton.js","components/TokenCard.js","components/NFTCard.js","ic/secp256k1.js","ic/identity.js","utils.js","components/SendForm.js","components/TopupForm.js","components/Transactions.js","components/SendNFTForm.js","components/ListingForm.js","components/NFTList.js","components/MainFab.js","components/InputForm.js","components/AddTokenForm.js","views/AccountDetail.js","views/AddressBook.js","components/NeuronForm.js","components/Neuron.js","components/NeuronDelayForm.js","components/TopupNeuronForm.js","views/Neurons.js","components/RegisterTokenForm.js","views/TokenRegistry.js","views/Applications.js","components/ConnectList.js","components/WalletDialog.js","views/Settings.js","components/ListingBuyForm.js","components/Listing.js","views/Marketplace.js","containers/Wallet.js","containers/Connect.js","containers/Unlock.js","components/AlertDialog.js","components/ConfirmDialog.js","App.js","store.js","theme.js","index.js"],"names":["LEDGER_CANISTER_ID","GOVERNANCE_CANISTER_ID","NNS_CANISTER_ID","CYCLES_MINTING_CANISTER_ID","rosettaApi","RosettaApi","sjcl","require","bip39","pbkdf2","getCyclesTopupSubAccount","canisterId","pb","Array","from","Principal","fromText","toBlob","length","amountToBigInt","amount","decimals","BigInt","principalToAccountIdentifier","p","s","padding","Buffer","array","Uint8Array","getSubAccountArray","hash","sha224","checksum","to32bits","getCrc32","array2","toHexString","isArray","concat","fill","from32bits","ba","value","i","num","b","ArrayBuffer","DataView","setUint32","byteArray","byte","toString","slice","join","fromHexString","hex","substr","bytes","c","push","parseInt","mnemonicToId","mnemonic","seed","mnemonicToSeedSync","splice","Ed25519KeyIdentity","generate","encrypt","principal","password","Promise","resolve","reject","e","d","btoa","decrypt","data","atob","isHex","h","test","validateAddress","a","validatePrincipal","toText","getStakingAddress","nonce","shaObj","jsSha256","create","update","blobFromUint8Array","sha256","ICNeuron","constructor","neuronid","neurondata","identity","id","Error","this","extjs","connect","canister","from_sa","args","address","send_dfx","controller","memo","getTransactionsByAccount","then","rs","Number","claim_or_refresh_neuron_from_account","NeuronManager","getData","cmdBody","new_controller","res","manage_neuron","command","hasOwnProperty","JSON","stringify","error_message","commandArgs","amount_e8s","topic","neuron","cmdId","operation","seconds","dissolve_timestamp_seconds","to_account","scan","async","ns","list_neurons","include_neurons_readable_by_caller","neuron_ids","rns","full_neurons","map","n","nid","nn","neuron_infos","find","ndata","age","age_seconds","created","created_timestamp_seconds","dissolve_delay","dissolve_delay_seconds","retreived","retrieved_at_timestamp_seconds","state","voting_power","stake","cached_neuron_stake_e8s","maturity","maturity_e8s_equivalent","fees","neuron_fees_e8s","operator","account","sa","index","Math","floor","random","getPrincipal","stakingTo","nd","result","NeuronId","get","topics","IDL","TokenIndex","Nat32","AccountIdentifier","Text","AccountIdentifier_3","Metadata","Variant","Record","Nat8","Opt","Vec","TokenIdentifier","User","BalanceRequest","Balance","Nat","CommonError_2","BalanceResponse","TokenIdentifier_2","CommonError","Result_6","Time","Int","Listing","Nat64","Result_8","Tuple","User_2","Extension","HeaderField","HttpRequest","HttpResponse","Nat16","Result_7","SubAccount","SubAccount_3","ListRequest","Result_4","Null","Result_5","MintRequest","Balance_2","Result_3","Result_2","Memo","TransferRequest","Bool","TransferResponse","Service","Func","constructUser","u","tokenIdentifier","fromBlob","decodeTokenId","tid","token","_preloadedIdls","governanceIDL","ledgerIDL","hzldIDL","nnsIDL","extIDL","ExtConnection","host","_mapIdls","advancedIDL","_metadata","name","symbol","type","_identity","_host","_agent","_canisters","_makeAgent","idl","setIdentity","setHost","cid","Actor","createActor","agent","tokenObj","api","call","fee","getTokens","aid","tokens","r","ok","x","err","catch","getMetadata","metadata","fungible","nonfungible","getBearer","bearer","getDetails","details","getBalance","princpal","getAccountBalance","getBalanceInsecure","bal","balance","getTransactions","ts","_ts","_t","status","account1Address","to","account2Address","timestamp","reverse","list","price","transfer","from_principal","to_user","notify","console","log","bh","mintCycles","_to_sub","_to","block","e8s","notify_dfx","HttpAgent","encodeTokenId","toAddress","JSONbig","jsonBigint","strict","RosettaErrorType","Object","freeze","NotFound","Timeout","NetworkError","RosettaError","message","errorType","Transaction","rosettaTransaction","blockIndex","transaction_identifier","timestampMs","div","toNumber","Date","operations","BigNumber","isZero","negated","axios","baseURL","method","transformRequest","transformResponse","parse","headers","networkIdentifier","networksList","network_identifiers","blockchain","accountAddress","accountBalanceByAddress","response","balances","isAxiosError","undefined","networkStatus","current_block_identifier","transactionHash","transactionsByHash","responseTransactions","transactions","transaction","block_identifier","limit","maxBlockIndex","offset","max","transactionCount","min","getTransactionByBlock","transactionsByAccount","all","blockTransaction","blockByIndex","url","request","network_identifier","account_identifier","Duration","ArchiveOptions","ICPTs","AccountBalanceArgs","BlockHeight","NotifyCanisterArgs","TimeStamp","SendArgs","Proposal","Rec","Followees","NodeProvider","NetworkEconomics","RewardEvent","NeuronStakeTransfer","GovernanceError","Int32","Ballot","Tally","Spawn","Split","Follow","RemoveHotKey","AddHotKey","IncreaseDissolveDelay","SetDissolveTimestamp","Operation","Configure","RegisterVote","DisburseToNeuron","Amount","Disburse","Command","ManageNeuron","ExecuteNnsFunction","RewardToNeuron","RewardToAccount","RewardMode","RewardNodeProvider","SetDefaultFollowees","ApproveGenesisKyc","Change","AddOrRemoveNodeProvider","Motion","Action","ProposalData","ClaimOrRefreshNeuronFromAccount","Command_2","NeuronInFlightCommand","BallotInfo","DissolveState","Neuron","Result","Result_1","ClaimOrRefreshNeuronFromAccountResponse","NeuronInfo","ProposalInfo","ListNeurons","ListNeuronsResponse","ListProposalInfo","ListProposalInfoResponse","SpawnResponse","MakeProposalResponse","DisburseResponse","Command_1","ManageNeuronResponse","AttachCanisterRequest","AttachCanisterResponse","SubAccountDetails","CreateSubAccountResponse","DetachCanisterRequest","DetachCanisterResponse","HardwareWalletAccountDetails","AccountDetails","GetAccountResponse","CanisterDetails","Stats","GetTransactionsRequest","Timestamp","Send","Receive","Transfer","GetTransactionsResponse","RegisterHardwareWalletRequest","RegisterHardwareWalletResponse","RemoveHardwareWalletRequest","RemoveHardwareWalletResponse","RenameSubAccountRequest","RenameSubAccountResponse","OperatorAction","OperatorRequest","OperatorResponse","OrderId","Rate","Order","CurrencyPair","CancelOrderRequest","CancelOrderResponse","LimitOrderRequest","LimitOrderResponse","MarketOrderRequest","MarketOrderResponse","RegisterTokenRequest","style","width","height","Blockie","props","alt","src","makeBlockie","drawerWidth","useStyles","makeStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","zIndex","AccountDrawer","window","classes","useTheme","container","document","body","currentPrincipal","useSelector","accounts","principals","idtype","dispatch","useDispatch","accountsList","marginTop","marginBottom","backgroundColor","position","top","textAlign","className","maxHeight","Divider","List","ListItem","button","onClick","changeRoute","ListItemAvatar","Avatar","ListItemText","primaryTypographyProps","noWrap","secondaryTypographyProps","primary","secondary","nextid","payload","ListItemIcon","lockWallet","bottom","left","right","aria-label","Hidden","smUp","implementation","Drawer","variant","anchor","direction","open","onClose","paper","ModalProps","keepMounted","xsDown","SnackbarButton","setOpen","React","useState","handleClose","event","reason","cloneElement","children","Snackbar","autoHideDuration","anchorOrigin","action","Fragment","IconButton","size","color","fontSize","styles","root","selectedCard","card","title","pos","intervalId","TokenCard","setBalance","updateBalance","useEffect","setInterval","clearInterval","Grid","item","xl","lg","md","Card","selected","CardActionArea","CardContent","Typography","gutterBottom","NFTCard","currentAccount","nfts","ellipticcurve","Ecdsa","PrivateKey","PublicKey","stringToBytes","str","ch","st","re","charCodeAt","Secp256k1PublicKey","key","rawKey","derKey","fromDer","toDer","toRaw","Secp256k1KeyIdentity","SignIdentity","publicKey","_privateKey","super","_publicKey","fromRaw","pem","secretKey","fromPem","obj","publicKeyDer","privateKeyDer","blobFromHex","json","parsed","fromParsedJson","pk","privateKey","toJSON","blobToHex","getKeyPair","getPublicKey","challenge","blob","blobFromBuffer","signature","sign","ra","bigintConversion","tweetnacl","identities","openlogin","oauths","loadOpenLogin","OpenLogin","clientId","network","uxMode","init","processId","isLoaded","StoicIdentity","getIdentity","setup","optdata","auth","AuthClient","login","maxTimeToLive","identityProvider","onSuccess","onError","localStorage","setItem","_em","ems","getItem","indexOf","privKey","logout","loginProvider","load","_id","t","unlock","em","nems","lock","removeItem","clear","change","validateMnemonic","generateMnemonic","validatePassword","identityTypes","clipboardCopy","text","navigator","clipboard","writeText","error","textArea","createElement","appendChild","focus","select","msg","execCommand","removeChild","fallbackCopyTextToClipboard","compressAddress","pp","split","SendForm","addresses","step","setStep","setAmount","minFee","setMinFee","setFee","setTo","toOption","setToOption","advanced","setAdvanced","setMemo","setNotify","contacts","setContacts","f","forEach","el","group","Dialog","maxWidth","fullWidth","DialogTitle","DialogContent","DialogContentText","fontWeight","Autocomplete","freeSolo","onChange","v","inputValue","onInputChange","getOptionLabel","contact","groupBy","options","renderInput","params","TextField","autoFocus","margin","label","InputLabelProps","shrink","marginRight","target","cursor","href","multiline","rows","rowsMax","FormControlLabel","control","Switch","checked","DialogActions","Button","isNaN","_from_principal","_from_sa","_to_user","_amount","round","_fee","_memo","_notify","loader","alert","finally","TopupForm","rate","setRate","get_icp_to_cycles_conversion_rate","_canister","formatNumber","toFixed","replace","Transactions","setTransactions","page","setPage","empty","table","minWidth","stopPoll","startPoll","fetchTx","_address","txs","setTimeout","paragraph","paddingTop","align","Pagination","float","count","ceil","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","filter","tx","scope","relative","autoUpdate","date","rel","SendNFTForm","close","nft","ListingForm","setPrice","_submit","_price","handleRefresh","nftMap","_showListingPrice","allowedPrincipals","NFTList","setNfts","tokenDetails","setTokenDetails","openNFTForm","setOpenNFTForm","openListingForm","setOpenListingForm","tokenNFT","setTokenNFT","deleteNft","confirm","getTokenDetails","refresh","newDetails","_nfts","listing","listingText","locked","vertical","horizontal","edge","Tooltip","sendNft","spacing","MainFab","Fab","InputForm","setValue","defaultValue","secondaryValue","setSecondaryValue","defaultSecondaryValue","aria-labelledby","content","inputLabel","secondaryInput","buttonLabel","AddTokenForm","tabValue","setTabValue","submit","Tabs","indicatorColor","textColor","Tab","AccountDetail","currentToken","apps","setTokens","windowUrl","location","search","URLSearchParams","addEventListener","source","opener","app","origin","authResponse","apikey","postMessage","flexGrow","grid","m","changeToken","_addToken","checkBearer","paddingLeft","overflow","textOverflow","ListItemSecondaryAction","justifyContent","alignItems","findIndex","nt","ct","trustedCanisters","ps","marginLeft","inset","AddressBook","largeIcon","editAddress","NeuronForm","subaccount","setSubaccount","anchorEl","setAnchorEl","_formatDateHelper","closeMenu","startDissolving","stopDissolving","disburse","spawn","currentDelay","increasedDelay","showNeuronDelayForm","increaseDissolveDelay","topupamount","showNeuronTopupForm","topup","formatDate","sm","CardHeader","currentTarget","Boolean","MenuItem","subheader","justify","CircularProgress","NeuronDelayForm","delay","setDelay","period","setPeriod","FormControl","InputLabel","Select","onSubmit","cb","Neurons","neurons","neuronDelayOpen","setNeuronDelayOpen","neuronTopupOpen","setNeuronTopupOpen","neuronCurrentDelay","setNeuronCurrentDelay","scanNeurons","neuronDelayClose","neuronTopupClose","RegisterTokenForm","setName","setSymbol","setDecimals","supply","setSupply","formatTokenBalance","TokenRegistry","tokenRegistry","tr","registerToken","owner","tokenId","Applications","deleteApp","ConnectList","handleClick","handler","add","tips","WalletDialog","route","setRoute","initialRoute","newMnemonic","setNewMnemonic","setMnemonic","setPassword","password2","setPassword2","setAddress","tipsIndex","setTipsIndex","openFileSelector","filesContent","useFilePicker","accept","multiple","od","cancel","directuath","clearState","hideBackdrop","w","display","required","Settings","assets","setAssets","setInitialRoute","makeAssets","ListSubheader","changePrincipal","deletePrincipal","clearWallet","ListingBuyForm","imgLoaded","setImgLoaded","tokenid","xs","onLoad","Skeleton","now","acc","showListingBuyForm","bs","_getRandomBytes","paytoaddress","settle","refreshListings","intv","appBar","menuButton","toolbarButtons","routes","view","listings","setListings","listingBuyFormOpen","setListingBuyFormOpen","_extractFunds","_api","payments","payment","listingBuyFormClose","Wallet","mobileOpen","setMobileOpen","toolbarTitle","setToolbarTitle","handleDrawerToggle","remove","CssBaseline","AppBar","Toolbar","renderView","Connect","Unlock","changeDialog","setChangeDialog","fsobj","iiLogin","first","rest","locale","language","toLocaleUpperCase","capitalizeFirstLetter","AlertDialog","aria-describedby","ConfirmDialog","buttonCancel","buttonConfirm","backdrop","emptyAlert","App","loaderOpen","setLoaderOpen","appState","setAppState","alertData","setAlertData","confirmData","setConfirmData","showAlert","setShowAlert","showConfirm","setShowConfirm","l","Backdrop","appData","initDb","db","savenow","_principal","saveDb","newState","updatedDb","_p","_a","store","createStore","ii","clearDb","tc","newDb","cp","createTheme","palette","main","red","A400","background","default","overrides","MuiCssBaseline","backgroundImage","MuiIconButton","MuiAvatar","colorDefault","MuiListItemIcon","hex2buf","substring","buf2hex","buffer","padStart","sendMessageToExtension","success","parent","listener","verify","sig","encdata","TextEncoder","encode","pubk","crypto","subtle","importKey","namedCurve","getState","signed","chain","getDelegation","ReactDOM","render","ThemeProvider","querySelector"],"mappings":"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","file":"static/js/main.067c3f8e.chunk.js","sourcesContent":["/* global BigInt */\r\nimport { Principal } from \"@dfinity/agent\";  \r\nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\r\nimport { getCrc32 } from '@dfinity/agent/lib/esm/utils/getCrc';\r\nimport { sha224 } from '@dfinity/agent/lib/esm/utils/sha224';\r\nimport RosettaApi from './RosettaApi.js';\r\nconst LEDGER_CANISTER_ID = \"ryjl3-tyaaa-aaaaa-aaaba-cai\";\r\nconst GOVERNANCE_CANISTER_ID = \"rrkah-fqaaa-aaaaa-aaaaq-cai\";\r\nconst NNS_CANISTER_ID = \"qoctq-giaaa-aaaaa-aaaea-cai\";\r\nconst CYCLES_MINTING_CANISTER_ID = \"rkp4c-7iaaa-aaaaa-aaaca-cai\";\r\nconst rosettaApi = new RosettaApi();\r\nconst sjcl = require('sjcl')\r\nconst bip39 = require('bip39')\r\nconst pbkdf2 = require(\"pbkdf2\");\r\n\r\nconst getCyclesTopupAddress = (canisterId) => {\r\n  return principalToAccountIdentifier(CYCLES_MINTING_CANISTER_ID, getCyclesTopupSubAccount(canisterId));\r\n}\r\nconst getCyclesTopupSubAccount = (canisterId) => {\r\n  var pb = Array.from(Principal.fromText(canisterId).toBlob());\r\n  return [pb.length, ...pb];\r\n}\r\nconst amountToBigInt = (amount, decimals) => {\r\n  //decimals = decimals ?? 8;\r\n  if (amount < 1) {\r\n    amount = BigInt(amount*(10**decimals));\r\n  } else {\r\n    amount = BigInt(amount)*BigInt(10**decimals)\r\n  }\r\n  return amount;\r\n}\r\nconst principalToAccountIdentifier = (p, s) => {\r\n  const padding = Buffer(\"\\x0Aaccount-id\");\r\n  const array = new Uint8Array([\r\n      ...padding,\r\n      ...Principal.fromText(p).toBlob(),\r\n      ...getSubAccountArray(s)\r\n  ]);\r\n  const hash = sha224(array);\r\n  const checksum = to32bits(getCrc32(hash));\r\n  const array2 = new Uint8Array([\r\n      ...checksum,\r\n      ...hash\r\n  ]);\r\n  return toHexString(array2);\r\n};\r\nconst getSubAccountArray = (s) => {\r\n  if (Array.isArray(s)){\r\n    return s.concat(Array(32-s.length).fill(0));\r\n  } else {\r\n    //32 bit number only\r\n    return Array(28).fill(0).concat(to32bits(s ? s : 0))\r\n  }\r\n};\r\nconst from32bits = ba => {\r\n  var value;\r\n  for (var i = 0; i < 4; i++) {\r\n    value = (value << 8) | ba[i];\r\n  }\r\n  return value;\r\n}\r\nconst to32bits = num => {\r\n  let b = new ArrayBuffer(4);\r\n  new DataView(b).setUint32(0, num);\r\n  return Array.from(new Uint8Array(b));\r\n}\r\nconst toHexString = (byteArray)  =>{\r\n  return Array.from(byteArray, function(byte) {\r\n    return ('0' + (byte & 0xFF).toString(16)).slice(-2);\r\n  }).join('')\r\n}\r\nconst fromHexString = (hex) => {\r\n  if (hex.substr(0,2) === \"0x\") hex = hex.substr(2);\r\n  for (var bytes = [], c = 0; c < hex.length; c += 2)\r\n  bytes.push(parseInt(hex.substr(c, 2), 16));\r\n  return bytes;\r\n}\r\nconst mnemonicToId = (mnemonic) => {\r\n  var seed = bip39.mnemonicToSeedSync(mnemonic);\r\n  seed = Array.from(seed);\r\n  seed = seed.splice(0, 32);\r\n  seed = new Uint8Array(seed);\r\n  return Ed25519KeyIdentity.generate(seed);\r\n}\r\nconst encrypt = (mnemonic, principal, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    pbkdf2.pbkdf2(password, principal, 30000, 512, 'sha512', (e, d) => {\r\n      if (e) return reject(e);\r\n      resolve(sjcl.encrypt(d.toString(), btoa(mnemonic)));\r\n    });\r\n  });\r\n}\r\nconst decrypt = (data, principal, password) => {\r\n  return new Promise((resolve, reject) => {\r\n    pbkdf2.pbkdf2(password, principal, 30000, 512, 'sha512', (e, d) => {\r\n      if (e) return reject(e);\r\n      try{\r\n        resolve(atob(sjcl.decrypt(d.toString(), data)));\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  });\r\n}\r\nconst isHex = (h) => {\r\n  var regexp = /^[0-9a-fA-F]+$/;\r\n  return regexp.test(h);\r\n};\r\nconst validateAddress = (a) => {\r\n  return (isHex(a) && a.length === 64)\r\n}\r\nconst validatePrincipal = (p) => {\r\n  try {\r\n    return (p === Principal.fromText(p).toText());\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\nexport { \r\n  LEDGER_CANISTER_ID, \r\n  GOVERNANCE_CANISTER_ID, \r\n  NNS_CANISTER_ID, \r\n  CYCLES_MINTING_CANISTER_ID, \r\n  getCyclesTopupAddress, \r\n  getCyclesTopupSubAccount, \r\n  amountToBigInt, \r\n  rosettaApi, \r\n  Principal, \r\n  principalToAccountIdentifier, \r\n  getSubAccountArray, \r\n  from32bits, \r\n  to32bits, \r\n  toHexString, \r\n  fromHexString, \r\n  mnemonicToId, \r\n  encrypt, \r\n  decrypt, \r\n  isHex,\r\n  bip39,\r\n  validateAddress,\r\n  validatePrincipal  };","/* global BigInt */\nimport { Principal } from \"@dfinity/agent\";  \nimport { GOVERNANCE_CANISTER_ID, LEDGER_CANISTER_ID, rosettaApi, amountToBigInt, principalToAccountIdentifier, toHexString, to32bits, getSubAccountArray } from \"./utils.js\";\nimport extjs from \"./extjs.js\";\nimport { sha256 as jsSha256 } from 'js-sha256';\nimport { blobFromUint8Array } from '@dfinity/agent/lib/esm/types';\n//import {StoicIdentity} from \"./identity.js\";\n\nconst topics = [\n  [\"All topics\", 0],\n  [\"Neuron Management\", 1],\n  [\"Exchange Rate\", 2],\n  [\"Network Economics\", 3],\n  [\"Governance\", 4],\n  [\"Node Admin\", 5],\n  [\"Participant Management\", 6],\n  [\"Subnet Management\", 7],\n  [\"Network Canister Management\", 8],\n  [\"KYC\", 9],\n  [\"Node Proivuder Rewards\", 10],\n];\nconst sha256 = (data) => {\n    const shaObj = jsSha256.create();\n    shaObj.update(data);\n    return blobFromUint8Array(new Uint8Array(shaObj.array()));\n}\nconst getStakingAddress = (principal, nonce) => {\n  if (typeof nonce == 'string') nonce = Buffer(nonce);\n  if (nonce.length > 8) return false;\n  const array = new Uint8Array([\n      [0x0c],\n      ...Buffer(\"neuron-stake\"),\n      ...Principal.fromText(principal).toBlob(),\n      ...nonce\n  ]);\n  const hash = sha256(array);\n  return principalToAccountIdentifier(GOVERNANCE_CANISTER_ID, Array.from(hash));\n}\nclass ICNeuron {\n  #api = false;\n  #identity = false;\n  neuronid = 0;\n  id = 0;\n  data = {};\n  constructor(neuronid, neurondata, identity) {\n    if (!neuronid) throw new Error(\"NeuronID is required\");\n    if (!identity) throw new Error(\"Identity is required\");\n    this.neuronid = neuronid;\n    this.id = neuronid.toString();\n    this.#identity = identity;\n    this.data = neurondata;\n    this.#api = extjs.connect(\"https://boundary.ic0.app/\", this.#identity).canister(GOVERNANCE_CANISTER_ID);\n  };\n  async topup(from_sa, amount) {\n    var args = {\n      \"from_subaccount\" : [getSubAccountArray(from_sa ?? 0)], \n      \"to\" : this.data.address,\n      \"amount\" : { \"e8s\" : amountToBigInt(amount, 8) },\n      \"fee\" : { \"e8s\" : 10000n }, \n      \"memo\" : 0, \n      \"created_at_time\" : []\n    }\n    await extjs.connect(\"https://boundary.ic0.app/\", this.#identity).canister(LEDGER_CANISTER_ID).send_dfx(args);\n    var memo = await rosettaApi.getTransactionsByAccount(this.data.address).then(rs => Number(rs[0].memo));\n    args = {\n      controller : [], \n      memo : memo\n    };\n    await extjs.connect(\"https://boundary.ic0.app/\", this.#identity).canister(GOVERNANCE_CANISTER_ID).claim_or_refresh_neuron_from_account(args);\n    return true;\n  }\n  async update() {\n    this.data = await NeuronManager.getData(this.neuronid, this.#identity);\n    return this.data;\n  };\n  async spawn() { //TODO TEST\n    var commandArgs = {\n      new_controller  : []\n    };\n    var cmdId = \"Spawn\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async split(amount) { //TODO TEST\n    var commandArgs = {\n      amount_e8s   : BigInt(amount) * BigInt(10**8)\n    };\n    var cmdId = \"Split\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async follow(topic, neuron) {\n    var commandArgs = {\n      topic : BigInt(topic),\n      \"followees\" : [{id : BigInt(neuron)}]\n    };\n    var cmdId = \"Follow\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async startDissolving() {\n    var commandArgs = {\n      operation  : [{\"StartDissolving\" : {}}]\n    };\n    var cmdId = \"Configure\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async stopDissolving() {\n    var commandArgs = {\n      operation  : [{\"StopDissolving\" : {}}]\n    };\n    var cmdId = \"Configure\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async increaseDissolveDelay(seconds) {\n    var commandArgs = {\n      operation  : [{\"IncreaseDissolveDelay\" : {\n        \"additional_dissolve_delay_seconds\" : BigInt(seconds)\n      }}]\n    };\n    var cmdId = \"Configure\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async setDissolveTime(seconds) {//not really needed\n    var commandArgs = {\n      operation  : [{\"SetDissolveTimestamp\" : {\n        dissolve_timestamp_seconds  : BigInt(seconds)\n      }}]\n    };\n    var cmdId = \"Configure\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n  async disburse() {\n    var commandArgs = {\n      to_account   : [],\n      amount   : []\n    };\n    var cmdId = \"Disburse\";\n    var cmdBody = {};\n    cmdBody[cmdId] = commandArgs;\n    var res = await this.#api.manage_neuron({\n      id : [{id : this.neuronid}],\n      command : [cmdBody]\n    });\n    if (res.command[0].hasOwnProperty('Error')) throw new Error(\"Error:\" + JSON.stringify(res.command[0].Error.error_message));\n    else return res.command[0][cmdId];\n  };\n};\nconst NeuronManager = {\n  scan : async (id) => {\n    var ns = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(GOVERNANCE_CANISTER_ID).list_neurons({\n      include_neurons_readable_by_caller  : true,\n      neuron_ids : []\n    })\n    var rns = []\n    ns.full_neurons.map((n, i) => {\n      var nid = n.id[0].id;\n      var nn = ns.neuron_infos.find(e => {\n        return (e[0] === nid);\n      })[1];\n      var ndata = {\n        age : nn.age_seconds,\n        created : nn.created_timestamp_seconds,\n        dissolve_delay : nn.dissolve_delay_seconds,\n        retreived : nn.retrieved_at_timestamp_seconds,\n        state : nn.state,\n        voting_power : nn.voting_power,\n        stake : n.cached_neuron_stake_e8s,\n        maturity : n.maturity_e8s_equivalent,\n        fees : n.neuron_fees_e8s,\n        operator : true,\n        address : principalToAccountIdentifier(GOVERNANCE_CANISTER_ID, n.account),\n      };\n      rns.push(new ICNeuron(nid, ndata, id));\n      return true;\n    });\n    return rns;\n  },\n  create : async (amount, id, sa) => {\n    var index = Math.floor(Math.random()*4294967296);\n    if (amount < 1) return false;\n    var principal = id.getPrincipal();\n    var nonce = Array(4).fill(0).concat(to32bits(index));\n    var memo = BigInt(\"0x\"+toHexString(nonce));\n    var stakingTo = getStakingAddress(principal.toText(), nonce);\n    var args = {\n      \"from_subaccount\" : [getSubAccountArray(sa ?? 0)], \n      \"to\" : stakingTo,\n      \"amount\" : { \"e8s\" : amountToBigInt(amount, 8) },\n      \"fee\" : { \"e8s\" : 10000n }, \n      \"memo\" : Number(memo), \n      \"created_at_time\" : []\n    }\n    \n    //Call\n    await extjs.connect(\"https://boundary.ic0.app/\", id).canister(LEDGER_CANISTER_ID).send_dfx(args);\n    args = {\n      controller : [principal], \n      memo : Number(memo)\n    };\n\n    //Call\n    var nd = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(GOVERNANCE_CANISTER_ID).claim_or_refresh_neuron_from_account(args);\n    if (nd.result[0].hasOwnProperty(\"Error\")) {\n      throw new Error(\"Error: \" + JSON.stringify(nd.result[0].Error));\n    }\n    var neuronid = nd.result[0].NeuronId.id;\n    return await NeuronManager.get(neuronid, id);\n  },\n  get : async (neuronid, id) => {\n    var ndata = await NeuronManager.getData(neuronid, id);\n    return new ICNeuron(neuronid, ndata, id);\n  },\n  getData : async (neuronid, id) => {\n    var ns = await extjs.connect(\"https://boundary.ic0.app/\", id).canister(GOVERNANCE_CANISTER_ID).list_neurons({\n      neuron_ids : [neuronid],\n      include_neurons_readable_by_caller  : false,\n    });\n    var ndata = {\n      operator : false,\n      age : ns.neuron_infos[0][1].age_seconds,\n      created : ns.neuron_infos[0][1].created_timestamp_seconds,\n      dissolve_delay : ns.neuron_infos[0][1].dissolve_delay_seconds,\n      retreived : ns.neuron_infos[0][1].retrieved_at_timestamp_seconds,\n      state : ns.neuron_infos[0][1].state,\n      voting_power : ns.neuron_infos[0][1].voting_power\n    };\n    if (ns.full_neurons.length === 1) {\n      ndata['stake'] = ns.full_neurons[0].cached_neuron_stake_e8s;\n      ndata['maturity'] = ns.full_neurons[0].maturity_e8s_equivalent;\n      ndata['fees'] = ns.full_neurons[0].neuron_fees_e8s;\n      ndata['operator'] = true;\n      ndata['address'] = principalToAccountIdentifier(GOVERNANCE_CANISTER_ID, ns.full_neurons[0].account);\n    }\n    return ndata;\n  },\n  topics : topics\n};\nexport default NeuronManager;\n\n","export default ({ IDL }) => {\n  const TokenIndex_2 = IDL.Nat32;\n  const TokenIndex = TokenIndex_2;\n  const AccountIdentifier_2 = IDL.Text;\n  const AccountIdentifier = AccountIdentifier_2;\n  const AccountIdentifier_3 = AccountIdentifier;\n  const Metadata_2 = IDL.Variant({\n    'fungible' : IDL.Record({\n      'decimals' : IDL.Nat8,\n      'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)),\n      'name' : IDL.Text,\n      'symbol' : IDL.Text,\n    }),\n    'nonfungible' : IDL.Record({ 'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)) }),\n  });\n  const Metadata = Metadata_2;\n  const TokenIdentifier = IDL.Text;\n  const User = IDL.Variant({\n    'principal' : IDL.Principal,\n    'address' : AccountIdentifier,\n  });\n  const BalanceRequest_2 = IDL.Record({\n    'token' : TokenIdentifier,\n    'user' : User,\n  });\n  const BalanceRequest = BalanceRequest_2;\n  const Balance = IDL.Nat;\n  const CommonError_2 = IDL.Variant({\n    'InvalidToken' : TokenIdentifier,\n    'Other' : IDL.Text,\n  });\n  const Result_9 = IDL.Variant({ 'ok' : Balance, 'err' : CommonError_2 });\n  const BalanceResponse_2 = Result_9;\n  const BalanceResponse = BalanceResponse_2;\n  const TokenIdentifier_2 = TokenIdentifier;\n  const CommonError = CommonError_2;\n  const Result_6 = IDL.Variant({\n    'ok' : AccountIdentifier_3,\n    'err' : CommonError,\n  });\n  const Time_2 = IDL.Int;\n  const Time = Time_2;\n  const Listing = IDL.Record({\n    'locked' : IDL.Opt(Time),\n    'seller' : IDL.Principal,\n    'price' : IDL.Nat64,\n  });\n  const Result_8 = IDL.Variant({\n    'ok' : IDL.Tuple(AccountIdentifier_3, IDL.Opt(Listing)),\n    'err' : CommonError,\n  });\n  const User_2 = User;\n  const Extension_2 = IDL.Text;\n  const Extension = Extension_2;\n  const HeaderField = IDL.Tuple(IDL.Text, IDL.Text);\n  const HttpRequest = IDL.Record({\n    'url' : IDL.Text,\n    'method' : IDL.Text,\n    'body' : IDL.Vec(IDL.Nat8),\n    'headers' : IDL.Vec(HeaderField),\n  });\n  const HttpResponse = IDL.Record({\n    'body' : IDL.Vec(IDL.Nat8),\n    'headers' : IDL.Vec(HeaderField),\n    'status_code' : IDL.Nat16,\n  });\n  const Result_7 = IDL.Variant({ 'ok' : TokenIndex, 'err' : CommonError });\n  const SubAccount_2 = IDL.Vec(IDL.Nat8);\n  const SubAccount = SubAccount_2;\n  const SubAccount_3 = SubAccount;\n  const ListRequest = IDL.Record({\n    'token' : TokenIdentifier_2,\n    'from_subaccount' : IDL.Opt(SubAccount_3),\n    'price' : IDL.Opt(IDL.Nat64),\n  });\n  const Result_4 = IDL.Variant({ 'ok' : IDL.Null, 'err' : CommonError });\n  const Result_5 = IDL.Variant({ 'ok' : Metadata, 'err' : CommonError });\n  const MintRequest_2 = IDL.Record({\n    'to' : User,\n    'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)),\n  });\n  const MintRequest = MintRequest_2;\n  const Balance_2 = Balance;\n  const Result_3 = IDL.Variant({ 'ok' : Balance_2, 'err' : CommonError });\n  const Result_2 = IDL.Variant({\n    'ok' : IDL.Vec(TokenIndex),\n    'err' : CommonError,\n  });\n  const Memo = IDL.Vec(IDL.Nat8);\n  const TransferRequest_2 = IDL.Record({\n    'to' : User,\n    'token' : TokenIdentifier,\n    'notify' : IDL.Bool,\n    'from' : User,\n    'memo' : Memo,\n    'subaccount' : IDL.Opt(SubAccount),\n    'amount' : Balance,\n  });\n  const TransferRequest = TransferRequest_2;\n  const Result = IDL.Variant({\n    'ok' : Balance,\n    'err' : IDL.Variant({\n      'CannotNotify' : AccountIdentifier,\n      'InsufficientBalance' : IDL.Null,\n      'InvalidToken' : TokenIdentifier,\n      'Rejected' : IDL.Null,\n      'Unauthorized' : AccountIdentifier,\n      'Other' : IDL.Text,\n    }),\n  });\n  const TransferResponse_2 = Result;\n  const TransferResponse = TransferResponse_2;\n  const erc721_token = IDL.Service({\n    'acceptCycles' : IDL.Func([], [], []),\n    'availableCycles' : IDL.Func([], [IDL.Nat], ['query']),\n    'backup' : IDL.Func(\n        [],\n        [\n          IDL.Vec(IDL.Tuple(TokenIndex, AccountIdentifier_3)),\n          IDL.Vec(IDL.Tuple(AccountIdentifier_3, IDL.Vec(TokenIndex))),\n          IDL.Vec(IDL.Tuple(TokenIndex, Metadata)),\n        ],\n        ['query'],\n      ),\n    'balance' : IDL.Func([BalanceRequest], [BalanceResponse], ['query']),\n    'bearer' : IDL.Func([TokenIdentifier_2], [Result_6], ['query']),\n    'details' : IDL.Func([TokenIdentifier_2], [Result_8], ['query']),\n    'disribute' : IDL.Func([User_2], [], []),\n    'extensions' : IDL.Func([], [IDL.Vec(Extension)], ['query']),\n    'freeGift' : IDL.Func([AccountIdentifier_3], [IDL.Opt(TokenIndex)], []),\n    'getBuyers' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(AccountIdentifier_3, IDL.Vec(TokenIndex)))],\n        ['query'],\n      ),\n    'getMinted' : IDL.Func([], [TokenIndex], ['query']),\n    'getMinter' : IDL.Func([], [IDL.Principal], ['query']),\n    'getRegistry' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, AccountIdentifier_3))],\n        ['query'],\n      ),\n    'getSold' : IDL.Func([], [TokenIndex], ['query']),\n    'getTokens' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, Metadata))],\n        ['query'],\n      ),\n    'http_request' : IDL.Func([HttpRequest], [HttpResponse], ['query']),\n    'index' : IDL.Func([TokenIdentifier_2], [Result_7], ['query']),\n    'list' : IDL.Func([ListRequest], [Result_4], []),\n    'listings' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, Listing, Metadata))],\n        ['query'],\n      ),\n    'lock' : IDL.Func(\n        [TokenIdentifier_2, AccountIdentifier_3, SubAccount_3],\n        [Result_6],\n        [],\n      ),\n    'metadata' : IDL.Func([TokenIdentifier_2], [Result_5], ['query']),\n    'mintNFT' : IDL.Func([MintRequest], [TokenIndex], []),\n    'payments' : IDL.Func([], [IDL.Opt(IDL.Vec(SubAccount_3))], ['query']),\n    'setMinter' : IDL.Func([IDL.Principal], [], []),\n    'settle' : IDL.Func([TokenIdentifier_2], [Result_4], []),\n    'settlements' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, AccountIdentifier_3, IDL.Nat64))],\n        ['query'],\n      ),\n    'supply' : IDL.Func([TokenIdentifier_2], [Result_3], ['query']),\n    'tokens' : IDL.Func([AccountIdentifier_3], [Result_2], ['query']),\n    'transfer' : IDL.Func([TransferRequest], [TransferResponse], []),\n  });\n  return erc721_token;\n};\nexport const init = ({ IDL }) => { return []; };","/* global BigInt */\r\nimport { Actor, HttpAgent, Principal } from \"@dfinity/agent\";  \r\nimport { LEDGER_CANISTER_ID, GOVERNANCE_CANISTER_ID, NNS_CANISTER_ID, CYCLES_MINTING_CANISTER_ID, getCyclesTopupSubAccount, rosettaApi, principalToAccountIdentifier, toHexString, from32bits, to32bits, isHex, getSubAccountArray, fromHexString } from \"./utils.js\";\r\n\r\nimport ledgerIDL from './candid/ledger.did.js';\r\nimport governanceIDL from './candid/governance.did.js';\r\nimport nnsIDL from './candid/nns.did.js';\r\nimport hzldIDL from './candid/hzld.did.js'; //hardcode to hzld...\r\nimport extIDL from './candid/ext.did.js';\r\nimport advancedIDL from './candid/advanced.did.js';\r\n//import cronicsIDL from './candid/cronics.did.js';\r\n\r\nconst constructUser = (u) => {\r\n  if (isHex(u) && u.length === 64) {\r\n    return { 'address' : u };\r\n  } else {\r\n    return { 'principal' : Principal.fromText(u) };\r\n  };\r\n};\r\nconst tokenIdentifier = (principal, index) => {\r\n  const padding = Buffer(\"\\x0Atid\");\r\n  const array = new Uint8Array([\r\n      ...padding,\r\n      ...Principal.fromText(principal).toBlob(),\r\n      ...to32bits(index),\r\n  ]);\r\n  return Principal.fromBlob(array).toText();\r\n};\r\nconst decodeTokenId = (tid) => {\r\n  var p = [...Principal.fromText(tid).toBlob()];\r\n  var padding = p.splice(0, 4);\r\n  if (toHexString(padding) !== toHexString(Buffer(\"\\x0Atid\"))) {\r\n    return {\r\n      index : 0,\r\n      canister : tid,\r\n      token : tokenIdentifier(tid, 0)\r\n    };\r\n  } else {\r\n    return {\r\n      index : from32bits(p.splice(-4)), \r\n      canister : Principal.fromBlob(p).toText(),\r\n      token : tid\r\n    };\r\n  }\r\n};\r\n\r\n//Preload IDLS against a common name\r\nconst _preloadedIdls = {\r\n  'governance' : governanceIDL,\r\n  'ledger' : ledgerIDL,\r\n  'hzld' : hzldIDL,\r\n  'nns' : nnsIDL,\r\n  'ext' : extIDL,\r\n  'default' : extIDL,\r\n};\r\n\r\nclass ExtConnection {\r\n  //map known canisters to preloaded IDLs\r\n  _mapIdls = {\r\n    [LEDGER_CANISTER_ID] : _preloadedIdls['ledger'],\r\n    [GOVERNANCE_CANISTER_ID] : _preloadedIdls['governance'],\r\n    [NNS_CANISTER_ID] : _preloadedIdls['nns'],\r\n    \"qz7gu-giaaa-aaaaf-qaaka-cai\" : _preloadedIdls['hzld'],\r\n    \"kxh4l-cyaaa-aaaah-qadaq-cai\" : advancedIDL,\r\n    //\"e3izy-jiaaa-aaaah-qacbq-cai\" : cronicsIDL,\r\n  };\r\n  _metadata = {\r\n    [LEDGER_CANISTER_ID] : {\r\n      name : \"ICP\",\r\n      symbol : \"ICP\",\r\n      decimals : 8,\r\n      type : 'fungible',\r\n    },\r\n    \"qz7gu-giaaa-aaaaf-qaaka-cai\" : {\r\n      name : \"HZLD\",\r\n      symbol : \"HZLD\",\r\n      decimals : 0,\r\n      type : 'fungible',\r\n    },\r\n  };\r\n  _identity = false;//new AnonymousIdentity();\r\n  _host = false;\r\n  _agent = false;\r\n  _canisters = {};\r\n  \r\n  constructor(host, identity) {\r\n    if (identity) this._identity = identity;\r\n    if (host) this._host = host;\r\n    this._makeAgent();\r\n  }\r\n  idl(canister, idl) {\r\n    //Map a canister to a preloaded idl\r\n    this._mapIdls[canister] = idl;\r\n  };\r\n  setIdentity(identity) {\r\n    if (identity) this._identity = identity;\r\n    else this._identity = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  setHost(host) {\r\n    if (host) this._host = host;\r\n    else this._host = false;\r\n    this._makeAgent();\r\n    return this;\r\n  }\r\n  canister(cid, idl) {\r\n    if (!idl){\r\n      if (this._mapIdls.hasOwnProperty(cid)) {\r\n        idl = this._mapIdls[cid];\r\n      } else {\r\n        idl = _preloadedIdls['default'];\r\n      }\r\n    } else if (typeof idl == 'string') {\r\n      if (_preloadedIdls.hasOwnProperty(idl)) {\r\n        idl = _preloadedIdls[idl];\r\n      } else {\r\n        throw new Error(idl + \" is not a preloaded IDL\");\r\n      }\r\n    }\r\n    if (!this._canisters.hasOwnProperty(cid)){\r\n      this._canisters[cid] = Actor.createActor(idl, {agent : this._agent, canisterId : cid});\r\n    }\r\n    return this._canisters[cid];\r\n  }\r\n  token(tid, idl) {\r\n    if (!tid) tid = LEDGER_CANISTER_ID;//defaults to ledger\r\n    var tokenObj = decodeTokenId(tid);\r\n    if (!idl) {\r\n      if (this._mapIdls.hasOwnProperty(tokenObj.canister)) idl = this._mapIdls[tokenObj.canister];\r\n      else idl = _preloadedIdls['ext']; //ext is our token default...\r\n    }\r\n    var api = this.canister(tokenObj.canister, idl);\r\n    return {\r\n      call : api,\r\n      fee : () => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              resolve(10000);\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              resolve(1);\r\n            break;\r\n            default:\r\n              //TODO compute fees\r\n              resolve(0);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      getTokens : (aid) => {\r\n        return new Promise((resolve, reject) => {\r\n          if (typeof api.tokens == 'undefined') reject(\"Not supported\");\r\n          else {\r\n            try {\r\n              api.tokens(aid).then(r => {\r\n                if (typeof r.ok != 'undefined') {\r\n                  resolve(r.ok.map(x => tokenIdentifier(tokenObj.canister, x)));\r\n                }else if (typeof r.err != 'undefined') reject(r.err)\r\n                else reject(r);\r\n              }).catch(reject);\r\n            } catch(e) {\r\n              reject(e);\r\n            };\r\n          };\r\n        });\r\n      },\r\n      getMetadata : () => {\r\n        return new Promise((resolve, reject) => {\r\n          if (this._metadata.hasOwnProperty(tokenObj.canister)) {\r\n            resolve(this._metadata[tokenObj.canister]);\r\n          } else {\r\n            switch(tokenObj.canister) {\r\n              default:\r\n                api.metadata(tokenObj.token).then(r => {\r\n                  if (typeof r.ok != 'undefined') {\r\n                    if (typeof r.ok.fungible != 'undefined') {\r\n                      resolve({\r\n                        name : r.ok.fungible.name,\r\n                        symbol : r.ok.fungible.symbol,\r\n                        decimals : r.ok.fungible.decimals,\r\n                        metadata : r.ok.fungible.metadata,\r\n                        type : 'fungible'\r\n                      });\r\n                    } else {\r\n                      resolve({\r\n                        metadata : r.ok.nonfungible.metadata,\r\n                        type : 'nonfungible'\r\n                      });\r\n                    }\r\n                  } else if (typeof r.err != 'undefined') reject(r.err)\r\n                  else reject(r);\r\n                }).catch(reject);\r\n              break;\r\n            }\r\n          }\r\n        });\r\n      },\r\n      getBearer : () => {\r\n        return new Promise((resolve, reject) => {\r\n          api.bearer(tokenObj.token).then(r => {\r\n            if (typeof r.ok != 'undefined') resolve(r.ok)\r\n            else if (typeof r.err != 'undefined') reject(r.err)\r\n            else reject(r);\r\n          }).catch(reject);    \r\n        });\r\n      },\r\n      getDetails : () => {\r\n        return new Promise((resolve, reject) => {\r\n          api.details(tokenObj.token).then(r => {\r\n            if (typeof r.ok != 'undefined') resolve(r.ok)\r\n            else if (typeof r.err != 'undefined') reject(r.err)\r\n            else reject(r);\r\n          }).catch(reject);    \r\n        });\r\n      },\r\n      getBalance : (address, princpal) => {\r\n        return new Promise((resolve, reject) => {\r\n          var args;\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              rosettaApi.getAccountBalance(address).then(b => {       \r\n                resolve(b)\r\n              });\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              args = {\r\n                \"user\" : Principal.fromText(princpal)\r\n              };\r\n              api.getBalanceInsecure(args).then(b => {\r\n                var bal = b.length === 0 ? 0 : b[0];\r\n                resolve(bal);\r\n              }).catch(reject);\r\n            break;\r\n            default:\r\n              args = {\r\n                \"user\" : constructUser(address),\r\n                'token' : tokenObj.token\r\n              };\r\n              api.balance(args).then(r => {\r\n                if (typeof r.ok != 'undefined') resolve(r.ok)\r\n                else if (typeof r.err != 'undefined') reject(r.err)\r\n                else reject(r);\r\n              }).catch(reject);            \r\n            break;\r\n          }\r\n        });\r\n      },\r\n      getTransactions : (address, princpal) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              rosettaApi.getTransactionsByAccount(address).then(ts => {    \r\n                if (!Array.isArray(ts)) resolve([]);\r\n                var _ts = [];\r\n                ts.map(_t => {\r\n                  if (_t.type !== \"TRANSACTION\") return false;\r\n                  if (_t.status !== \"COMPLETED\") return false;\r\n                  _ts.push({\r\n                    from : _t.account1Address,\r\n                    to :  _t.account2Address,\r\n                    amount : Number(_t.amount/100000000),\r\n                    fee : Number(_t.fee/100000000),\r\n                    hash : _t.hash,\r\n                    timestamp : _t.timestamp,\r\n                    memo : Number(_t.memo),\r\n                  });\r\n                  return true;\r\n                });\r\n                _ts.reverse();\r\n                resolve(_ts);\r\n              }).catch(reject);\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n            default:\r\n              resolve([]);         \r\n            break;\r\n          }\r\n        });\r\n      },\r\n      /*\r\n        from_principal = principal of account as text\r\n        from_sa = subaccount (to produce hex address). null/0 default as number\r\n        to_user = valid User (address or principal) as text\r\n        amount = valid amount as BigInt\r\n        fee = valid fee as BigInt\r\n        memo = data to be sent as text/hex/number\r\n        notify = if we need to notify TODO\r\n      */\r\n      list : (from_sa, price) => {\r\n        return new Promise((resolve, reject) => {\r\n          var args;\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              reject(\"Not supported\");\r\n            break;\r\n            default:\r\n              args = {\r\n                'token' : tid,\r\n                'from_subaccount' : [getSubAccountArray(from_sa ?? 0)],\r\n                'price' : (price === 0 ? [] : [price])\r\n              };\r\n              api.list(args).then(b => {\r\n                if (typeof b.ok != 'undefined') {\r\n                  resolve(true);\r\n                } else {\r\n                  reject(JSON.stringify(b.err));\r\n                }\r\n              }).catch(reject);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      transfer : (from_principal, from_sa, to_user, amount, fee, memo, notify) => {\r\n        return new Promise((resolve, reject) => {\r\n          var args;\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              args = {\r\n                \"from_subaccount\" : [getSubAccountArray(from_sa ?? 0)], \r\n                \"to\" : to_user, //Should be an address\r\n                \"amount\" : { \"e8s\" : amount },\r\n                \"fee\" : { \"e8s\" : fee }, \r\n                \"memo\" : memo ? Number(BigInt(memo)) : 0, \r\n                \"created_at_time\" : []\r\n              };\r\n              console.log(args);\r\n              api.send_dfx(args).then(bh => {\r\n                resolve(true);\r\n              }).catch(reject);\r\n              //Notify here\r\n            break;\r\n            case \"qz7gu-giaaa-aaaaf-qaaka-cai\":\r\n              args = {\r\n                \"to\" : Principal.fromText(to_user), \r\n                \"metadata\" : [],\r\n                \"from\" : Principal.fromText(from_principal),\r\n                \"amount\" : amount\r\n              };\r\n              api.transfer(args).then(b => {\r\n                if (typeof b.ok != 'undefined') {          \r\n                  resolve(true);\r\n                } else {\r\n                  reject(JSON.stringify(b.err));\r\n                }\r\n              }).catch(reject);\r\n            break;\r\n            default:\r\n              args = {\r\n                'token' : tid,\r\n                'from' : { 'address' : principalToAccountIdentifier(from_principal, from_sa ?? 0) },\r\n                'subaccount' : [getSubAccountArray(from_sa ?? 0)],\r\n                'to' : constructUser(to_user),\r\n                'amount' : amount,\r\n                'fee' : fee,\r\n                'memo' : fromHexString(memo),\r\n                'notify' : notify\r\n              };\r\n              api.transfer(args).then(b => {\r\n                if (typeof b.ok != 'undefined') {\r\n                  resolve(true);\r\n                } else {\r\n                  reject(JSON.stringify(b.err));\r\n                }\r\n              }).catch(reject);\r\n            break;\r\n          }\r\n        });\r\n      },\r\n      mintCycles : (from_principal, from_sa, canister, amount, fee) => {\r\n        return new Promise((resolve, reject) => {\r\n          switch(tokenObj.canister) {\r\n            case LEDGER_CANISTER_ID:\r\n              var _to_sub = getCyclesTopupSubAccount(canister);\r\n              var _to = principalToAccountIdentifier(CYCLES_MINTING_CANISTER_ID, _to_sub);\r\n              var args = {\r\n                \"from_subaccount\" : [getSubAccountArray(from_sa ?? 0)], \r\n                \"to\" : _to, \r\n                \"fee\" : { \"e8s\" : fee }, \r\n                \"memo\" : Number(BigInt(\"0x50555054\")), \r\n                \"created_at_time\" : [], \r\n                \"amount\" : { \"e8s\" : amount }\r\n              };\r\n              api.send_dfx(args).then(block => {\r\n                var args = {\r\n                  \"block_height\" : block,\r\n                  \"max_fee\": {e8s: fee},\r\n                  \"from_subaccount\": [getSubAccountArray(from_sa ?? 0)],\r\n                  \"to_subaccount\": [getSubAccountArray(_to_sub)],\r\n                  \"to_canister\": Principal.fromText(CYCLES_MINTING_CANISTER_ID)\r\n                };\r\n                api.notify_dfx(args).then(resolve).catch(reject);\r\n              }).catch(reject);\r\n            break;\r\n            case \"5ymop-yyaaa-aaaah-qaa4q-cai\":\r\n              reject(\"WIP\");\r\n            break;\r\n            default:\r\n              reject(\"Cycle topup is not supported by this token\");\r\n            break;\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n \r\n  _makeAgent() {\r\n    var args = {};\r\n    if (this._identity) args['identity'] = this._identity;\r\n    if (this._host) args['host'] = this._host;\r\n    this._agent = new HttpAgent(args);\r\n  };\r\n};\r\n\r\nconst extjs = {\r\n  connect : (host, identity) => new ExtConnection(host ?? \"https://boundary.ic0.app/\", identity),\r\n  decodeTokenId : decodeTokenId,\r\n  encodeTokenId : tokenIdentifier,\r\n  toAddress : principalToAccountIdentifier,\r\n};\r\nexport default extjs;\r\n//window.extjs = extjs;\r\n//window.principalToAccountIdentifier = principalToAccountIdentifier;\r\n//window.fromHexString = fromHexString;","/**\r\n * @file RosettaApi\r\n * @copyright Copyright (c) 2018-2021 Dylan Miller and dfinityexplorer contributors\r\n * @license MIT License\r\n */\r\n\r\nimport axios from 'axios';\r\nimport BigNumber from 'bignumber.js';\r\nimport jsonBigint from 'json-bigint';\r\n\r\n// Set useNativeBigInt to true and use BigInt once BigInt is widely supported.\r\nconst JSONbig = jsonBigint({ strict: true });\r\n\r\n/**\r\n * Types of Rosetta API errors.\r\n */\r\nexport const RosettaErrorType = Object.freeze({\r\n  NotFound: 0,\r\n  Timeout: 1,\r\n  NetworkError: 2\r\n});\r\n\r\n/**\r\n * Describes the cause of a Rosetta API error.\r\n */\r\nexport class RosettaError extends Error {\r\n  /**\r\n   * Create a RosettaError.\r\n   * @param {String} message An error message describing the error.\r\n   * @param {Number} status number The HTTP response status.\r\n   */\r\n  constructor(message, status) {\r\n    super(message);\r\n    switch (status) {\r\n    case 408:\r\n      this.errorType = RosettaErrorType.Timeout;\r\n      break;\r\n    case 500:\r\n      this.errorType = RosettaErrorType.NotFound;\r\n      break;\r\n    default:\r\n      this.errorType = RosettaErrorType.NetworkError;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Contains information about a transaction.\r\n */\r\nexport class Transaction  {\r\n  /**\r\n   * Create a Transaction.\r\n   * @param {Any} rosettaTransaction The Rosetta Transaction object of the transaction.\r\n   * @param {Number} blockIndex The index of the block containing the transaction.\r\n   * milliseconds since the Unix Epoch.\r\n   */\r\n  constructor(rosettaTransaction, blockIndex) {\r\n    this.blockIndex = blockIndex;\r\n    this.hash = rosettaTransaction.transaction_identifier.hash;\r\n    const timestampMs = rosettaTransaction.metadata.timestamp.div(1000000).toNumber();\r\n    this.timestamp = new Date(timestampMs);\r\n    const operations = rosettaTransaction.operations;\r\n    if (operations.length >= 1) { \r\n      this.type = operations[0].type;\r\n      this.status = operations[0].status;\r\n      this.account1Address = operations[0].account.address;\r\n      this.amount = new BigNumber(operations[0].amount.value);\r\n      // Negate amount for TRANSACTION and BURN, so that they appear in the UI as positive values.\r\n      if ((operations[0].type === 'TRANSACTION' || operations[0].type === 'BURN') &&\r\n        !this.amount.isZero()) {\r\n        this.amount = this.amount.negated();\r\n      }\r\n    }\r\n    else {\r\n      this.type = '';\r\n      this.status = '';\r\n      this.account1Address = '';\r\n      this.amount = new BigNumber(0);\r\n    }\r\n    if (operations.length >= 2 && operations[1].type === 'TRANSACTION')\r\n      this.account2Address = operations[1].account.address;\r\n    else\r\n      this.account2Address = '';\r\n    if (operations.length >= 3 && operations[2].type === 'FEE')\r\n      this.fee = new BigNumber(-operations[2].amount.value);\r\n    else\r\n      this.fee = new BigNumber(0);\r\n    this.memo = new BigNumber(rosettaTransaction.metadata.memo);\r\n  }\r\n};\r\n\r\n/**\r\n * Manages Rosetta API calls.\r\n */\r\nexport default class RosettaApi {\r\n  /**\r\n   * Create a RosettaApi.\r\n   */\r\n  constructor() {\r\n    this.axios = axios.create({\r\n      baseURL: 'https://rosetta-api.internetcomputer.org/',\r\n      method: 'post',\r\n      transformRequest: (data) => JSONbig.stringify(data),\r\n      transformResponse: (data) => JSONbig.parse(data),\r\n      headers: { 'Content-Type': 'application/json;charset=utf-8' }\r\n    });\r\n\r\n    this.networkIdentifier = this.networksList().then(res =>\r\n      res.network_identifiers.find(\r\n        networkIdentifier => networkIdentifier.blockchain === 'Internet Computer'\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the ICP account balance of the specified account.\r\n   * @param {string} accountAddress The account address to get the ICP balance of.\r\n   * @returns {Promise<BigNumber|RosettaError>} The ICP account balance of the specified account, or\r\n   * a RosettaError for error.\r\n   */\r\n  async getAccountBalance(accountAddress) {\r\n    try {\r\n      const response = await this.accountBalanceByAddress(accountAddress);\r\n      return new BigNumber(response.balances[0].value);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the latest block index.\r\n   * @returns {Promise<number>} The latest block index, or a RosettaError for error.\r\n   */\r\n  async getLastBlockIndex() {\r\n    try {\r\n      const response = await this.networkStatus();\r\n      return response.current_block_identifier.index;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction object with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Transaction|null} The Transaction object with the specified hash, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransaction(transactionHash) {\r\n    try {\r\n      const responseTransactions = await this.transactionsByHash(transactionHash);\r\n      if (responseTransactions.transactions.length === 0)\r\n        return new RosettaError('Transaction not found.', 500);\r\n\r\n      return new Transaction(\r\n        responseTransactions.transactions[0].transaction,\r\n        responseTransactions.transactions[0].block_identifier.index);\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param limit {number} The maximum number of transactions to return in one call.\r\n   * @param maxBlockIndex {number} The block index to start at. If not specified, start at current\r\n   * block.\r\n   * @param offset {number} The offset from maxBlockIndex to start returning transactions.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactions(limit, maxBlockIndex, offset) {\r\n    try {\r\n      // This function can be simplified once /search/transactions supports using the properties\r\n      // max_block, offset, and limit.\r\n      let blockIndex;\r\n      if (maxBlockIndex)\r\n        blockIndex = maxBlockIndex;\r\n      else {\r\n        // Get the latest block index.\r\n        const response = await this.networkStatus();\r\n        blockIndex = response.current_block_identifier.index;\r\n      }\r\n      if (offset)\r\n        blockIndex = Math.max(blockIndex - offset, -1);\r\n      const transactionCount = Math.min(limit, blockIndex + 1);\r\n      const transactions = [];\r\n      for (let i = 0; i < transactionCount; i++)\r\n        transactions.push(await this.getTransactionByBlock(blockIndex - i));\r\n      return transactions;\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return an array of Transaction objects based on the specified parameters, or an empty array if\r\n   * none found.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<Array<Transaction>|null>} An array of Transaction objects, or a RosettaError\r\n   * for error.\r\n   */\r\n  async getTransactionsByAccount(accountAddress) {\r\n    try {\r\n      const response = await this.transactionsByAccount(accountAddress);\r\n      const transactions = await Promise.all(\r\n        response.transactions.map((blockTransaction) => {\r\n          return new Transaction(\r\n            blockTransaction.transaction, blockTransaction.block_identifier.index);\r\n        })\r\n      );\r\n      return transactions.reverse();\r\n    }\r\n    catch (error) {\r\n      //console.log(error);\r\n      return new RosettaError(\r\n        error.message, axios.isAxiosError(error) ? error?.response?.status : undefined);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the Transaction corresponding to the specified block index (i.e., block height).\r\n   * @param {number} blockIndex The index of the block to return the Transaction for.\r\n   * @returns {Promise<Transaction>} The Transaction corresponding to the specified block index.\r\n   * @private\r\n   */\r\n  async getTransactionByBlock(blockIndex) {\r\n    const response = await this.blockByIndex(blockIndex);\r\n    return new Transaction(response.block.transactions[0], blockIndex);\r\n  }\r\n\r\n  /**\r\n   * Perform the specified http request and return the response data.\r\n   * @param {string} url The server URL that will be used for the request.\r\n   * @param {object} data The data to be sent as the request body.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async request(url, data) {\r\n    return (await this.axios.request({ url: url, data: data })).data;\r\n  }\r\n\r\n  /**\r\n   * Return the /network/list response, containing a list of NetworkIdentifiers that the Rosetta\r\n   * server supports.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  networksList() {\r\n    return this.request('/network/list', {});\r\n  }\r\n\r\n  /**\r\n   * Return /network/status response, describing the current status of the network.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async networkStatus() {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/network/status', {\r\n        network_identifier: networkIdentifier\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /account/balance response for the specified account.\r\n   * @param {string} accountAddress The account address to get the balance of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async accountBalanceByAddress(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/account/balance', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /block response for the block corresponding to the specified block index (i.e.,\r\n   * block height).\r\n   * @param {number} blockIndex The index of the block to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async blockByIndex(blockIndex) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/block', {\r\n        network_identifier: networkIdentifier,\r\n        block_identifier: {index: blockIndex}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions containing an operation that affects\r\n   * the specified account.\r\n   * @param {string} accountAddress The account address to get the transactions of.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByAccount(accountAddress) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        account_identifier: {address: accountAddress}\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Return the /search/transactions response for transactions (only one) with the specified hash.\r\n   * @param {string} transactionHash The hash of the transaction to return.\r\n   * @returns {Promise<any>} The response body that was provided by the server.\r\n   * @private\r\n   */\r\n  async transactionsByHash(transactionHash) {\r\n    const networkIdentifier = await this.networkIdentifier;\r\n    return this.request(\r\n      '/search/transactions', {\r\n        network_identifier: networkIdentifier,\r\n        transaction_identifier: {hash: transactionHash}\r\n      }\r\n    );\r\n  }\r\n}","export default ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  const AccountBalanceArgs = IDL.Record({ 'account' : AccountIdentifier });\r\n  const SubAccount = IDL.Vec(IDL.Nat8);\r\n  const BlockHeight = IDL.Nat64;\r\n  const NotifyCanisterArgs = IDL.Record({\r\n    'to_subaccount' : IDL.Opt(SubAccount),\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'to_canister' : IDL.Principal,\r\n    'max_fee' : ICPTs,\r\n    'block_height' : BlockHeight,\r\n  });\r\n  const Memo = IDL.Nat64;\r\n  const TimeStamp = IDL.Record({ 'timestamp_nanos' : IDL.Nat64 });\r\n  const SendArgs = IDL.Record({\r\n    'to' : AccountIdentifier,\r\n    'fee' : ICPTs,\r\n    'memo' : Memo,\r\n    'from_subaccount' : IDL.Opt(SubAccount),\r\n    'created_at_time' : IDL.Opt(TimeStamp),\r\n    'amount' : ICPTs,\r\n  });\r\n  return IDL.Service({\r\n    'account_balance_dfx' : IDL.Func([AccountBalanceArgs], [ICPTs], ['query']),\r\n    'notify_dfx' : IDL.Func([NotifyCanisterArgs], [], []),\r\n    'send_dfx' : IDL.Func([SendArgs], [BlockHeight], []),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const Duration = IDL.Record({ 'secs' : IDL.Nat64, 'nanos' : IDL.Nat32 });\r\n  const ArchiveOptions = IDL.Record({\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'node_max_memory_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'controller_id' : IDL.Principal,\r\n  });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const LedgerCanisterInitPayload = IDL.Record({\r\n    'send_whitelist' : IDL.Vec(IDL.Tuple(IDL.Principal)),\r\n    'minting_account' : AccountIdentifier,\r\n    'transaction_window' : IDL.Opt(Duration),\r\n    'max_message_size_bytes' : IDL.Opt(IDL.Nat32),\r\n    'archive_options' : IDL.Opt(ArchiveOptions),\r\n    'initial_values' : IDL.Vec(IDL.Tuple(AccountIdentifier, ICPTs)),\r\n  });\r\n  return [LedgerCanisterInitPayload];\r\n};","export default ({ IDL }) => {\n  const Proposal = IDL.Rec();\n  const NeuronId = IDL.Record({ 'id' : IDL.Nat64 });\n  const Followees = IDL.Record({ 'followees' : IDL.Vec(NeuronId) });\n  const NodeProvider = IDL.Record({ 'id' : IDL.Opt(IDL.Principal) });\n  const NetworkEconomics = IDL.Record({\n    'neuron_minimum_stake_e8s' : IDL.Nat64,\n    'max_proposals_to_keep_per_topic' : IDL.Nat32,\n    'neuron_management_fee_per_proposal_e8s' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'transaction_fee_e8s' : IDL.Nat64,\n    'neuron_spawn_dissolve_delay_seconds' : IDL.Nat64,\n    'minimum_icp_xdr_rate' : IDL.Nat64,\n    'maximum_node_provider_rewards_e8s' : IDL.Nat64,\n  });\n  const RewardEvent = IDL.Record({\n    'day_after_genesis' : IDL.Nat64,\n    'actual_timestamp_seconds' : IDL.Nat64,\n    'distributed_e8s_equivalent' : IDL.Nat64,\n    'settled_proposals' : IDL.Vec(NeuronId),\n  });\n  const NeuronStakeTransfer = IDL.Record({\n    'to_subaccount' : IDL.Vec(IDL.Nat8),\n    'neuron_stake_e8s' : IDL.Nat64,\n    'from' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n    'from_subaccount' : IDL.Vec(IDL.Nat8),\n    'transfer_timestamp' : IDL.Nat64,\n    'block_height' : IDL.Nat64,\n  });\n  const GovernanceError = IDL.Record({\n    'error_message' : IDL.Text,\n    'error_type' : IDL.Int32,\n  });\n  const Ballot = IDL.Record({ 'vote' : IDL.Int32, 'voting_power' : IDL.Nat64 });\n  const Tally = IDL.Record({\n    'no' : IDL.Nat64,\n    'yes' : IDL.Nat64,\n    'total' : IDL.Nat64,\n    'timestamp_seconds' : IDL.Nat64,\n  });\n  const Spawn = IDL.Record({ 'new_controller' : IDL.Opt(IDL.Principal) });\n  const Split = IDL.Record({ 'amount_e8s' : IDL.Nat64 });\n  const Follow = IDL.Record({\n    'topic' : IDL.Int32,\n    'followees' : IDL.Vec(NeuronId),\n  });\n  const RemoveHotKey = IDL.Record({\n    'hot_key_to_remove' : IDL.Opt(IDL.Principal),\n  });\n  const AddHotKey = IDL.Record({ 'new_hot_key' : IDL.Opt(IDL.Principal) });\n  const IncreaseDissolveDelay = IDL.Record({\n    'additional_dissolve_delay_seconds' : IDL.Nat32,\n  });\n  const SetDissolveTimestamp = IDL.Record({\n    'dissolve_timestamp_seconds' : IDL.Nat64,\n  });\n  const Operation = IDL.Variant({\n    'RemoveHotKey' : RemoveHotKey,\n    'AddHotKey' : AddHotKey,\n    'StopDissolving' : IDL.Record({}),\n    'StartDissolving' : IDL.Record({}),\n    'IncreaseDissolveDelay' : IncreaseDissolveDelay,\n    'SetDissolveTimestamp' : SetDissolveTimestamp,\n  });\n  const Configure = IDL.Record({ 'operation' : IDL.Opt(Operation) });\n  const RegisterVote = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal' : IDL.Opt(NeuronId),\n  });\n  const DisburseToNeuron = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'kyc_verified' : IDL.Bool,\n    'amount_e8s' : IDL.Nat64,\n    'new_controller' : IDL.Opt(IDL.Principal),\n    'nonce' : IDL.Nat64,\n  });\n  const AccountIdentifier = IDL.Record({ 'hash' : IDL.Vec(IDL.Nat8) });\n  const Amount = IDL.Record({ 'e8s' : IDL.Nat64 });\n  const Disburse = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n    'amount' : IDL.Opt(Amount),\n  });\n  const Command = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'Follow' : Follow,\n    'Configure' : Configure,\n    'RegisterVote' : RegisterVote,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'MakeProposal' : Proposal,\n    'Disburse' : Disburse,\n  });\n  const ManageNeuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'command' : IDL.Opt(Command),\n  });\n  const ExecuteNnsFunction = IDL.Record({\n    'nns_function' : IDL.Int32,\n    'payload' : IDL.Vec(IDL.Nat8),\n  });\n  const RewardToNeuron = IDL.Record({ 'dissolve_delay_seconds' : IDL.Nat64 });\n  const RewardToAccount = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n  });\n  const RewardMode = IDL.Variant({\n    'RewardToNeuron' : RewardToNeuron,\n    'RewardToAccount' : RewardToAccount,\n  });\n  const RewardNodeProvider = IDL.Record({\n    'node_provider' : IDL.Opt(NodeProvider),\n    'reward_mode' : IDL.Opt(RewardMode),\n    'amount_e8s' : IDL.Nat64,\n  });\n  const SetDefaultFollowees = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n  });\n  const ApproveGenesisKyc = IDL.Record({\n    'principals' : IDL.Vec(IDL.Principal),\n  });\n  const Change = IDL.Variant({\n    'ToRemove' : NodeProvider,\n    'ToAdd' : NodeProvider,\n  });\n  const AddOrRemoveNodeProvider = IDL.Record({ 'change' : IDL.Opt(Change) });\n  const Motion = IDL.Record({ 'motion_text' : IDL.Text });\n  const Action = IDL.Variant({\n    'ManageNeuron' : ManageNeuron,\n    'ExecuteNnsFunction' : ExecuteNnsFunction,\n    'RewardNodeProvider' : RewardNodeProvider,\n    'SetDefaultFollowees' : SetDefaultFollowees,\n    'ManageNetworkEconomics' : NetworkEconomics,\n    'ApproveGenesisKyc' : ApproveGenesisKyc,\n    'AddOrRemoveNodeProvider' : AddOrRemoveNodeProvider,\n    'Motion' : Motion,\n  });\n  Proposal.fill(\n    IDL.Record({\n      'url' : IDL.Text,\n      'action' : IDL.Opt(Action),\n      'summary' : IDL.Text,\n    })\n  );\n  const ProposalData = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ClaimOrRefreshNeuronFromAccount = IDL.Record({\n    'controller' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n  });\n  const Command_2 = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'ClaimOrRefresh' : ClaimOrRefreshNeuronFromAccount,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'Disburse' : Disburse,\n  });\n  const NeuronInFlightCommand = IDL.Record({\n    'command' : IDL.Opt(Command_2),\n    'timestamp' : IDL.Nat64,\n  });\n  const BallotInfo = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DissolveState = IDL.Variant({\n    'DissolveDelaySeconds' : IDL.Nat64,\n    'WhenDissolvedTimestampSeconds' : IDL.Nat64,\n  });\n  const Neuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'controller' : IDL.Opt(IDL.Principal),\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'kyc_verified' : IDL.Bool,\n    'not_for_profit' : IDL.Bool,\n    'maturity_e8s_equivalent' : IDL.Nat64,\n    'cached_neuron_stake_e8s' : IDL.Nat64,\n    'created_timestamp_seconds' : IDL.Nat64,\n    'aging_since_timestamp_seconds' : IDL.Nat64,\n    'hot_keys' : IDL.Vec(IDL.Principal),\n    'account' : IDL.Vec(IDL.Nat8),\n    'dissolve_state' : IDL.Opt(DissolveState),\n    'followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'neuron_fees_e8s' : IDL.Nat64,\n    'transfer' : IDL.Opt(NeuronStakeTransfer),\n  });\n  const Governance = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'wait_for_quiet_threshold_seconds' : IDL.Nat64,\n    'node_providers' : IDL.Vec(NodeProvider),\n    'economics' : IDL.Opt(NetworkEconomics),\n    'latest_reward_event' : IDL.Opt(RewardEvent),\n    'to_claim_transfers' : IDL.Vec(NeuronStakeTransfer),\n    'short_voting_period_seconds' : IDL.Nat64,\n    'proposals' : IDL.Vec(IDL.Tuple(IDL.Nat64, ProposalData)),\n    'in_flight_commands' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInFlightCommand)),\n    'neurons' : IDL.Vec(IDL.Tuple(IDL.Nat64, Neuron)),\n    'genesis_timestamp_seconds' : IDL.Nat64,\n  });\n  const Result = IDL.Variant({ 'Ok' : IDL.Null, 'Err' : GovernanceError });\n  const Result_1 = IDL.Variant({\n    'Error' : GovernanceError,\n    'NeuronId' : NeuronId,\n  });\n  const ClaimOrRefreshNeuronFromAccountResponse = IDL.Record({\n    'result' : IDL.Opt(Result_1),\n  });\n  const Result_2 = IDL.Variant({ 'Ok' : Neuron, 'Err' : GovernanceError });\n  const NeuronInfo = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'created_timestamp_seconds' : IDL.Nat64,\n    'state' : IDL.Int32,\n    'retrieved_at_timestamp_seconds' : IDL.Nat64,\n    'voting_power' : IDL.Nat64,\n    'age_seconds' : IDL.Nat64,\n  });\n  const Result_3 = IDL.Variant({ 'Ok' : NeuronInfo, 'Err' : GovernanceError });\n  const ProposalInfo = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'status' : IDL.Int32,\n    'topic' : IDL.Int32,\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'reward_status' : IDL.Int32,\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ListNeurons = IDL.Record({\n    'neuron_ids' : IDL.Vec(IDL.Nat64),\n    'include_neurons_readable_by_caller' : IDL.Bool,\n  });\n  const ListNeuronsResponse = IDL.Record({\n    'neuron_infos' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInfo)),\n    'full_neurons' : IDL.Vec(Neuron),\n  });\n  const ListProposalInfo = IDL.Record({\n    'include_reward_status' : IDL.Vec(IDL.Int32),\n    'before_proposal' : IDL.Opt(NeuronId),\n    'limit' : IDL.Nat32,\n    'exclude_topic' : IDL.Vec(IDL.Int32),\n    'include_status' : IDL.Vec(IDL.Int32),\n  });\n  const ListProposalInfoResponse = IDL.Record({\n    'proposal_info' : IDL.Vec(ProposalInfo),\n  });\n  const SpawnResponse = IDL.Record({ 'created_neuron_id' : IDL.Opt(NeuronId) });\n  const MakeProposalResponse = IDL.Record({\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DisburseResponse = IDL.Record({ 'transfer_block_height' : IDL.Nat64 });\n  const Command_1 = IDL.Variant({\n    'Error' : GovernanceError,\n    'Spawn' : SpawnResponse,\n    'Split' : SpawnResponse,\n    'Follow' : IDL.Record({}),\n    'Configure' : IDL.Record({}),\n    'RegisterVote' : IDL.Record({}),\n    'DisburseToNeuron' : SpawnResponse,\n    'MakeProposal' : MakeProposalResponse,\n    'Disburse' : DisburseResponse,\n  });\n  const ManageNeuronResponse = IDL.Record({ 'command' : IDL.Opt(Command_1) });\n  return IDL.Service({\n    'claim_gtc_neurons' : IDL.Func(\n        [IDL.Principal, IDL.Vec(NeuronId)],\n        [Result],\n        [],\n      ),\n    'claim_or_refresh_neuron_from_account' : IDL.Func(\n        [ClaimOrRefreshNeuronFromAccount],\n        [ClaimOrRefreshNeuronFromAccountResponse],\n        [],\n      ),\n    'get_full_neuron' : IDL.Func([IDL.Nat64], [Result_2], ['query']),\n    'get_neuron_ids' : IDL.Func([], [IDL.Vec(IDL.Nat64)], ['query']),\n    'get_neuron_info' : IDL.Func([IDL.Nat64], [Result_3], ['query']),\n    'get_pending_proposals' : IDL.Func([], [IDL.Vec(ProposalInfo)], ['query']),\n    'get_proposal_info' : IDL.Func(\n        [IDL.Nat64],\n        [IDL.Opt(ProposalInfo)],\n        ['query'],\n      ),\n    'list_neurons' : IDL.Func([ListNeurons], [ListNeuronsResponse], ['query']),\n    'list_proposals' : IDL.Func(\n        [ListProposalInfo],\n        [ListProposalInfoResponse],\n        ['query'],\n      ),\n    'manage_neuron' : IDL.Func([ManageNeuron], [ManageNeuronResponse], []),\n    'transfer_gtc_neuron' : IDL.Func([NeuronId, NeuronId], [Result], []),\n  });\n};\nexport const init = ({ IDL }) => {\n  const Proposal = IDL.Rec();\n  const NeuronId = IDL.Record({ 'id' : IDL.Nat64 });\n  const Followees = IDL.Record({ 'followees' : IDL.Vec(NeuronId) });\n  const NodeProvider = IDL.Record({ 'id' : IDL.Opt(IDL.Principal) });\n  const NetworkEconomics = IDL.Record({\n    'neuron_minimum_stake_e8s' : IDL.Nat64,\n    'max_proposals_to_keep_per_topic' : IDL.Nat32,\n    'neuron_management_fee_per_proposal_e8s' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'transaction_fee_e8s' : IDL.Nat64,\n    'neuron_spawn_dissolve_delay_seconds' : IDL.Nat64,\n    'minimum_icp_xdr_rate' : IDL.Nat64,\n    'maximum_node_provider_rewards_e8s' : IDL.Nat64,\n  });\n  const RewardEvent = IDL.Record({\n    'day_after_genesis' : IDL.Nat64,\n    'actual_timestamp_seconds' : IDL.Nat64,\n    'distributed_e8s_equivalent' : IDL.Nat64,\n    'settled_proposals' : IDL.Vec(NeuronId),\n  });\n  const NeuronStakeTransfer = IDL.Record({\n    'to_subaccount' : IDL.Vec(IDL.Nat8),\n    'neuron_stake_e8s' : IDL.Nat64,\n    'from' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n    'from_subaccount' : IDL.Vec(IDL.Nat8),\n    'transfer_timestamp' : IDL.Nat64,\n    'block_height' : IDL.Nat64,\n  });\n  const GovernanceError = IDL.Record({\n    'error_message' : IDL.Text,\n    'error_type' : IDL.Int32,\n  });\n  const Ballot = IDL.Record({ 'vote' : IDL.Int32, 'voting_power' : IDL.Nat64 });\n  const Tally = IDL.Record({\n    'no' : IDL.Nat64,\n    'yes' : IDL.Nat64,\n    'total' : IDL.Nat64,\n    'timestamp_seconds' : IDL.Nat64,\n  });\n  const Spawn = IDL.Record({ 'new_controller' : IDL.Opt(IDL.Principal) });\n  const Split = IDL.Record({ 'amount_e8s' : IDL.Nat64 });\n  const Follow = IDL.Record({\n    'topic' : IDL.Int32,\n    'followees' : IDL.Vec(NeuronId),\n  });\n  const RemoveHotKey = IDL.Record({\n    'hot_key_to_remove' : IDL.Opt(IDL.Principal),\n  });\n  const AddHotKey = IDL.Record({ 'new_hot_key' : IDL.Opt(IDL.Principal) });\n  const IncreaseDissolveDelay = IDL.Record({\n    'additional_dissolve_delay_seconds' : IDL.Nat32,\n  });\n  const SetDissolveTimestamp = IDL.Record({\n    'dissolve_timestamp_seconds' : IDL.Nat64,\n  });\n  const Operation = IDL.Variant({\n    'RemoveHotKey' : RemoveHotKey,\n    'AddHotKey' : AddHotKey,\n    'StopDissolving' : IDL.Record({}),\n    'StartDissolving' : IDL.Record({}),\n    'IncreaseDissolveDelay' : IncreaseDissolveDelay,\n    'SetDissolveTimestamp' : SetDissolveTimestamp,\n  });\n  const Configure = IDL.Record({ 'operation' : IDL.Opt(Operation) });\n  const RegisterVote = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal' : IDL.Opt(NeuronId),\n  });\n  const DisburseToNeuron = IDL.Record({\n    'dissolve_delay_seconds' : IDL.Nat64,\n    'kyc_verified' : IDL.Bool,\n    'amount_e8s' : IDL.Nat64,\n    'new_controller' : IDL.Opt(IDL.Principal),\n    'nonce' : IDL.Nat64,\n  });\n  const AccountIdentifier = IDL.Record({ 'hash' : IDL.Vec(IDL.Nat8) });\n  const Amount = IDL.Record({ 'e8s' : IDL.Nat64 });\n  const Disburse = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n    'amount' : IDL.Opt(Amount),\n  });\n  const Command = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'Follow' : Follow,\n    'Configure' : Configure,\n    'RegisterVote' : RegisterVote,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'MakeProposal' : Proposal,\n    'Disburse' : Disburse,\n  });\n  const ManageNeuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'command' : IDL.Opt(Command),\n  });\n  const ExecuteNnsFunction = IDL.Record({\n    'nns_function' : IDL.Int32,\n    'payload' : IDL.Vec(IDL.Nat8),\n  });\n  const RewardToNeuron = IDL.Record({ 'dissolve_delay_seconds' : IDL.Nat64 });\n  const RewardToAccount = IDL.Record({\n    'to_account' : IDL.Opt(AccountIdentifier),\n  });\n  const RewardMode = IDL.Variant({\n    'RewardToNeuron' : RewardToNeuron,\n    'RewardToAccount' : RewardToAccount,\n  });\n  const RewardNodeProvider = IDL.Record({\n    'node_provider' : IDL.Opt(NodeProvider),\n    'reward_mode' : IDL.Opt(RewardMode),\n    'amount_e8s' : IDL.Nat64,\n  });\n  const SetDefaultFollowees = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n  });\n  const ApproveGenesisKyc = IDL.Record({\n    'principals' : IDL.Vec(IDL.Principal),\n  });\n  const Change = IDL.Variant({\n    'ToRemove' : NodeProvider,\n    'ToAdd' : NodeProvider,\n  });\n  const AddOrRemoveNodeProvider = IDL.Record({ 'change' : IDL.Opt(Change) });\n  const Motion = IDL.Record({ 'motion_text' : IDL.Text });\n  const Action = IDL.Variant({\n    'ManageNeuron' : ManageNeuron,\n    'ExecuteNnsFunction' : ExecuteNnsFunction,\n    'RewardNodeProvider' : RewardNodeProvider,\n    'SetDefaultFollowees' : SetDefaultFollowees,\n    'ManageNetworkEconomics' : NetworkEconomics,\n    'ApproveGenesisKyc' : ApproveGenesisKyc,\n    'AddOrRemoveNodeProvider' : AddOrRemoveNodeProvider,\n    'Motion' : Motion,\n  });\n  Proposal.fill(\n    IDL.Record({\n      'url' : IDL.Text,\n      'action' : IDL.Opt(Action),\n      'summary' : IDL.Text,\n    })\n  );\n  const ProposalData = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'failure_reason' : IDL.Opt(GovernanceError),\n    'ballots' : IDL.Vec(IDL.Tuple(IDL.Nat64, Ballot)),\n    'proposal_timestamp_seconds' : IDL.Nat64,\n    'reward_event_round' : IDL.Nat64,\n    'failed_timestamp_seconds' : IDL.Nat64,\n    'reject_cost_e8s' : IDL.Nat64,\n    'latest_tally' : IDL.Opt(Tally),\n    'decided_timestamp_seconds' : IDL.Nat64,\n    'proposal' : IDL.Opt(Proposal),\n    'proposer' : IDL.Opt(NeuronId),\n    'executed_timestamp_seconds' : IDL.Nat64,\n  });\n  const ClaimOrRefreshNeuronFromAccount = IDL.Record({\n    'controller' : IDL.Opt(IDL.Principal),\n    'memo' : IDL.Nat64,\n  });\n  const Command_2 = IDL.Variant({\n    'Spawn' : Spawn,\n    'Split' : Split,\n    'ClaimOrRefresh' : ClaimOrRefreshNeuronFromAccount,\n    'DisburseToNeuron' : DisburseToNeuron,\n    'Disburse' : Disburse,\n  });\n  const NeuronInFlightCommand = IDL.Record({\n    'command' : IDL.Opt(Command_2),\n    'timestamp' : IDL.Nat64,\n  });\n  const BallotInfo = IDL.Record({\n    'vote' : IDL.Int32,\n    'proposal_id' : IDL.Opt(NeuronId),\n  });\n  const DissolveState = IDL.Variant({\n    'DissolveDelaySeconds' : IDL.Nat64,\n    'WhenDissolvedTimestampSeconds' : IDL.Nat64,\n  });\n  const Neuron = IDL.Record({\n    'id' : IDL.Opt(NeuronId),\n    'controller' : IDL.Opt(IDL.Principal),\n    'recent_ballots' : IDL.Vec(BallotInfo),\n    'kyc_verified' : IDL.Bool,\n    'not_for_profit' : IDL.Bool,\n    'maturity_e8s_equivalent' : IDL.Nat64,\n    'cached_neuron_stake_e8s' : IDL.Nat64,\n    'created_timestamp_seconds' : IDL.Nat64,\n    'aging_since_timestamp_seconds' : IDL.Nat64,\n    'hot_keys' : IDL.Vec(IDL.Principal),\n    'account' : IDL.Vec(IDL.Nat8),\n    'dissolve_state' : IDL.Opt(DissolveState),\n    'followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'neuron_fees_e8s' : IDL.Nat64,\n    'transfer' : IDL.Opt(NeuronStakeTransfer),\n  });\n  const Governance = IDL.Record({\n    'default_followees' : IDL.Vec(IDL.Tuple(IDL.Int32, Followees)),\n    'wait_for_quiet_threshold_seconds' : IDL.Nat64,\n    'node_providers' : IDL.Vec(NodeProvider),\n    'economics' : IDL.Opt(NetworkEconomics),\n    'latest_reward_event' : IDL.Opt(RewardEvent),\n    'to_claim_transfers' : IDL.Vec(NeuronStakeTransfer),\n    'short_voting_period_seconds' : IDL.Nat64,\n    'proposals' : IDL.Vec(IDL.Tuple(IDL.Nat64, ProposalData)),\n    'in_flight_commands' : IDL.Vec(IDL.Tuple(IDL.Nat64, NeuronInFlightCommand)),\n    'neurons' : IDL.Vec(IDL.Tuple(IDL.Nat64, Neuron)),\n    'genesis_timestamp_seconds' : IDL.Nat64,\n  });\n  return [Governance];\n};","export default ({ IDL }) => {\r\n  const AccountIdentifier = IDL.Text;\r\n  const AttachCanisterRequest = IDL.Record({\r\n    'name' : IDL.Text,\r\n    'canister_id' : IDL.Principal,\r\n  });\r\n  const AttachCanisterResponse = IDL.Variant({\r\n    'Ok' : IDL.Null,\r\n    'CanisterAlreadyAttached' : IDL.Null,\r\n    'NameAlreadyTaken' : IDL.Null,\r\n    'NameTooLong' : IDL.Null,\r\n    'CanisterLimitExceeded' : IDL.Null,\r\n  });\r\n  const SubAccount = IDL.Vec(IDL.Nat8);\r\n  const SubAccountDetails = IDL.Record({\r\n    'name' : IDL.Text,\r\n    'sub_account' : SubAccount,\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const CreateSubAccountResponse = IDL.Variant({\r\n    'Ok' : SubAccountDetails,\r\n    'AccountNotFound' : IDL.Null,\r\n    'NameTooLong' : IDL.Null,\r\n    'SubAccountLimitExceeded' : IDL.Null,\r\n  });\r\n  const DetachCanisterRequest = IDL.Record({ 'canister_id' : IDL.Principal });\r\n  const DetachCanisterResponse = IDL.Variant({\r\n    'Ok' : IDL.Null,\r\n    'CanisterNotFound' : IDL.Null,\r\n  });\r\n  const HardwareWalletAccountDetails = IDL.Record({\r\n    'name' : IDL.Text,\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const AccountDetails = IDL.Record({\r\n    'account_identifier' : AccountIdentifier,\r\n    'hardware_wallet_accounts' : IDL.Vec(HardwareWalletAccountDetails),\r\n    'sub_accounts' : IDL.Vec(SubAccountDetails),\r\n  });\r\n  const GetAccountResponse = IDL.Variant({\r\n    'Ok' : AccountDetails,\r\n    'AccountNotFound' : IDL.Null,\r\n  });\r\n  const CanisterDetails = IDL.Record({\r\n    'name' : IDL.Text,\r\n    'canister_id' : IDL.Principal,\r\n  });\r\n  const BlockHeight = IDL.Nat64;\r\n  const Stats = IDL.Record({\r\n    'latest_transaction_block_height' : BlockHeight,\r\n    'seconds_since_last_ledger_sync' : IDL.Nat64,\r\n    'sub_accounts_count' : IDL.Nat64,\r\n    'hardware_wallet_accounts_count' : IDL.Nat64,\r\n    'accounts_count' : IDL.Nat64,\r\n    'earliest_transaction_block_height' : BlockHeight,\r\n    'transactions_count' : IDL.Nat64,\r\n    'block_height_synced_up_to' : IDL.Opt(IDL.Nat64),\r\n    'latest_transaction_timestamp_nanos' : IDL.Nat64,\r\n    'earliest_transaction_timestamp_nanos' : IDL.Nat64,\r\n  });\r\n  const GetTransactionsRequest = IDL.Record({\r\n    'page_size' : IDL.Nat8,\r\n    'offset' : IDL.Nat32,\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const Timestamp = IDL.Record({ 'timestamp_nanos' : IDL.Nat64 });\r\n  const ICPTs = IDL.Record({ 'e8s' : IDL.Nat64 });\r\n  const Send = IDL.Record({\r\n    'to' : AccountIdentifier,\r\n    'fee' : ICPTs,\r\n    'amount' : ICPTs,\r\n  });\r\n  const Receive = IDL.Record({\r\n    'fee' : ICPTs,\r\n    'from' : AccountIdentifier,\r\n    'amount' : ICPTs,\r\n  });\r\n  const Transfer = IDL.Variant({\r\n    'Burn' : IDL.Record({ 'amount' : ICPTs }),\r\n    'Mint' : IDL.Record({ 'amount' : ICPTs }),\r\n    'Send' : Send,\r\n    'Receive' : Receive,\r\n  });\r\n  const Transaction = IDL.Record({\r\n    'memo' : IDL.Nat64,\r\n    'timestamp' : Timestamp,\r\n    'block_height' : BlockHeight,\r\n    'transfer' : Transfer,\r\n  });\r\n  const GetTransactionsResponse = IDL.Record({\r\n    'total' : IDL.Nat32,\r\n    'transactions' : IDL.Vec(Transaction),\r\n  });\r\n  const HeaderField = IDL.Tuple(IDL.Text, IDL.Text);\r\n  const HttpRequest = IDL.Record({\r\n    'url' : IDL.Text,\r\n    'method' : IDL.Text,\r\n    'body' : IDL.Vec(IDL.Nat8),\r\n    'headers' : IDL.Vec(HeaderField),\r\n  });\r\n  const HttpResponse = IDL.Record({\r\n    'body' : IDL.Vec(IDL.Nat8),\r\n    'headers' : IDL.Vec(HeaderField),\r\n    'status_code' : IDL.Nat16,\r\n  });\r\n  const RegisterHardwareWalletRequest = IDL.Record({\r\n    'name' : IDL.Text,\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const RegisterHardwareWalletResponse = IDL.Variant({\r\n    'Ok' : IDL.Null,\r\n    'AccountNotFound' : IDL.Null,\r\n    'HardwareWalletAlreadyRegistered' : IDL.Null,\r\n    'HardwareWalletLimitExceeded' : IDL.Null,\r\n    'NameTooLong' : IDL.Null,\r\n  });\r\n  const RemoveHardwareWalletRequest = IDL.Record({\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const RemoveHardwareWalletResponse = IDL.Variant({\r\n    'Ok' : IDL.Null,\r\n    'HardwareWalletNotFound' : IDL.Null,\r\n  });\r\n  const RenameSubAccountRequest = IDL.Record({\r\n    'new_name' : IDL.Text,\r\n    'account_identifier' : AccountIdentifier,\r\n  });\r\n  const RenameSubAccountResponse = IDL.Variant({\r\n    'Ok' : IDL.Null,\r\n    'AccountNotFound' : IDL.Null,\r\n    'SubAccountNotFound' : IDL.Null,\r\n    'NameTooLong' : IDL.Null,\r\n  });\r\n  return IDL.Service({\r\n    'add_account' : IDL.Func([], [AccountIdentifier], []),\r\n    'attach_canister' : IDL.Func(\r\n        [AttachCanisterRequest],\r\n        [AttachCanisterResponse],\r\n        [],\r\n      ),\r\n    'create_sub_account' : IDL.Func([IDL.Text], [CreateSubAccountResponse], []),\r\n    'detach_canister' : IDL.Func(\r\n        [DetachCanisterRequest],\r\n        [DetachCanisterResponse],\r\n        [],\r\n      ),\r\n    'get_account' : IDL.Func([], [GetAccountResponse], ['query']),\r\n    'get_canisters' : IDL.Func([], [IDL.Vec(CanisterDetails)], ['query']),\r\n    'get_icp_to_cycles_conversion_rate' : IDL.Func([], [IDL.Nat64], ['query']),\r\n    'get_stats' : IDL.Func([], [Stats], ['query']),\r\n    'get_transactions' : IDL.Func(\r\n        [GetTransactionsRequest],\r\n        [GetTransactionsResponse],\r\n        ['query'],\r\n      ),\r\n    'http_request' : IDL.Func([HttpRequest], [HttpResponse], ['query']),\r\n    'register_hardware_wallet' : IDL.Func(\r\n        [RegisterHardwareWalletRequest],\r\n        [RegisterHardwareWalletResponse],\r\n        [],\r\n      ),\r\n    'remove_hardware_wallet' : IDL.Func(\r\n        [RemoveHardwareWalletRequest],\r\n        [RemoveHardwareWalletResponse],\r\n        [],\r\n      ),\r\n    'rename_sub_account' : IDL.Func(\r\n        [RenameSubAccountRequest],\r\n        [RenameSubAccountResponse],\r\n        [],\r\n      ),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => { return []; };","export default ({ IDL }) => {\r\n  const User = IDL.Principal;\r\n  const BalanceRequest = IDL.Record({ 'user' : User });\r\n  const Balance = IDL.Nat;\r\n  const Metadata = IDL.Vec(IDL.Nat8);\r\n  const TransferRequest = IDL.Record({\r\n    'to' : User,\r\n    'metadata' : IDL.Opt(Metadata),\r\n    'from' : User,\r\n    'amount' : Balance,\r\n  });\r\n  const Result_2 = IDL.Variant({\r\n    'ok' : IDL.Null,\r\n    'err' : IDL.Variant({\r\n      'InsufficientBalance' : IDL.Null,\r\n      'InvalidSource' : User,\r\n      'Unauthorized' : IDL.Null,\r\n    }),\r\n  });\r\n  const TransferResponse = Result_2;\r\n  const OperatorAction = IDL.Variant({\r\n    'removeOperator' : IDL.Null,\r\n    'setOperator' : IDL.Null,\r\n  });\r\n  const OperatorRequest = IDL.Record({\r\n    'owner' : User,\r\n    'operators' : IDL.Vec(IDL.Tuple(User, OperatorAction)),\r\n  });\r\n  const Result = IDL.Variant({\r\n    'ok' : IDL.Null,\r\n    'err' : IDL.Variant({ 'Unauthorized' : IDL.Null, 'InvalidOwner' : User }),\r\n  });\r\n  const OperatorResponse = Result;\r\n  return IDL.Service({\r\n    'getBalance' : IDL.Func([BalanceRequest], [IDL.Opt(Balance)], []),\r\n    'getBalanceInsecure' : IDL.Func(\r\n        [BalanceRequest],\r\n        [IDL.Opt(Balance)],\r\n        ['query'],\r\n      ),\r\n    'getCommunityChestValueInsecure' : IDL.Func(\r\n        [],\r\n        [IDL.Opt(IDL.Nat)],\r\n        ['query'],\r\n      ),\r\n    'getInfo' : IDL.Func(\r\n        [],\r\n        [\r\n          IDL.Record({\r\n            'balance' : IDL.Nat,\r\n            'maxLiveSize' : IDL.Nat,\r\n            'heap' : IDL.Nat,\r\n            'size' : IDL.Nat,\r\n          }),\r\n        ],\r\n        ['query'],\r\n      ),\r\n    'getNumberOfAccounts' : IDL.Func([], [IDL.Nat], []),\r\n    'getTokenInfo' : IDL.Func(\r\n        [],\r\n        [\r\n          IDL.Record({\r\n            'fee' : IDL.Nat,\r\n            'totalMinted' : IDL.Nat,\r\n            'totalSupply' : IDL.Nat,\r\n            'totalTransactions' : IDL.Nat,\r\n          }),\r\n        ],\r\n        ['query'],\r\n      ),\r\n    'getTotalMinted' : IDL.Func([], [IDL.Nat], []),\r\n    'mint' : IDL.Func([IDL.Principal, IDL.Nat], [], []),\r\n    'transfer' : IDL.Func([TransferRequest], [TransferResponse], []),\r\n    'updateOperator' : IDL.Func(\r\n        [IDL.Vec(OperatorRequest)],\r\n        [OperatorResponse],\r\n        [],\r\n      ),\r\n  });\r\n};\r\nexport const init = ({ IDL }) => { return []; };","export default ({ IDL }) => {\n  const OrderId = IDL.Nat32;\n  const Balance = IDL.Nat;\n  const Balance_2 = Balance;\n  const TokenIdentifier = IDL.Text;\n  const TokenIdentifier_2 = TokenIdentifier;\n  const Rate = IDL.Tuple(IDL.Nat, IDL.Nat);\n  const AccountIdentifier_2 = IDL.Text;\n  const AccountIdentifier = AccountIdentifier_2;\n  const AccountIdentifier_3 = AccountIdentifier;\n  const Order = IDL.Record({\n    'isGiveBase' : IDL.Bool,\n    'trade' : Balance_2,\n    'base' : TokenIdentifier_2,\n    'rate' : Rate,\n    'user' : AccountIdentifier_3,\n    'quote' : TokenIdentifier_2,\n    'filled' : Balance_2,\n    'amount' : Balance_2,\n  });\n  const CurrencyPair = IDL.Text;\n  const TokenIndex_2 = IDL.Nat32;\n  const TokenIndex = TokenIndex_2;\n  const Metadata_2 = IDL.Variant({\n    'fungible' : IDL.Record({\n      'decimals' : IDL.Nat8,\n      'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)),\n      'name' : IDL.Text,\n      'symbol' : IDL.Text,\n    }),\n    'nonfungible' : IDL.Record({ 'metadata' : IDL.Opt(IDL.Vec(IDL.Nat8)) }),\n  });\n  const Metadata = Metadata_2;\n  const User = IDL.Variant({\n    'principal' : IDL.Principal,\n    'address' : AccountIdentifier,\n  });\n  const BalanceRequest_2 = IDL.Record({\n    'token' : TokenIdentifier,\n    'user' : User,\n  });\n  const BalanceRequest = BalanceRequest_2;\n  const CommonError_2 = IDL.Variant({\n    'InvalidToken' : TokenIdentifier,\n    'Other' : IDL.Text,\n  });\n  const Result_10 = IDL.Variant({ 'ok' : Balance, 'err' : CommonError_2 });\n  const BalanceResponse_2 = Result_10;\n  const BalanceResponse = BalanceResponse_2;\n  const SubAccount_2 = IDL.Vec(IDL.Nat8);\n  const SubAccount = SubAccount_2;\n  const SubAccount_3 = SubAccount;\n  const CancelOrderRequest = IDL.Record({\n    'subaccount' : IDL.Opt(SubAccount_3),\n    'orderId' : OrderId,\n  });\n  const Result_9 = IDL.Variant({ 'ok' : IDL.Null, 'err' : IDL.Text });\n  const CancelOrderResponse = Result_9;\n  const Extension_2 = IDL.Text;\n  const Extension = Extension_2;\n  const LimitOrderRequest = IDL.Record({\n    'subaccount' : IDL.Opt(SubAccount_3),\n    'getAmount' : Balance_2,\n    'getToken' : TokenIdentifier_2,\n    'giveToken' : TokenIdentifier_2,\n    'giveAmount' : Balance_2,\n  });\n  const Result_8 = IDL.Variant({\n    'ok' : IDL.Tuple(IDL.Opt(OrderId), Balance_2, Balance_2),\n    'err' : IDL.Variant({\n      'InsufficientBalance' : IDL.Null,\n      'InvalidToken' : TokenIdentifier_2,\n      'Other' : IDL.Text,\n    }),\n  });\n  const LimitOrderResponse = Result_8;\n  const MarketOrderRequest = IDL.Record({\n    'subaccount' : IDL.Opt(SubAccount_3),\n    'getToken' : TokenIdentifier_2,\n    'giveToken' : TokenIdentifier_2,\n    'giveAmount' : Balance_2,\n  });\n  const Result_7 = IDL.Variant({\n    'ok' : IDL.Tuple(Balance_2, Balance_2),\n    'err' : IDL.Variant({\n      'InsufficientBalance' : IDL.Null,\n      'InvalidToken' : TokenIdentifier_2,\n      'Other' : IDL.Text,\n    }),\n  });\n  const MarketOrderResponse = Result_7;\n  const CommonError = CommonError_2;\n  const Result_6 = IDL.Variant({ 'ok' : Metadata, 'err' : CommonError });\n  const Result_5 = IDL.Variant({ 'ok' : IDL.Nat, 'err' : CommonError });\n  const RegisterTokenRequest = IDL.Record({\n    'owner' : AccountIdentifier_3,\n    'metadata' : Metadata,\n    'supply' : Balance_2,\n  });\n  const Result_4 = IDL.Variant({ 'ok' : TokenIndex, 'err' : IDL.Text });\n  const Result_3 = IDL.Variant({\n    'ok' : IDL.Vec(IDL.Tuple(AccountIdentifier_3, Balance_2)),\n    'err' : CommonError,\n  });\n  const Result_2 = IDL.Variant({ 'ok' : Balance_2, 'err' : CommonError });\n  const Memo = IDL.Vec(IDL.Nat8);\n  const TransferRequest_2 = IDL.Record({\n    'to' : User,\n    'token' : TokenIdentifier,\n    'notify' : IDL.Bool,\n    'from' : User,\n    'memo' : Memo,\n    'subaccount' : IDL.Opt(SubAccount),\n    'amount' : Balance,\n  });\n  const TransferRequest = TransferRequest_2;\n  const Result = IDL.Variant({\n    'ok' : Balance,\n    'err' : IDL.Variant({\n      'CannotNotify' : AccountIdentifier,\n      'InsufficientBalance' : IDL.Null,\n      'InvalidToken' : TokenIdentifier,\n      'Rejected' : IDL.Null,\n      'Unauthorized' : AccountIdentifier,\n      'Other' : IDL.Text,\n    }),\n  });\n  const TransferResponse_2 = Result;\n  const TransferResponse = TransferResponse_2;\n  const advanced_token = IDL.Service({\n    'DEXDebugData' : IDL.Func(\n        [],\n        [\n          IDL.Vec(IDL.Tuple(OrderId, Order)),\n          IDL.Vec(\n            IDL.Tuple(\n              CurrencyPair,\n              IDL.Tuple(IDL.Vec(OrderId), IDL.Vec(OrderId)),\n            )\n          ),\n          IDL.Vec(IDL.Tuple(TokenIdentifier_2, Balance_2)),\n        ],\n        ['query'],\n      ),\n    'acceptCycles' : IDL.Func([], [], []),\n    'allMetadata' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, IDL.Tuple(Metadata, Balance_2)))],\n        ['query'],\n      ),\n    'allRegistry' : IDL.Func(\n        [],\n        [\n          IDL.Vec(\n            IDL.Tuple(\n              TokenIndex,\n              IDL.Vec(IDL.Tuple(AccountIdentifier_3, Balance_2)),\n            )\n          ),\n        ],\n        ['query'],\n      ),\n    'availableCycles' : IDL.Func([], [IDL.Nat], ['query']),\n    'balance' : IDL.Func([BalanceRequest], [BalanceResponse], ['query']),\n    'cancelOrder' : IDL.Func([CancelOrderRequest], [CancelOrderResponse], []),\n    'changeAdmin' : IDL.Func([IDL.Principal], [], []),\n    'clearDEX' : IDL.Func([], [], []),\n    'extensions' : IDL.Func([], [IDL.Vec(Extension)], ['query']),\n    'limitOrder' : IDL.Func([LimitOrderRequest], [LimitOrderResponse], []),\n    'marketOrder' : IDL.Func([MarketOrderRequest], [MarketOrderResponse], []),\n    'metadata' : IDL.Func([TokenIdentifier_2], [Result_6], ['query']),\n    'numberOfTokenHolders' : IDL.Func(\n        [TokenIdentifier_2],\n        [Result_5],\n        ['query'],\n      ),\n    'numberOfTokens' : IDL.Func([], [IDL.Nat], ['query']),\n    'registerToken' : IDL.Func([RegisterTokenRequest], [Result_4], []),\n    'registry' : IDL.Func([TokenIdentifier_2], [Result_3], ['query']),\n    'supply' : IDL.Func([TokenIdentifier_2], [Result_2], ['query']),\n    'tokenRegistry' : IDL.Func(\n        [],\n        [IDL.Vec(IDL.Tuple(TokenIndex, Metadata, Balance_2, IDL.Nat))],\n        ['query'],\n      ),\n    'transfer' : IDL.Func([TransferRequest], [TransferResponse], []),\n  });\n  return advanced_token;\n};\nexport const init = ({ IDL }) => { return []; };","import React from 'react';\r\nimport makeBlockie from 'ethereum-blockies-base64';\r\nconst style = {\r\n  width:\"100%\", \r\n  height:\"100%\", \r\n}\r\nfunction Blockie(props) {\r\n  return (<img alt={props.address} style={style} src={makeBlockie(props.address)}/>);\r\n}\r\nexport default Blockie;","import React from 'react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport StorefrontIcon from '@material-ui/icons/Storefront';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport Blockie from '../components/Blockie';\r\n\r\nconst drawerWidth = 300;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  drawer: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n    zIndex: 1\r\n  }\r\n}));\r\n    \r\nexport default function AccountDrawer(props) {\r\n  const { window } = props;\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const container = window !== undefined ? () => window().document.body : undefined;\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []))\r\n  const idtype = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.type : \"\"));\r\n  const principal = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.principal : \"\"));\r\n  const dispatch = useDispatch()\r\n  \r\n  const addAccount = () => {\r\n    var nextid = accounts.length;\r\n    dispatch({ type: 'account/add', payload : {id : nextid, principal : principal}});\r\n    props.changeRoute('accountDetail', nextid);\r\n  };\r\n  \r\n  const accountsList = (\r\n    <div style={{marginTop:64, marginBottom: 100}}>\r\n      <div style={{width:drawerWidth-1, zIndex: 10, backgroundColor:'white', position:\"fixed\", top:0, textAlign:\"center\"}} className={classes.toolbar}>\r\n        {/*<span style={{display:'block', fontSize:'x-large',padding:'15px 0', textAlign:'center',fontWeight:'bold'}}>Stoic Wallet <span style={{fontSize:'small',fontWeight:'normal'}}>By Toniq Labs</span></span>*/}\r\n        <img style={{maxHeight:'50px',marginTop:'5px'}} alt=\"Stoic Wallet by Toniq Labs\" src=\"logo.png\" />\r\n      </div>\r\n      <Divider />\r\n      <List>\r\n        {accounts.map((account, index) => {\r\n          return (\r\n            <div key={index}>\r\n              <ListItem button onClick={() => props.changeRoute('accountDetail', index)}>\r\n                <ListItemAvatar>\r\n                  <Avatar>\r\n                    <Blockie address={account.address} />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText \r\n                  primaryTypographyProps={{noWrap:true}} \r\n                  secondaryTypographyProps={{noWrap:true}} \r\n                  primary={account.name}\r\n                  secondary={account.address} />\r\n              </ListItem>\r\n            </div>\r\n          )\r\n        })}\r\n        <ListItem button onClick={addAccount}>\r\n          <ListItemAvatar>\r\n            <Avatar>\r\n              <AddIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Add Account\" />\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <ListItem button onClick={() => props.changeRoute('addressBook')}>\r\n          <ListItemIcon><PeopleIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Address Book\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => props.changeRoute('neurons')}>\r\n          <ListItemIcon><AllInclusiveIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Neurons\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => props.changeRoute('marketplace')}>\r\n          <ListItemIcon><StorefrontIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Marketplace *BETA*\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => props.changeRoute('tokenregistry')}>\r\n          <ListItemIcon><ListIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Token Registry\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => props.changeRoute('applications')}>\r\n          <ListItemIcon><AppsIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Applications\" />\r\n        </ListItem>\r\n        {idtype === 'watch' ? \"\" :\r\n        <ListItem button onClick={() => props.lockWallet()}>\r\n          <ListItemIcon><LockIcon /></ListItemIcon>\r\n          <ListItemText primary=\"Lock Wallet\" />\r\n        </ListItem> }\r\n      </List>\r\n      <div style={{width: drawerWidth-1, zIndex: 10, backgroundColor:'white', position:\"fixed\", bottom:0, textAlign:'center'}} className={classes.toolbar}>\r\n        <span style={{position:'absolute', bottom:'10px', left:'0', right:'0'}}>Connected to Mainnet - v1.0.0</span>\r\n      </div>\r\n    </div>\r\n  );\r\n  \r\n  return (\r\n    <nav className={classes.drawer} aria-label=\"mailbox folders\">\r\n      <Hidden smUp implementation=\"css\">\r\n        <Drawer\r\n          container={container}\r\n          variant=\"temporary\"\r\n          anchor={theme.direction === 'rtl' ? 'right' : 'left'}\r\n          open={props.open}\r\n          onClose={props.onClose}\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          ModalProps={{\r\n            keepMounted: true, // Better open performance on mobile.\r\n          }}\r\n        >\r\n          {accountsList}\r\n        </Drawer>\r\n      </Hidden>\r\n      <Hidden xsDown implementation=\"css\">\r\n        <Drawer\r\n          classes={{\r\n            paper: classes.drawerPaper,\r\n          }}\r\n          variant=\"permanent\"\r\n          open\r\n        >\r\n          {accountsList}\r\n        </Drawer>\r\n      </Hidden>\r\n    </nav>\r\n  );\r\n}","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function SnackbarButton(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (typeof props.onClick != 'undefined') props.onClick();\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    setOpen(false);\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n  };\r\n\r\n  return (  \r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Snackbar\r\n        style={{position:\"fixed\"}}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        anchorOrigin={props.anchorOrigin}\r\n        onClose={handleClose}\r\n        message={props.message}\r\n        action={\r\n          <React.Fragment>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        } \r\n      /> \r\n    </>\r\n  );\r\n}","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport extjs from '../ic/extjs.js';\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst styles = {\r\n  root: {\r\n    height: \"100%\",\r\n  },\r\n  selectedCard: {\r\n    height: \"100%\",\r\n    backgroundColor: '#003240',\r\n    color: 'white'\r\n  },\r\n  card: {\r\n    height: \"100%\",\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n};\r\nvar intervalId = 0;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nexport default function TokenCard(props) {\r\n  const [balance, setBalance] = React.useState(false);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const handleClick = () => {\r\n    props.onClick();\r\n  };\r\n  const updateBalance = () => {\r\n    api.token(props.data.id).getBalance(props.address, identity.principal).then(b => {\r\n      setBalance(Number(b)/(10**props.data.decimals));\r\n    });\r\n  }\r\n  React.useEffect(() => {\r\n    updateBalance();\r\n    intervalId = setInterval(() => updateBalance(), 10000);\r\n    return () => {\r\n      clearInterval(intervalId);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  React.useEffect(() => {\r\n    setBalance(false);\r\n    updateBalance();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.address]);\r\n  return (\r\n    <Grid style={styles.root} item xl={2} lg={3} md={4}>\r\n      <Card onClick={handleClick} style={props.selected ? styles.selectedCard : styles.card }>\r\n        <CardActionArea>\r\n          <CardContent>\r\n            <Typography style={styles.title} color={props.selected ? \"inherit\" : \"textSecondary\"} gutterBottom>\r\n              {props.data.name}\r\n            </Typography>\r\n            <Typography variant=\"h6\" >\r\n              {balance === false ? \"Loading\" : balance + \" \" + props.data.symbol}\r\n            </Typography>\r\n            {/*<Typography style={styles.pos} color={props.selected ? \"inherit\" : \"textSecondary\"}>\r\n              ~$123.04USD\r\n            </Typography>*/}\r\n          </CardContent>\r\n        </CardActionArea>\r\n      </Card>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst styles = {\r\n  root: {\r\n    height: \"100%\",\r\n  },\r\n  selectedCard: {\r\n    height: \"100%\",\r\n    backgroundColor: '#003240',\r\n    color: 'white'\r\n  },\r\n  card: {\r\n    height: \"100%\",\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n};\r\nexport default function NFTCard(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const nfts = useSelector(state => state.principals[currentPrincipal].accounts[currentAccount].nfts)\r\n  const handleClick = () => {\r\n    props.onClick();\r\n  };\r\n  return (\r\n    <Grid style={styles.root} item xl={2} lg={3} md={4}>\r\n      <Card onClick={handleClick} style={props.selected ? styles.selectedCard : styles.card }>\r\n        <CardActionArea>\r\n          <CardContent>\r\n            <Typography style={styles.title} color={props.selected ? \"inherit\" : \"textSecondary\"} gutterBottom>\r\n              Non Fungible Tokens\r\n            </Typography>\r\n            <Typography variant=\"h6\" >\r\n            {nfts.length} NFT{nfts.length === 1 ? \"\" : \"s\"}\r\n            </Typography>\r\n            {/*<Typography style={styles.pos} color={props.selected ? \"inherit\" : \"textSecondary\"}>\r\n              ~$123.04USD\r\n            </Typography>*/}\r\n          </CardContent>\r\n        </CardActionArea>\r\n      </Card>\r\n    </Grid>\r\n  );\r\n}\r\n","import { blobFromHex, blobFromUint8Array, blobToHex, SignIdentity, blobFromBuffer, } from '@dfinity/agent';\nimport { Buffer } from 'buffer/';\nimport * as bigintConversion from 'bigint-conversion'\nconst ellipticcurve = require(\"starkbank-ecdsa\");\nconst Ecdsa = ellipticcurve.Ecdsa;\nconst PrivateKey = ellipticcurve.PrivateKey;\nconst PublicKey = ellipticcurve.PublicKey;\nfunction stringToBytes ( str ) {\n  var ch, st, re = [];\n  for (var i = 0; i < str.length; i++ ) {\n    ch = str.charCodeAt(i);  // get char \n    st = [];                 // set up \"stack\"\n    do {\n      st.push( ch & 0xFF );  // push byte to stack\n      ch = ch >> 8;          // shift value down by 1 byte\n    }  \n    while ( ch );\n    re = re.concat( st.reverse() );\n  }\n  return re;\n}\nexport class Secp256k1PublicKey {\n    constructor(key) {\n        this.rawKey = key;\n    }\n    static fromRaw(rawKey) {\n        return new Secp256k1PublicKey(rawKey);\n    }\n    static fromDer(derKey) {\n        return new Secp256k1PublicKey(PublicKey.fromDer(derKey));\n    }\n    toDer() {\n        var s = this.rawKey.toDer();\n        if (typeof s == 'string') s = new Uint8Array(stringToBytes(this.rawKey.toDer()));\n        return blobFromUint8Array(s);\n    }\n    toRaw() {\n        return this.rawKey;\n    }\n}\nexport class Secp256k1KeyIdentity extends SignIdentity {\n    constructor(publicKey, _privateKey) {\n        super();\n        this._privateKey = _privateKey;\n        this._publicKey = Secp256k1PublicKey.fromRaw(publicKey);\n    }\n    static fromPem(pem) {\n        let publicKey, secretKey;\n        if (pem) {\n          secretKey = PrivateKey.fromPem(pem);\n        } else {\n          throw  new Error(\"Error\");\n        }\n        publicKey = secretKey.publicKey();\n        return new this(Secp256k1PublicKey.fromRaw(publicKey), secretKey);\n    }\n    static fromParsedJson(obj) {\n        const [publicKeyDer, privateKeyDer] = obj;\n        return new Secp256k1KeyIdentity(Secp256k1PublicKey.fromDer(blobFromHex(publicKeyDer)), PrivateKey.fromDer(blobFromHex(privateKeyDer)));\n    }\n    static fromJSON(json) {\n        const parsed = JSON.parse(json);\n        if (Array.isArray(parsed)) {\n            if (typeof parsed[0] === 'string' && typeof parsed[1] === 'string') {\n                return this.fromParsedJson([parsed[0], parsed[1]]);\n            }\n            else {\n                throw new Error('Deserialization error: JSON must have at least 2 items.');\n            }\n        }\n        else if (typeof parsed === 'object' && parsed !== null) {\n            const { publicKey, _publicKey, secretKey, _privateKey } = parsed;\n            const pk = publicKey\n                ? Secp256k1PublicKey.fromRaw(blobFromUint8Array(new Uint8Array(publicKey.data)))\n                : Secp256k1PublicKey.fromDer(blobFromUint8Array(new Uint8Array(_publicKey.data)));\n            if (publicKey && secretKey && secretKey.data) {\n                return new Secp256k1KeyIdentity(pk, blobFromUint8Array(new Uint8Array(secretKey.data)));\n            }\n            else if (_publicKey && _privateKey && _privateKey.data) {\n                return new Secp256k1KeyIdentity(pk, blobFromUint8Array(new Uint8Array(_privateKey.data)));\n            }\n        }\n        throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(json)}`);\n    }\n    static fromKeyPair(publicKey, privateKey) {\n        return new Secp256k1KeyIdentity(Secp256k1PublicKey.fromDer(publicKey.toDer()), privateKey);\n    }\n    /**\n     * Serialize this key to JSON.\n     */\n    toJSON() {\n        return [blobToHex(this._publicKey.toDer()), blobToHex(stringToBytes(this._privateKey.toDer()))];\n    }\n    /**\n     * Return a copy of the key pair.\n     */\n    getKeyPair() {\n        return {\n            secretKey: this._privateKey,\n            publicKey: this._publicKey.toRaw(),\n        };\n    }\n    /**\n     * Return the public key.\n     */\n    getPublicKey() {\n        return this._publicKey;\n    }\n    /**\n     * Signs a blob of data, with this identity's private key.\n     * @param challenge - challenge to sign with this identity's secretKey, producing a signature\n     */\n    async sign(challenge) {\n        const blob = challenge instanceof Buffer\n            ? blobFromBuffer(challenge)\n            : blobFromUint8Array(new Uint8Array(challenge));\n        const signature = Ecdsa.sign(blob, this._privateKey);\n        var ra = bigintConversion.bigintToBuf(signature.r);\n        var sa = bigintConversion.bigintToBuf(signature.s);\n        return blobFromUint8Array(new Uint8Array([...Array.from(new Uint8Array(ra)), ...Array.from(new Uint8Array(sa))]));\n    }\n}\n","/* global BigInt */\nimport { Ed25519KeyIdentity } from \"@dfinity/identity\";\nimport { AuthClient } from \"@dfinity/auth-client\";\nimport { Secp256k1KeyIdentity } from \"./secp256k1.js\";\nimport OpenLogin from \"@toruslabs/openlogin\";\nimport { \n  mnemonicToId, \n  validatePrincipal, \n  encrypt, \n  decrypt, \n  fromHexString, \n  bip39 } from \"./utils.js\";\nimport * as tweetnacl from 'tweetnacl';\nconst ellipticcurve = require(\"starkbank-ecdsa\");\nwindow.tweetnacl = tweetnacl;\nwindow.ellipticcurve = ellipticcurve;\n\nvar identities = {};\nvar openlogin = false;\n//var _iisessionInterval = false;\nconst oauths = ['google', 'twitter', 'facebook', 'github'];\nconst loadOpenLogin = async () => {\n  if (!openlogin) {\n    openlogin = new OpenLogin({\n      clientId: \"BHGs7-pkZO-KlT_BE6uMGsER2N1PC4-ERfU_c7BKN1szvtUaYFBwZMC2cwk53yIOLhdpaOFz4C55v_NounQBOfU\",\n      network: \"mainnet\",\n      uxMode : 'popup',\n    });\n  }\n  await openlogin.init();\n  return openlogin;\n}\nconst processId = (id, type) => {\n  var p = id.getPrincipal().toString();\n  identities[p] = id;\n  return {\n    principal : p,\n    type : type\n  }\n}\nconst isLoaded = (p) => {\n  return (identities.hasOwnProperty(p));\n};\nconst StoicIdentity = {\n  getIdentity : (principal) => {\n    if (!identities.hasOwnProperty(principal)) return false;\n    return identities[principal];\n  },\n  setup : (type, optdata) => {\n    return new Promise(async (resolve, reject) => {\n      var id;\n      switch(type){\n        case \"ii\":\n          var auth = await AuthClient.create();\n          auth.login({\n            maxTimeToLive : BigInt(24*60*60*1000000000),\n            identityProvider: \"https://identity.ic0.app/\",\n            onSuccess: async () => {\n              id = await auth.getIdentity()\n              return resolve(processId(id, type));\n            },\n            onError : reject\n          });\n          return;\n        case \"private\":\n          localStorage.setItem('_m', optdata.mnemonic);\n          id = mnemonicToId(optdata.mnemonic);\n          encrypt(optdata.mnemonic, id.getPrincipal().toString(), optdata.password).then(_em => {\n            var ems = localStorage.getItem('_em');\n            if (!ems) {\n              ems = {};\n              ems[id.getPrincipal().toString()] = _em;\n            } else {\n              ems = JSON.parse(ems);\n              ems[id.getPrincipal().toString()] = _em;\n            }\n            localStorage.setItem('_em', JSON.stringify(ems));\n            return resolve(processId(id, type));        \n          });\n          return;\n        case \"pem\":\n          id = Secp256k1KeyIdentity.fromPem(optdata.pem);\n          return resolve(processId(id, type));\n        case \"watch\":\n          return resolve({\n            principal : optdata.principal,\n            type : type\n          });   \n        default: break;\n      }\n        \n      if (oauths.indexOf(type) >= 0) {\n        const openlogin = await loadOpenLogin();\n        if (openlogin.privKey) {\n          await openlogin.logout();\n        }\n        await openlogin.login({\n          loginProvider: type,\n        });\n        id = Ed25519KeyIdentity.generate(new Uint8Array(fromHexString(openlogin.privKey)));\n        return resolve(processId(id, type));\n      }\n      \n      return reject(\"Cannot setup, invalid type: \" + type);\n    });\n  },\n  load : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      var id;\n      switch(_id.type){\n        case \"ii\":\n          var auth = await AuthClient.create();\n          id = await auth.getIdentity();\n          if (id.getPrincipal().toString() === '2vxsx-fae') return reject(\"Not logged in\");\n          if (id.getPrincipal().toString() !== _id.principal) return reject(\"Logged in using the incorrect user: \" + id.getPrincipal().toString() + \" but expecting \" + _id.principal);\n          return resolve(processId(id, _id.type)); \n        case \"private\":\n          if (!isLoaded(_id.principal)) { \n            var t = localStorage.getItem('_m');\n            if (!t){\n              return reject(\"No seed\");\n            } else {\n              var mnemonic = t;\n              id = mnemonicToId(mnemonic);\n              return resolve(processId(id, _id.type));\n            }\n          } else {\n            return resolve({\n              principal : _id.principal,\n              type : _id.type\n            });\n          }\n        case \"pem\":\n          if (!isLoaded(_id.principal)) return reject(); \n          return resolve({\n            principal : _id.principal,\n            type : _id.type\n          });   \n        case \"watch\":\n          return resolve({\n            principal : _id.principal,\n            type : _id.type\n          });   \n        default: break;\n      }\n      if (oauths.indexOf(_id.type) >= 0) {\n        const openlogin = await loadOpenLogin();\n        if (!openlogin.privKey || openlogin.privKey.length === 0) {\n          return reject(\"Not logged in\");\n        } else {\n          id = Ed25519KeyIdentity.generate(new Uint8Array(fromHexString(openlogin.privKey)));\n          if (id.getPrincipal().toString() !== _id.principal) {\n            await openlogin.logout();\n            return reject(\"Logged in using the incorrect user \" + id.getPrincipal().toString() + \" expecting \" + _id.principal);\n          } else {\n            return resolve(processId(id, _id.type)); \n          }\n        }\n      }\n      return reject();\n    });\n  },\n  unlock : (_id, optdata) => {\n    return new Promise(async (resolve, reject) => {\n      StoicIdentity.load(_id).then(resolve).catch(async e => {\n        var id;\n        switch(_id.type) {\n          case \"ii\":\n            var auth = await AuthClient.create();\n            auth.login({\n              maxTimeToLive : BigInt(24*60*60*1000000000),\n              identityProvider: \"https://identity.ic0.app/\",\n              onSuccess: async () => {\n                id = await auth.getIdentity()\n                if (id.getPrincipal().toString() === '2vxsx-fae') return reject(\"Not logged in\");\n                if (id.getPrincipal().toString() !== _id.principal) return reject(\"Logged in using the incorrect user: \" + id.getPrincipal().toString() + \" but expecting \" + _id.principal);\n                return resolve(processId(id, _id.type));\n              },\n              onError : reject\n            });\n            return;\n          case \"private\":\n            var t = localStorage.getItem('_em');\n            if (!t) return reject(\"No encrypted seed to decrypt\");\n            var ems = JSON.parse(t);\n            var em;\n            if (ems.hasOwnProperty(\"iv\") === true) {\n              //old format\n              //convert to new?\n              em = JSON.stringify(ems);\n              var nems = {};\n              nems[_id.principal] = em;\n              localStorage.setItem('_em', JSON.stringify(nems));\n            } else {\n              if (ems.hasOwnProperty(_id.principal) === false) return reject(\"No encrypted seed to decrypt\");\n              em = ems[_id.principal];\n            }\n            decrypt(em, _id.principal, optdata.password).then(mnemonic => {\n              localStorage.setItem('_m', mnemonic);\n              id = mnemonicToId(mnemonic);\n              return resolve(processId(id, _id.type));\n            }).catch(reject);\n            return;\n          case \"pem\":\n            id = Secp256k1KeyIdentity.fromPem(optdata.pem);\n            return resolve(processId(id, _id.type));\n          default: break;\n        }\n        \n        if (oauths.indexOf(_id.type) >= 0) {\n          try {\n            const openlogin = await loadOpenLogin();\n            if (!openlogin.privKey) {\n              await openlogin.login({\n                loginProvider: _id.type,\n              });\n            }\n            id = Ed25519KeyIdentity.generate(new Uint8Array(fromHexString(openlogin.privKey)));\n            if (id.getPrincipal().toString() !== _id.principal) {\n              await openlogin.logout();\n              return reject(\"Logged in using the incorrect user \" + id.getPrincipal().toString() + \" expecting \" + _id.principal);\n            } else {\n              return resolve(processId(id, _id.type)); \n            }\n          } catch (e) {\n            return reject(\"Something happened\");\n          }\n        }\n        //reject(\"Invalid login type\");\n      });\n    });\n  },\n  lock : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n            var auth = await AuthClient.create();\n            auth.logout();\n          break;\n        case \"private\":\n            localStorage.removeItem(\"_m\");\n          break;\n        default: break;\n      }\n      if (oauths.indexOf(_id.type) >= 0) {\n        try {\n          const openlogin = await loadOpenLogin();\n          await openlogin.logout();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      delete identities[_id.principal];\n      return resolve(true);\n    });\n  },\n  clear : (_id) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n            var auth = await AuthClient.create();\n            auth.logout();\n          break;\n        case \"private\":\n            localStorage.removeItem(\"_m\");\n            localStorage.removeItem(\"_em\");\n          break;\n        default: break;\n      }\n      if (oauths.indexOf(_id.type) >= 0) {\n        try {\n          const openlogin = await loadOpenLogin();\n          await openlogin.logout();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      delete identities[_id.principal];\n      return resolve(true);\n    });\n  },\n  change : (_id, type, optdata) => {\n    return new Promise(async (resolve, reject) => {\n      switch(_id.type){\n        case \"ii\":\n            var auth = await AuthClient.create();\n            auth.logout();\n          break;\n        case \"private\":\n            localStorage.removeItem(\"_m\");\n          break;\n        default: break;\n      }\n      if (oauths.indexOf(_id.type) >= 0) {\n        try {\n          const openlogin = await loadOpenLogin();\n          await openlogin.logout();\n        } catch (e) {\n          console.log(e);\n        }\n      }\n      //setup new\n      delete identities[_id.principal];\n      StoicIdentity.setup(type, optdata).then(resolve).catch(reject);\n    });\n  },\n  validatePrincipal : validatePrincipal,\n  validateMnemonic : bip39.validateMnemonic,\n  generateMnemonic : bip39.generateMnemonic,\n  validatePassword : (p) => {\n    var re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d\\w\\W]{8,}$/;\n    return re.test(p);\n  }\n}\r\nexport {StoicIdentity};\n","function fallbackCopyTextToClipboard(text) {\r\n  \r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n  \r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\nconst \r\nidentityTypes = {\r\n  'ii' : \"Internet Identity\",\r\n  'private' : \"Mnemonic Key\",\r\n  'watch' : \"Read-only\",\r\n  'pem' : \"PEM Import\",\r\n  'google' : \"Google Account\",\r\n  'twitter' : \"Twitter Account\",\r\n  'reddit' : \"Reddit Account\",\r\n  'github' : \"Github Account\",\r\n  'facebook' : \"Facebook Account\",\r\n},\r\nclipboardCopy = (text) => {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function() {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function(err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n},\r\nisHex = (h) => {\r\n  var regexp = /^[0-9a-fA-F]+$/;\r\n  return regexp.test(h);\r\n},\r\ncompressAddress = (a) => {\r\n  if (!a) return \"\";\r\n  if (a.length === 64 && isHex(a)) return a.substr(0, 16) + \"...\";\r\n  else {\r\n    var pp = a.split(\"-\");\r\n    if (pp.length <= 4) return a;\r\n    else {\r\n      return pp[0] + \"-\" + pp[1].substr(0, 3) + \"...\" + pp[pp.length-3].substr(2) + \"-\" + pp[pp.length-2] + \"-\" + pp[pp.length-1];\r\n    }\r\n  }\r\n},\r\ndisplayDate = (d) => {\r\n  return new Date(d).toString();\r\n},\r\nnumf = (n, d) => {\r\n  if (n === \"N/A\") return n;\r\n  d = (d ?? 2);\r\n  return n.toFixed(d).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,');\r\n};\r\nexport {\r\n  clipboardCopy, compressAddress, displayDate, numf, identityTypes\r\n};","/* global BigInt */\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {validatePrincipal, validateAddress} from '../ic/utils.js';\r\nimport {compressAddress} from '../utils.js';\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function SendForm(props) {\r\n  const addresses = useSelector(state => state.addresses);\r\n  const principals = useSelector(state => state.principals);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [open, setOpen] = React.useState(false);\r\n  const [step, setStep] = React.useState(0);\r\n  const [balance, setBalance] = React.useState(false);\r\n\r\n  const [amount, setAmount] = React.useState(0);\r\n  const [minFee, setMinFee] = React.useState(0);\r\n  const [fee, setFee] = React.useState(0);\r\n  const [to, setTo] = React.useState('');\r\n  const [toOption, setToOption] = React.useState('');\r\n  \r\n  const [advanced, setAdvanced] = React.useState(false);\r\n  const [memo, setMemo] = React.useState('');\r\n  const [notify, setNotify] = React.useState(false);\r\n  \r\n  const [contacts, setContacts] = React.useState([]);\r\n  \r\n  //cold API\r\n  const api = extjs.connect(\"https://boundary.ic0.app/\");\r\n\r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const review = () => {\r\n    if (isNaN(amount)) return error(\"Please enter a valid amount to send\");\r\n    if (isNaN(fee)) return error(\"Please enter a valid fee to use\");\r\n    if (fee !== minFee) return error(\"The fee must be \" + minFee);\r\n    switch(props.data.symbol){\r\n      case \"ICP\":\r\n        if (!validateAddress(to)) return error(\"Please enter a valid address\");      \r\n      break;\r\n      case \"HZLD\":\r\n        if (!validatePrincipal(to)) return error(\"Please enter a valid principal to send to\");      \r\n      break;\r\n      default:\r\n        if (!validateAddress(to) && !validatePrincipal(to)) return error(\"Please enter a valid address to send to\");      \r\n      break;\r\n    }\r\n    if ((Number(amount)+Number(fee)) > balance)  return error(\"You have insufficient \" + props.data.symbol); \r\n    setStep(1);\r\n  }\r\n  const submit = () => {\r\n    //Submit to blockchain here\r\n    var _from_principal = identity.principal;\r\n    var _from_sa = currentAccount;\r\n    var _to_user = to;\r\n    var _amount = BigInt(Math.round(amount*(10**props.data.decimals)));\r\n    var _fee = BigInt(Math.round(fee*(10**props.data.decimals)));\r\n    var _memo = memo;\r\n    var _notify = notify;\r\n    \r\n    //Load signing ID\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    \r\n    props.loader(true);\r\n    handleClose();\r\n    \r\n    //hot api, will sign as identity - BE CAREFUL\r\n    extjs.connect(\"https://boundary.ic0.app/\", id).token(props.data.id).transfer(_from_principal, _from_sa, _to_user, _amount, _fee, _memo, _notify).then(r => {\r\n      if (r) {\r\n        return props.alert(\"Transaction complete\", \"Your transfer was sent successfully\");\r\n      } else {        \r\n        return error(\"Something went wrong with this transfer\");\r\n      }\r\n    }).catch(e => {\r\n      return error(\"There was an error: \" + e);\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setStep(0);\r\n    setAmount(0);\r\n    setMinFee(0);\r\n    setFee(0);\r\n    setBalance(false);\r\n    setTo('');\r\n    setToOption('');\r\n    setAdvanced(false);\r\n    setMemo('');\r\n    setNotify(false);\r\n  };\r\n  React.useEffect(() => {\r\n    api.token(props.data.id).fee().then(f => {\r\n      setMinFee(f/10**(props.data.decimals));\r\n      setFee(f/10**(props.data.decimals));\r\n    });\r\n    api.token(props.data.id).getBalance(props.address, identity.principal).then(b => {\r\n      setBalance(Number(b)/(10**props.data.decimals));\r\n    });\r\n    \r\n    var contacts = [];\r\n    addresses.forEach(el => {\r\n      contacts.push({\r\n        group : \"Address Book\",\r\n        name : el.name,\r\n        address : el.address,\r\n      });\r\n    });\r\n    principals.forEach(p => {\r\n      p.accounts.forEach(a => {\r\n        contacts.push({\r\n          group : p.identity.principal,\r\n          name : a.name,\r\n          address : a.address,\r\n        });\r\n      });\r\n    });\r\n    setContacts(contacts);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.data.id, open]);\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose}  maxWidth={'sm'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Send {props.data.name} Tokens ({props.data.symbol})</DialogTitle>\r\n        {step === 0 ?\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Please enter the recipient address and amount that you wish to send below.</DialogContentText>\r\n            <>\r\n              <Autocomplete\r\n                freeSolo\r\n                value={toOption}\r\n                onChange={(e,v) => { if (v) {\r\n                    setTo(v.address) \r\n                    setToOption(v.address) \r\n                  }\r\n                }}\r\n                inputValue={to}\r\n                onInputChange={(e,v) => setTo(v)}\r\n                getOptionLabel={contact => contact.name || contact}\r\n                groupBy={(contact) => contact.group}\r\n                options={contacts}\r\n                renderInput={(params) => (\r\n                    <TextField\r\n                    {...params}\r\n                    autoFocus\r\n                    margin=\"dense\"\r\n                    label=\"Address of the Recipient\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                )}\r\n              />\r\n              \r\n              <TextField\r\n                style={{width:'49%', marginRight:'2%'}}\r\n                margin=\"dense\"\r\n                label={\"Amount of \" + props.data.symbol + \" to Send\"}\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                type=\"text\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n              { minFee > 0 ?\r\n              <TextField\r\n                style={{width:'49%'}}\r\n                margin=\"dense\"\r\n                label=\"Fee\"\r\n                value={fee}\r\n                onChange={(e) => setFee(e.target.value)}\r\n                type=\"text\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              /> : \"\" }\r\n              <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n                { balance !== false ? \"Balance: \"+balance+\" \"+props.data.symbol +\" \": \"\"}\r\n                { minFee > 0 ? \"Min Fee: \"+minFee+\" \"+props.data.symbol : \"\"}\r\n              </DialogContentText>\r\n              { advanced ?\r\n                <p style={{cursor: 'pointer', fontWeight:'bold'}} onClick={() => setAdvanced(false)}>Hide Advanced Options</p>\r\n              :\r\n                <p href=\"#\" style={{cursor: 'pointer', fontWeight:'bold'}} onClick={() => setAdvanced(true)}>Show Advanced Options</p>\r\n              }\r\n            </>\r\n            { advanced ?\r\n            <>\r\n              <TextField\r\n                margin=\"dense\"\r\n                multiline\r\n                rows='2'\r\n                rowsMax='4'\r\n                label=\"Optional Memo\"\r\n                value={memo}\r\n                onChange={(e) => setMemo(e.target.value)}\r\n                type=\"text\"\r\n                fullWidth\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n              \r\n              <FormControlLabel\r\n                control={<Switch checked={notify} onChange={(event) => setNotify(event.target.checked)} name=\"notify\" />}\r\n                label=\"Notify receiver?\"\r\n              />\r\n            </> : \"\" }\r\n          </DialogContent>\r\n        :\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n            Please confirm that you are about to send <br />\r\n            <strong style={{color:'red'}}>{amount} {props.data.symbol}</strong><br /> \r\n            from <strong style={{color:'red'}}>{compressAddress(props.address)}</strong><br />\r\n            to <strong style={{color:'red'}}>{compressAddress(to)}</strong><br />\r\n            { fee > 0 ? \" using a fee of \" + fee : \"\"} \r\n            </DialogContentText>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n              <strong>All transactions are irreversible, so ensure the above details are correct before you continue.</strong>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n        }\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          {step === 0 ?\r\n            <Button onClick={review} color=\"primary\">Review Transaction</Button>\r\n            :\r\n            <Button onClick={submit} color=\"primary\">Confirm Transaction</Button>\r\n          }\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","/* global BigInt */\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {validatePrincipal, NNS_CANISTER_ID} from '../ic/utils.js';\r\nimport {compressAddress} from '../utils.js';\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function TopupForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [open, setOpen] = React.useState(false);\r\n  const [step, setStep] = React.useState(0);\r\n  const [balance, setBalance] = React.useState(false);\r\n  const [rate, setRate] = React.useState(0);\r\n\r\n  const [amount, setAmount] = React.useState(0);\r\n  const [to, setTo] = React.useState('');\r\n    \r\n  //cold API\r\n  const fee = 0.0002;\r\n  const api = extjs.connect(\"https://boundary.ic0.app/\");\r\n\r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const review = () => {\r\n    console.log(amount, fee, amount+fee, (Number(amount)+Number(fee)))\r\n    if (isNaN(amount)) return error(\"Please enter a valid amount to send\");\r\n    if (!validatePrincipal(to)) return error(\"Please enter a valid canister ID\");      \r\n    if ((Number(amount)+Number(fee)) > balance)  return error(\"You have insufficient ICP\"); \r\n    setStep(1);\r\n  }\r\n  const submit = () => {\r\n    //Submit to blockchain here\r\n    var _from_principal = identity.principal;\r\n    var _from_sa = currentAccount;\r\n    var _canister = to;\r\n    var _amount = BigInt(amount*(10**8));\r\n    var _fee = BigInt(0.0001*(10**8));\r\n    //Load signing ID\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    \r\n    props.loader(true);\r\n    handleClose();\r\n    \r\n    //hot api, will sign as identity - BE CAREFUL\r\n    extjs.connect(\"https://boundary.ic0.app/\", id).token().mintCycles(_from_principal, _from_sa, _canister, _amount, _fee).then(r => {\r\n      return props.alert(\"Transaction complete\", \"Your cycles have been minted and sent to your canister\");\r\n    }).catch(e => {\r\n      return error(\"There was an error: \" + e);\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setStep(0);\r\n    setAmount(0);\r\n    setBalance(false);\r\n    setTo('');\r\n  };\r\n  React.useEffect(() => {\r\n    api.canister(NNS_CANISTER_ID).get_icp_to_cycles_conversion_rate().then(b => {\r\n      setRate(Number(b/BigInt(10**10))/(10**2));\r\n    });\r\n    \r\n    api.token().getBalance(props.address, identity.principal).then(b => {\r\n      setBalance(Number(b)/(10**8));\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.data.id, open]);\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose}  maxWidth={'sm'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Top-up your canister</DialogTitle>\r\n        {step === 0 ?\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Please enter the Canister ID and the amount of ICP you would like converted to cycles and added to the canister</DialogContentText>\r\n            <>\r\n              <TextField\r\n                autoFocus\r\n                margin=\"dense\"\r\n                label=\"Canister ID\"\r\n                value={to}\r\n                onChange={(e) => setTo(e.target.value)}\r\n                type=\"text\"\r\n                style={{width:'49%', marginRight:'2%'}}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n              <TextField\r\n                style={{width:'49%'}}\r\n                margin=\"dense\"\r\n                label={\"Amount of ICP to Send\"}\r\n                value={amount}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                type=\"text\"\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n              <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n                { balance !== false ? \"Balance: \"+balance+\" \"+props.data.symbol +\" \": \"\"}\r\n                Min Fee: 0.0002<br />\r\n                <strong style={{color:\"#00b894\"}}>1ICP converts to ~{rate}T Cycles</strong>\r\n              </DialogContentText>\r\n            </>\r\n          </DialogContent>\r\n        :\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n            Please confirm that you are about to send <strong style={{color:'red'}}>{amount} ICP</strong><br /> \r\n            from <strong style={{color:'red'}}>{compressAddress(props.address)}</strong><br />\r\n            to add ~{Math.round(rate*amount*100, 2)/100}T Cycles to <strong style={{color:'red'}}>{compressAddress(to)}</strong><br />\r\n            { fee > 0 ? \" using a fee of \" + fee : \"\"} \r\n            </DialogContentText>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n              <strong>All transactions are irreversible, so ensure the above details are correct before you continue.</strong>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n        }\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          {step === 0 ?\r\n            <Button onClick={review} color=\"primary\">Review Transaction</Button>\r\n            :\r\n            <Button onClick={submit} color=\"primary\">Confirm Transaction</Button>\r\n          }\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Timestamp from 'react-timestamp';\r\nimport extjs from '../ic/extjs.js';\r\nconst formatNumber = n => {\r\n  return n.toFixed(8).replace(/0{1,6}$/, '');\r\n};\r\nvar intervalId = 0;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nconst perPage = 10;\r\nexport default function Transactions(props) {\r\n  const [transactions, setTransactions] = React.useState(false);\r\n  const [page, setPage] = React.useState(1);\r\n  const styles = {\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n    },\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n  };\r\n  const updateTransactions = (_id, _address) => {\r\n    return api.token(_id).getTransactions(_address).then(txs => {\r\n      return [txs, _id, _address];\r\n    });\r\n  }\r\n  const stopPoll = () => {\r\n    if (intervalId) clearInterval(intervalId);\r\n    intervalId = 0;\r\n  }\r\n  const startPoll = () => {\r\n    if (intervalId) stopPoll();\r\n    fetchTx();\r\n    intervalId = setInterval(fetchTx, 10000);\r\n  };\r\n  \r\n  const fetchTx = () => {\r\n    //console.log(\"Fetching for \" + props.data.id);\r\n    updateTransactions(props.data.id, props.address).then(txs => {\r\n      //console.log(\"Fetched for \" + txs[1]);\r\n      //console.log(\"Current \" + props.data.id);\r\n      if (txs[1] !== props.data.id || txs[2] !== props.address) return;\r\n      setTransactions(txs[0]);\r\n    });\r\n  };\r\n  React.useEffect(() => {\r\n    startPoll();\r\n    return () => {\r\n      stopPoll();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  React.useEffect(() => {\r\n    \r\n    stopPoll();\r\n    setTimeout( () => {\r\n      setTransactions(false);\r\n      startPoll();\r\n    }, 100);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.address, props.data.id]);\r\n\r\n  return (\r\n    <>\r\n      {transactions === false ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          Loading transactions...\r\n        </Typography>\r\n      </div> : (transactions.length === 0 ?\r\n        <div style={styles.empty}>\r\n          <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n            No transactions available\r\n          </Typography>\r\n        </div> :\r\n        <>\r\n          {transactions.length > perPage ?\r\n          <Pagination style={{float:\"right\",marginTop:\"10px\",marginBottom:\"20px\"}} size=\"small\" count={Math.ceil(transactions.length/perPage)} page={page} onChange={(e, v) => setPage(v)} />\r\n          : \"\"}\r\n          <TableContainer component={Paper}>\r\n            <Table style={styles.table} aria-label=\"simple table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Date</TableCell>\r\n                  <TableCell>Description</TableCell>\r\n                  <TableCell align=\"right\">Amount</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {transactions.filter((tx,i) => (i >= ((page-1)*perPage) && i < ((page)*perPage))).map((tx, i) => (\r\n                  <TableRow key={props.data.id + props.address + tx.hash + i}>\r\n                    <TableCell component=\"th\" scope=\"row\">\r\n                      <Timestamp relative autoUpdate date={tx.timestamp} />\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {tx.from === props.address ?\r\n                        <>Sent <strong>{tx.amount} {props.data.symbol}</strong> to {tx.to} with a <strong>{tx.fee} {props.data.symbol}</strong> Fee<br />(<a href={\"https://ic.rocks/transaction/\"+tx.hash} target=\"_blank\" rel=\"noreferrer\">View Transaction</a>)</> :\r\n                        <>Received <strong>{tx.amount} {props.data.symbol}</strong> from {tx.from}<br />(<a href={\"https://ic.rocks/transaction/\"+tx.hash} target=\"_blank\" rel=\"noreferrer\">View Transaction</a>)</> }\r\n                    </TableCell>\r\n                    <TableCell align=\"right\">\r\n                      {tx.from === props.address ? \r\n                        <span style={{color:'red',fontWeight:'bold'}}>-{formatNumber(tx.amount + tx.fee)}</span> : \r\n                        <span style={{color:'#00b894',fontWeight:'bold'}}>+{formatNumber(tx.amount)}</span>\r\n                      }\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </>) }\r\n    </>\r\n  );\r\n}\r\n","/* global BigInt */\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {compressAddress} from '../utils.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nexport default function SendNFTForm(props) {\r\n  const addresses = useSelector(state => state.addresses);\r\n  const principals = useSelector(state => state.principals);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [step, setStep] = React.useState(0);\r\n\r\n  const [to, setTo] = React.useState('');\r\n  const [toOption, setToOption] = React.useState('');\r\n    \r\n  const [contacts, setContacts] = React.useState([]);\r\n  \r\n  const dispatch = useDispatch()\r\n  \r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const review = () => {\r\n    setStep(1);\r\n  }\r\n  const submit = () => {\r\n    //Submit to blockchain here\r\n    var _from_principal = identity.principal;\r\n    var _from_sa = currentAccount;\r\n    var _to_user = to;\r\n    var _amount = BigInt(1);\r\n    var _fee = BigInt(0);\r\n    var _memo = \"\";\r\n    var _notify = false;\r\n    \r\n    //Load signing ID\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    \r\n    props.loader(true);\r\n    handleClose();\r\n    \r\n    //hot api, will sign as identity - BE CAREFUL\r\n    extjs.connect(\"https://boundary.ic0.app/\", id).token(props.nft).transfer(_from_principal, _from_sa, _to_user, _amount, _fee, _memo, _notify).then(r => {\r\n      if (r) {\r\n        dispatch({ type: 'account/nft/remove', payload: {id:props.nft}});\r\n        return props.alert(\"Transaction complete\", \"Your transfer was sent successfully\");\r\n      } else {        \r\n        return error(\"Something went wrong with this transfer\");\r\n      }\r\n    }).catch(e => {\r\n      return error(\"There was an error: \" + e);\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    setStep(0);\r\n    setTo('');\r\n    setToOption('');\r\n    props.close()\r\n  };\r\n  React.useEffect(() => {\r\n    var contacts = [];\r\n    addresses.forEach(el => {\r\n      contacts.push({\r\n        group : \"Address Book\",\r\n        name : el.name,\r\n        address : el.address,\r\n      });\r\n    });\r\n    principals.forEach(p => {\r\n      p.accounts.forEach(a => {\r\n        contacts.push({\r\n          group : p.identity.principal,\r\n          name : a.name,\r\n          address : a.address,\r\n        });\r\n      });\r\n    });\r\n    setContacts(contacts);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.nft]);\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={props.open} onClose={handleClose} maxWidth={'sm'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Send NFT</DialogTitle>\r\n        {step === 0 ?\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Please enter the recipient address and amount that you wish to send below.</DialogContentText>\r\n              <Autocomplete\r\n                freeSolo\r\n                value={toOption}\r\n                onChange={(e,v) => { if (v) {\r\n                    setTo(v.address) \r\n                    setToOption(v.address) \r\n                  }\r\n                }}\r\n                inputValue={to}\r\n                onInputChange={(e,v) => setTo(v)}\r\n                getOptionLabel={contact => contact.name || contact}\r\n                groupBy={(contact) => contact.group}\r\n                options={contacts}\r\n                renderInput={(params) => (\r\n                    <TextField\r\n                    {...params}\r\n                    autoFocus\r\n                    margin=\"dense\"\r\n                    label=\"Address of the Recipient\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                )}\r\n              />\r\n          </DialogContent>\r\n        :\r\n          <DialogContent>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n            Please confirm that you are about to send NFT <br />\r\n            <strong style={{color:'red'}}>{props.nft}</strong><br /> \r\n            to <strong style={{color:'red'}}>{compressAddress(to)}</strong>\r\n            </DialogContentText>\r\n            <DialogContentText style={{textAlign:'center'}}>\r\n              <strong>All transactions are irreversible, so ensure the above details are correct before you continue.</strong>\r\n            </DialogContentText>\r\n          </DialogContent>\r\n        }\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          {step === 0 ?\r\n            <Button onClick={review} color=\"primary\">Review Transaction</Button>\r\n            :\r\n            <Button onClick={submit} color=\"primary\">Confirm Transaction</Button>\r\n          }\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","/* global BigInt */\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function ListingForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [price, setPrice] = React.useState(props.nft.price);\r\n        \r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const cancel = () => {\r\n    _submit(0);\r\n  }\r\n  const save = () => {\r\n    if (price < 0.01) return error(\"Min sale amount is 0.01 ICP\"); \r\n    _submit(BigInt(price*(10**8)));\r\n  };\r\n  const _submit = p => {\r\n    //Submit to blockchain here\r\n    var _from_sa = currentAccount;\r\n    var _price = p;\r\n    //Load signing ID\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    props.loader(true);\r\n    handleClose();\r\n    extjs.connect(\"https://boundary.ic0.app/\", id).token(props.nft.id).list(_from_sa, _price).then(r => {\r\n      if (r) {\r\n        props.handleRefresh();\r\n        return props.alert(\"Transaction complete\", \"Your listing has been updated\");\r\n      } else {        \r\n        return error(\"Something went wrong with this transfer\");\r\n      }\r\n    }).catch(e => {\r\n      return error(\"There was an error: \" + e);\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    setPrice(0);\r\n    props.close()\r\n  };\r\n  React.useEffect(() => {\r\n    console.log(props.nft)\r\n    setPrice(props.nft.price ? Number(props.nft.price)/100000000 : 0);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [props.nft]);\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={props.open} onClose={handleClose} maxWidth={'xs'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Marketplace Listing</DialogTitle>\r\n        <DialogContent>\r\n        {props.nft.price === 0 ?\r\n        <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Please enter a price below to create a new marketplace listing. Once you save the listing, it becomes available to the public.</DialogContentText> : \"\"}\r\n         {props.nft.price > 0 ?\r\n        <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Use the form to update the price of your listing, or Cancel the listing below</DialogContentText> : \"\"}\r\n          <TextField\r\n            style={{width:'100%'}}\r\n            margin=\"dense\"\r\n            label={\"Listing price in ICP\"}\r\n            value={price}\r\n            onChange={(e) => setPrice(e.target.value)}\r\n            type=\"text\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n        </DialogContent>\r\n        \r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Back\r\n          </Button>\r\n          {props.nft.price > 0 ? <Button onClick={cancel} color=\"primary\">Cancel Listing</Button> : \"\"}\r\n          <Button onClick={save} color=\"primary\">Save Listing</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport StorefrontIcon from '@material-ui/icons/Storefront';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport SendNFTForm from '../components/SendNFTForm';\r\nimport ListingForm from '../components/ListingForm';\r\nimport extjs from '../ic/extjs.js';\r\nimport {toHexString} from '../ic/utils.js';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport { compressAddress, clipboardCopy } from '../utils.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nconst perPage = 10;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nconst nftMap = {\r\n  \"e3izy-jiaaa-aaaah-qacbq-cai\" : \"Cronics\"\r\n};\r\nconst _showListingPrice = n => {\r\n  n = Number(n) / 100000000;\r\n  return n.toFixed(8).replace(/0{1,6}$/, '');\r\n};\r\nvar allowedPrincipals = [\r\n  \"sensj-ihxp6-tyvl7-7zwvj-fr42h-7ojjp-n7kxk-z6tvo-vxykp-umhfk-wqe\",\r\n  \"gt6pl-emtcy-selas-w57zx-kyok4-5ofde-vf5nq-6773c-2t6bv-bsems-tqe\",\r\n  \"qzbdz-mtxb4-orry7-pvi45-w3e47-sclbg-xqr6z-zld6i-ertsb-xth33-eqe\",\r\n];\r\nexport default function NFTList(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const currentAccount = useSelector(state => state.currentAccount)\r\n  const account = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts[currentAccount] : {}));\r\n  const [nfts, setNfts] = React.useState([]);\r\n  const [page, setPage] = React.useState(1);\r\n  const [tokenDetails, setTokenDetails] = React.useState({});\r\n  const [openNFTForm, setOpenNFTForm] = React.useState(false);\r\n  const [openListingForm, setOpenListingForm] = React.useState(false);\r\n  const [tokenNFT, setTokenNFT] = React.useState('');\r\n  \r\n  const dispatch = useDispatch()\r\n  \r\n  const styles = {\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n    },\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n  };\r\n  \r\n  const sendNft = (id) => {\r\n    setTokenNFT(id);\r\n    setOpenNFTForm(true);\r\n  }\r\n  const listNft = (id) => {\r\n    setTokenNFT(id);\r\n    setOpenListingForm(true);\r\n  }\r\n  const closeNFTForm = () => {\r\n    setOpenNFTForm(false);\r\n    setTokenNFT('');\r\n  };\r\n  const handleRefresh = () => {\r\n    getTokenDetails(tokenNFT.id, true)\r\n  };\r\n  const closeListingForm = () => {\r\n    setOpenListingForm(false);\r\n    setTimeout(() => setTokenNFT(''), 300);\r\n  };\r\n  const deleteNft = (id) => {\r\n    props.confirm(\"Please confirm\", \"You are about to remove this NFT from your account? This does not affect the ownership of the NFT, and you can add it back again in future\").then(v => {\r\n      if (v) dispatch({ type: 'account/nft/remove', payload: {id:id}});\r\n    });\r\n  };\r\n  const getTokenDetails = (id, refresh) => {\r\n    if (typeof tokenDetails[id] == 'undefined') {\r\n      tokenDetails[id] = false;\r\n      setTokenDetails(tokenDetails);\r\n      refresh = true;\r\n    };\r\n    if (refresh) {\r\n      api.token(id).getDetails().then(b => {\r\n        tokenDetails[id] = b;\r\n        const newDetails = {...tokenDetails};\r\n        setTokenDetails(newDetails);\r\n      });\r\n    }\r\n  };\r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  React.useEffect(() => {\r\n    var _nfts = [];\r\n    account.nfts.forEach(nft => {\r\n        getTokenDetails(nft.id);\r\n      _nfts.push({\r\n        id : nft.id,\r\n        canister : extjs.decodeTokenId(nft.id).canister,\r\n        metadata : toHexString(nft.metadata.metadata[0]),\r\n        price : (tokenDetails[nft.id] === false ? false : (tokenDetails[nft.id][1].length === 0 ? 0 : tokenDetails[nft.id][1][0].price)),\r\n        bearer : (tokenDetails[nft.id] === false ? false : tokenDetails[nft.id][0]),\r\n        listing : (tokenDetails[nft.id] === false ? false : (tokenDetails[nft.id][1].length === 0 ? 0 : tokenDetails[nft.id][1])),\r\n        listingText : (tokenDetails[nft.id] !== false ? (tokenDetails[nft.id][1].length === 0 ? \"Not listed\" : \r\n          (tokenDetails[nft.id][1][0].locked.length === 0 ?\r\n            \"Listed for \" + _showListingPrice(tokenDetails[nft.id][1][0].price) + \" ICP\" :\r\n            \"Locked @ \" + _showListingPrice(tokenDetails[nft.id][1][0].price) + \" ICP\" )\r\n        ) : \"Loading...\"),\r\n      })\r\n    });\r\n    setNfts(_nfts);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentAccount, account.nfts, tokenDetails]);\r\n\r\n\r\n  return (\r\n    <>\r\n      {nfts.length === 0 ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          You have no NFT's right now\r\n        </Typography>\r\n      </div> :\r\n      <>\r\n        {nfts.length > perPage ?\r\n        <Pagination style={{float:\"right\",marginTop:\"10px\",marginBottom:\"20px\"}} size=\"small\" count={Math.ceil(nfts.length/perPage)} page={page} onChange={(e, v) => setPage(v)} />\r\n        : \"\"}\r\n        \r\n        <TableContainer component={Paper}>\r\n          <Table style={styles.table} aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"220\" style={{fontWeight:'bold'}}>ID</TableCell>\r\n                <TableCell width=\"100\" style={{fontWeight:'bold'}}>Preview</TableCell>\r\n                <TableCell width=\"220\" style={{fontWeight:'bold'}}>Collection/Canister</TableCell>\r\n                <TableCell style={{fontWeight:'bold'}}>Metadata</TableCell>\r\n                <TableCell width=\"200\" style={{fontWeight:'bold'}}>Marketplace</TableCell>\r\n                <TableCell width=\"150\" align=\"right\" style={{fontWeight:'bold'}}>Actions</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {nfts.filter((nft,i) => (i >= ((page-1)*perPage) && i < ((page)*perPage))).map((nft, i) => {\r\n                return (<TableRow key={nft.id}>\r\n                  <TableCell style={{fontWeight:'bold'}}>\r\n                    {compressAddress(nft.id)}\r\n                    <SnackbarButton\r\n                      message=\"NFT ID Copied\"\r\n                      anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                      }}\r\n                      onClick={() => clipboardCopy(nft.id)}\r\n                    >\r\n                      <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                        <FileCopyIcon  style={{ fontSize: 18 }} />\r\n                      </IconButton>\r\n                    </SnackbarButton>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <a href={\"https://\" + nft.canister + \".raw.ic0.app/?tokenid=\"+nft.id} target=\"_blank\" rel=\"noreferrer\"><img alt={compressAddress(nft.id)} src={\"https://\" + nft.canister + \".raw.ic0.app/?tokenid=\"+nft.id} style={{width:64}} /></a>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    \r\n                    {nftMap[nft.canister] ?? compressAddress(nft.canister)}<Tooltip title=\"View in browser\">\r\n                      <IconButton size=\"small\" href={\"https://\" + nft.canister + \".raw.ic0.app\"} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n                        <LaunchIcon style={{ fontSize: 18 }} />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {nft.metadata.substr(0, 32)+\"...\"}\r\n                    <SnackbarButton\r\n                      message=\"NFT Metadata Copied\"\r\n                      anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                      }}\r\n                      onClick={() => clipboardCopy(nft.metadata)}\r\n                    >\r\n                      <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                        <FileCopyIcon  style={{ fontSize: 18 }} />\r\n                      </IconButton>\r\n                    </SnackbarButton>\r\n                  </TableCell>\r\n                  <TableCell><strong>{nft.listingText}</strong></TableCell>\r\n                  <TableCell align=\"right\">\r\n                    {nft.listing !== false ?\r\n                    <>\r\n                      {nft.bearer === account.address ?\r\n                      <>\r\n                        {allowedPrincipals.indexOf(identity.principal) >= 0 ?\r\n                        <Tooltip title=\"Manage Listing\">\r\n                          <IconButton size=\"small\" onClick={() => listNft(nft)}>\r\n                            <StorefrontIcon size=\"small\" />\r\n                          </IconButton>\r\n                        </Tooltip> \r\n                        : \"\" }\r\n                        <Tooltip title=\"Send\">\r\n                          <IconButton size=\"small\" onClick={() => sendNft(nft.id)}>\r\n                            <SendIcon size=\"small\"  />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      </> : \"\"}\r\n                       <Tooltip title=\"Remove from Stoic\">\r\n                        <IconButton size=\"small\" onClick={() => deleteNft(nft.id)}>\r\n                          <DeleteIcon size=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                    </>\r\n                    : \r\n                      <Tooltip title=\"Remove from Stoic\">\r\n                        <IconButton size=\"small\" onClick={() => deleteNft(nft.id)}>\r\n                          <DeleteIcon size=\"small\" />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                    }\r\n                  </TableCell>\r\n                </TableRow>)\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </>}\r\n      <ListingForm alert={props.alert} handleRefresh={handleRefresh} open={openListingForm} close={closeListingForm} loader={props.loader} error={error} nft={tokenNFT} />\r\n      <SendNFTForm alert={props.alert} open={openNFTForm} close={closeNFTForm} loader={props.loader} error={error} nft={tokenNFT} />\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function MainFab(props) {\r\n  const classes = useStyles();\r\n  const style = {\r\n      margin: 0,\r\n      top: 'auto',\r\n      right: 20,\r\n      bottom: 20,\r\n      left: 'auto',\r\n      position: 'fixed',\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <Fab style={style} {...props}>\r\n        {props.children}\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function InputForm(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(props.defaultValue ?? \"\");\r\n  const [secondaryValue, setSecondaryValue] = React.useState(props.defaultSecondaryValue ?? \"\");\r\n\r\n  const submit = () => {\r\n    if (typeof props.onClick != 'undefined') props.onClick(value, secondaryValue);\r\n    setOpen(false);\r\n    setValue(props.defaultValue ?? \"\");\r\n    setSecondaryValue(props.defaultSecondaryValue ?? \"\");\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">{props.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>{props.content}</DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label={props.inputLabel}\r\n            value={value}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            type=\"text\"\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            fullWidth\r\n          />\r\n          { props.secondaryInput ? \r\n            <TextField\r\n              margin=\"dense\"\r\n              label={props.secondaryInput}\r\n              value={secondaryValue}\r\n              onChange={(e) => setSecondaryValue(e.target.value)}\r\n              type=\"text\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              fullWidth\r\n            /> : \"\" }\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={submit} color=\"primary\">{props.buttonLabel}</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nexport default function AddTokenForm(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(props.defaultValue ?? \"\");\r\n  const [tabValue, setTabValue] = React.useState(\"add\");\r\n\r\n  const submit = () => {\r\n    if (typeof props.onClick != 'undefined') props.onClick(value, tabValue);\r\n    setOpen(false);\r\n    setValue(props.defaultValue ?? \"\");\r\n    setTabValue(\"add\");\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog maxWidth={'sm'} fullWidth open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n        <DialogContent>\r\n          <div style={{marginBottom:\"20px\"}}>\r\n            <Tabs\r\n              value={tabValue}\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              onChange={(e,v) => setTabValue(v)}\r\n              aria-label=\"disabled tabs example\"\r\n            >\r\n              <Tab value=\"add\" label=\"Add Token\" />\r\n              <Tab value=\"find\" label=\"Find Tokens\" />\r\n              <Tab value=\"search\" label=\"Search Collections\" />\r\n            </Tabs>\r\n          </div>\r\n          { tabValue === \"add\" ? \r\n          <div>\r\n            <DialogContentText>Add the Canister ID/Token ID for the token you wish to add</DialogContentText>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              label=\"Canister/Token ID\"\r\n              value={value}\r\n              onChange={(e) => setValue(e.target.value)}\r\n              type=\"text\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              fullWidth\r\n            />\r\n          </div> : \"\" }\r\n          { tabValue === \"find\" ? \r\n          <div>\r\n            <DialogContentText>Enter the Canister ID of an NFT or Multi-token canister to attempt to find your tokens. You can enter an existing NFT Token ID to discover others from the same collection (if auto-discover is supported)</DialogContentText>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              label=\"Canister/Token ID\"\r\n              value={value}\r\n              onChange={(e) => setValue(e.target.value)}\r\n              type=\"text\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              fullWidth\r\n            />\r\n          </div> : \"\"}\r\n          { tabValue === \"search\" ? \r\n          <div>\r\n            <DialogContentText>Use this option to automatically search for tokens you own within trusted multi-token collections/canisters, e.g. our Token Registry or Cronics NFT</DialogContentText>\r\n          </div> : \"\"}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          { tabValue === \"add\" ? <Button onClick={submit} color=\"primary\">Add</Button> : \"\"}\r\n          { tabValue === \"find\" ? <Button onClick={submit} color=\"primary\">Find</Button> : \"\"}\r\n          { tabValue === \"search\" ? <Button onClick={submit} color=\"primary\">Search Trusted</Button> : \"\"}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport EvStationIcon from '@material-ui/icons/EvStation';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Blockie from '../components/Blockie';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport TokenCard from '../components/TokenCard';\r\nimport NFTCard from '../components/NFTCard';\r\nimport SendForm from '../components/SendForm';\r\nimport TopupForm from '../components/TopupForm';\r\nimport Transactions from '../components/Transactions';\r\nimport NFTList from '../components/NFTList';\r\nimport MainFab from '../components/MainFab';\r\nimport InputForm from '../components/InputForm';\r\nimport AddTokenForm from '../components/AddTokenForm';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {validatePrincipal} from '../ic/utils.js';\r\nimport { clipboardCopy } from '../utils';\r\n\r\n\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nfunction AccountDetail(props) {\r\n  const currentToken = useSelector(state => state.currentToken);\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const currentAccount = useSelector(state => state.currentAccount);\r\n  const principal = useSelector(state => state.principals[currentPrincipal].identity.principal);\r\n  const apps = useSelector(state => state.principals[currentPrincipal].apps);\r\n  const idtype = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity.type : \"\"));\r\n  const account = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts[currentAccount] : {}));\r\n  const [tokens, setTokens] = React.useState(account.tokens);\r\n  \r\n  const dispatch = useDispatch()\r\n  \r\n  React.useEffect(() => {\r\n    const windowUrl = window.location.search;\r\n    const params = new URLSearchParams(windowUrl);\r\n    const authorizeApp = params.get('authorizeApp');\r\n    if (authorizeApp !== null) {\r\n      window.addEventListener('message', function(e) {\r\n        if (e.source === window.opener) {\r\n          if (e.data.action === 'requestAuthorization') {\r\n            var app = apps.find(a => a.host === e.origin);\r\n            var authResponse = {\r\n              action : \"confirmAuthorization\", \r\n              principal : principal, \r\n              key : StoicIdentity.getIdentity(principal).getPublicKey().toDer(), \r\n              type : (StoicIdentity.getIdentity(principal).hasOwnProperty('_delegation') ? \"DelegationIdentity\" : \"Standard\"),\r\n            }\r\n            if (app && app.apikey === e.data.apikey) {\r\n              window.opener.postMessage(authResponse, \"*\");              \r\n            } else {\r\n              if (window.confirm(\"Do you want to authorize \\\"\" + e.origin + \"\\\" to access your princpal \\\"\"+principal+\"\\\"?\")) {\r\n                if (!app) {\r\n                  app = {\r\n                    host : e.origin,\r\n                    apikey : e.data.apikey\r\n                  };\r\n                  dispatch({ type: 'app/add', payload: {app:app}});\r\n                } else {\r\n                  app.apikey = e.data.apikey;\r\n                  dispatch({ type: 'app/edit', payload: {app:app}});\r\n                }\r\n                window.opener.postMessage(authResponse, \"*\");\r\n              } else {              \r\n                window.opener.postMessage({action : \"rejectAuthorization\"}, \"*\");\r\n              };\r\n            }\r\n          };\r\n        }\r\n      } , false);\r\n      window.opener.postMessage({action : \"initiateStoicConnect\"}, \"*\");\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  React.useEffect(() => {\r\n    setTokens(account.tokens);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentToken, currentAccount, currentPrincipal]);\r\n  \r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    grid: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2)\r\n    }\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  const alert = (t, m) => {\r\n    props.alert(t, m);\r\n  };\r\n  \r\n  const changeToken = (i) => {\r\n    dispatch({ type: 'currentToken', payload: {index:i}});\r\n  }\r\n  const editAccountName = (name) => {\r\n    if (!name) return error(\"Please enter a valid account name\");\r\n    if (name.length > 20) return error(\"Max length or account names is 20 characters\");\r\n    dispatch({ type: 'account/edit', payload: {name:name}});\r\n  };\r\n  const _addToken = (cid, checkBearer) => {\r\n    return new Promise(function(resolve, reject) { \r\n      api.token(cid).getMetadata().then(md => {\r\n        if (md.type === 'fungible') {\r\n          md.id = cid;\r\n          dispatch({ type: 'account/token/add', payload: {\r\n            metadata : md\r\n          }});\r\n          resolve(account.tokens.length);\r\n        } else {\r\n          var nft = {\r\n            id : cid,\r\n            metadata : md\r\n          };\r\n          if (checkBearer) {\r\n            api.token(cid).getBearer().then(b => {\r\n              if (b === account.address) {\r\n                dispatch({ type: 'account/nft/add', payload: {\r\n                  nft : nft\r\n                }});\r\n                resolve(\"nft\");\r\n              } else {\r\n                reject(error(\"Sorry, you don't own this NFT\"));\r\n              };\r\n            }).catch(reject);\r\n          } else {\r\n          dispatch({ type: 'account/nft/add', payload: {\r\n            nft : nft\r\n          }});\r\n          resolve(\"nft\");\r\n          }\r\n        }\r\n      }).catch(reject);\r\n    });\r\n  };\r\n  const addToken = (cid, type) => {\r\n    if (type === 'add') {\r\n      if (!validatePrincipal(cid)) return error(\"Please enter a valid canister ID\");\r\n      if (account.tokens.findIndex(x => x.id === cid) >= 0) return error(\"Token has already been added\");\r\n      if (account.nfts.findIndex(x => x.id === cid) >= 0) return error(\"Token has already been added\");\r\n      props.loader(true);\r\n      _addToken(cid, true).then(nt => {\r\n        dispatch({ type: 'currentToken', payload: {index:nt}});\r\n      }).finally(() => {\r\n        props.loader(false);\r\n      });\r\n    } else if (type === 'find') {\r\n      if (!validatePrincipal(cid)) return error(\"Please enter a valid canister ID\");\r\n      props.loader(true);\r\n      api.token(cid).getTokens(account.address).then(async tokens => {\r\n        await Promise.all(tokens.filter((ct, i) => (account.tokens.findIndex(x => x.id === ct) < 0 && account.nfts.findIndex(x => x.id === ct) < 0)).map((ct,i) => {\r\n          return _addToken(ct, false);\r\n        }));\r\n        dispatch({ type: 'currentToken', payload: {index:\"nft\"}});\r\n      }).catch(e => {\r\n        console.log(e);\r\n        return error(\"This canister does not support auto-discovery of tokens or you do not have any available\");\r\n      }).finally(() => {\r\n        props.loader(false);\r\n      });\r\n    } else if (type === 'search') {\r\n      props.loader(true);\r\n      let trustedCanisters = [\"e3izy-jiaaa-aaaah-qacbq-cai\", \"kxh4l-cyaaa-aaaah-qadaq-cai\"];\r\n      var ps = [];\r\n      for(var i = 0; i < trustedCanisters.length; i++) {\r\n        ps.push(api.token(trustedCanisters[i]).getTokens(account.address).then(async tokens => {\r\n          return Promise.all(tokens.filter((ct, i) => (account.tokens.findIndex(x => x.id === ct) < 0 && account.nfts.findIndex(x => x.id === ct) < 0)).map((ct,i) => {\r\n            return _addToken(ct, false);\r\n          }));\r\n        }));\r\n      };\r\n      Promise.all(ps.map(p => p.catch(e => e))).then(() => {\r\n        dispatch({ type: 'currentToken', payload: {index:\"nft\"}});\r\n      }).finally(() => {\r\n        props.loader(false);\r\n      });\r\n    };\r\n  };\r\n  return (\r\n    <div style={styles.root}>\r\n      <List>\r\n        <ListItem>\r\n          <ListItemAvatar>\r\n            <Avatar style={{width:60, height:60}}>\r\n              <Blockie address={account.address} />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText \r\n            style={{paddingLeft:20}}\r\n            primaryTypographyProps={{noWrap:true, variant:'h4'}} \r\n            secondaryTypographyProps={{noWrap:true, variant:'subtitle1'}} \r\n            primary={account.name}\r\n            secondary={\r\n              <div style={{overflow: \"hidden\", textOverflow: \"ellipsis\"}}> \r\n                {account.address.substr(0, 22)+\"...\"}\r\n                <SnackbarButton\r\n                  message=\"Address Copied\"\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                  }}\r\n                  onClick={() => clipboardCopy(account.address)}\r\n                >\r\n                  <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                    <FileCopyIcon style={{ fontSize: 18 }} />\r\n                  </IconButton>\r\n                </SnackbarButton>\r\n              </div>\r\n            }              />\r\n          <ListItemSecondaryAction>\r\n            <InputForm\r\n              onClick={editAccountName}\r\n              title=\"Change Account Name\"\r\n              inputLabel=\"Account Name\"\r\n              secondaryInput={false}\r\n              content=\"Enter a new friendly name for this account.\"\r\n              defaultValue={account.name}\r\n              buttonLabel=\"Save\"\r\n            >\r\n              <Tooltip title=\"Edit account name\">\r\n                <IconButton edge=\"end\" aria-label=\"edit\">\r\n                  <EditIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </InputForm>\r\n            <Tooltip title=\"View in explorer (ic.rocks)\">\r\n              <IconButton href={\"https://ic.rocks/account/\"+account.address} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n                <LaunchIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      </List>\r\n      <div style={styles.grid}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          direction=\"row\"\r\n          justifyContent=\"flex-start\"\r\n          alignItems=\"flex-start\"\r\n        >\r\n          {tokens.map((token, index) => {\r\n            return (<TokenCard key={account.address + token.symbol} address={account.address} data={token} onClick={() => changeToken(index)} selected={index === currentToken} />)\r\n          })}\r\n          { account.nfts.length > 0 ? <NFTCard address={account.address} onClick={() => changeToken('nft')} selected={currentToken === 'nft'} /> : \"\" }\r\n          <Grid style={styles.root} item xl={2} lg={3} md={4}>\r\n            <AddTokenForm onClick={addToken}>\r\n              <Tooltip title=\"Add a new token to this account\">\r\n                <Fab color=\"primary\" aria-label=\"add\">\r\n                  <AddIcon />\r\n                </Fab>\r\n              </Tooltip>\r\n            </AddTokenForm>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n      {currentToken !== 0 && currentToken !== 'nft'?\r\n      <div style={{marginLeft:'15px', color:'rgba(0, 0, 0, 0.54)'}}>\r\n        <strong>Token ID:</strong> {account.tokens[currentToken].id}\r\n        <SnackbarButton\r\n          message=\"Token ID Copied\"\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n          }}\r\n          onClick={() => clipboardCopy(account.tokens[currentToken].id)}\r\n        >\r\n          <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n            <FileCopyIcon style={{ fontSize: 14 }} />\r\n          </IconButton>\r\n        </SnackbarButton>\r\n      </div>: \"\"}\r\n      {currentToken === 'nft' ? <NFTList alert={alert} error={error} confirm={props.confirm} loader={props.loader} /> : \"\"}\r\n      {currentToken !== 'nft' ? <Transactions data={account.tokens[currentToken]} address={account.address} /> : \"\"}\r\n      {idtype === 'watch' ? \"\" :\r\n        <>\r\n          { currentToken === 0 ?\r\n          <TopupForm alert={alert} loader={props.loader} error={error} address={account.address} data={account.tokens[currentToken]}>\r\n              <MainFab style={{inset: \"auto 12px 80px auto\",position:\"fixed\"}} color=\"primary\" aria-label=\"send\"><EvStationIcon /></MainFab>\r\n          </TopupForm> : \"\" }\r\n          {currentToken !== 'nft' ? \r\n          <SendForm alert={alert} loader={props.loader} error={error} address={account.address} data={account.tokens[currentToken]}>\r\n            <MainFab color=\"primary\" aria-label=\"send\"><SendIcon /></MainFab>\r\n          </SendForm> : \"\" }\r\n        </>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default  AccountDetail;","import React from 'react';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MainFab from '../components/MainFab';\r\nimport InputForm from '../components/InputForm';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport Blockie from '../components/Blockie';\r\nimport { clipboardCopy } from '../utils';\r\nimport {validatePrincipal, validateAddress} from '../ic/utils.js';\r\nfunction AddressBook(props) {\r\n  const addresses = useSelector(state => state.addresses)\r\n  const dispatch = useDispatch()\r\n  \r\n  const editAddress = (name, address, index) => {\r\n    dispatch({ type: 'addresses/edit', payload: {\r\n      index : index,\r\n      name : name,\r\n      address : address,\r\n    }});\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  const addAddress = (name, address) => {\r\n    if (!name) return error(\"Please enter a valid contact name\");\r\n    if (name.length > 30) return error(\"Max length or contact names is 30 characters\");\r\n    if (!validateAddress(address) && !validatePrincipal(address)) return error(\"Please enter a valid address or principal\");\r\n    dispatch({ type: 'addresses/add', payload: {\r\n      name : name,\r\n      address : address,\r\n    }});\r\n  };\r\n  const deleteAddress = (id) => {\r\n    dispatch({ type: 'addresses/delete', payload: id});\r\n  };\r\n  \r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n      paddingTop : 30\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      { addresses.length > 0 ?\r\n        <List>\r\n          {addresses.map((contact, index) => {\r\n            return (\r\n              <ListItem key={index}>\r\n                <ListItemAvatar>\r\n                  <Avatar>\r\n                    <Blockie address={contact.address} />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText \r\n                  primaryTypographyProps={{noWrap:true}} \r\n                  secondaryTypographyProps={{noWrap:true}} \r\n                  primary={contact.name}\r\n                  secondary={\r\n                    <>\r\n                      {contact.address}\r\n                      <SnackbarButton\r\n                        message=\"Address Copied\"\r\n                        anchorOrigin={{\r\n                          vertical: 'bottom',\r\n                          horizontal: 'left',\r\n                        }}\r\n                        onClick={() => clipboardCopy(contact.address)}\r\n                      >\r\n                        <IconButton size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                          <FileCopyIcon style={{ fontSize: 18 }} />\r\n                        </IconButton>\r\n                      </SnackbarButton>\r\n                    </>\r\n                  } />\r\n                <ListItemSecondaryAction>\r\n                  <InputForm\r\n                    onClick={(name, address) => editAddress(name, address, index)}\r\n                    title=\"Edit contact from address book\"\r\n                    inputLabel=\"Contact Name\"\r\n                    secondaryInput=\"Contact Address\"\r\n                    content=\"Update the details of a saved contact\"\r\n                    buttonLabel=\"Save\"\r\n                    defaultValue={contact.name} \r\n                    defaultSecondaryValue={contact.address} \r\n                  >\r\n                    <IconButton edge=\"end\" aria-label=\"edit\">\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                  </InputForm>\r\n                  <IconButton onClick={() => deleteAddress(index)} edge=\"end\" aria-label=\"delete\">\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            )\r\n          })}\r\n        </List> :\r\n        <div style={styles.empty}>\r\n          <Typography paragraph align=\"center\">\r\n            <PeopleIcon style={styles.largeIcon} />\r\n          </Typography>\r\n          <Typography paragraph style={{fontWeight:\"bold\"}} align=\"center\">\r\n            Your address book is empty\r\n          </Typography>\r\n          <Typography paragraph align=\"center\">\r\n            You can create contacts in your address book to associate addresses with easy to read names.\r\n          </Typography>\r\n        </div>\r\n      }\r\n      <InputForm\r\n        onClick={addAddress}\r\n        title=\"Add contact to address book\"\r\n        inputLabel=\"Contact Name\"\r\n        secondaryInput=\"Contact Address\"\r\n        content=\"Save names and addresses of common people and services.\"\r\n        buttonLabel=\"Save\"\r\n      >\r\n        <MainFab color=\"primary\" aria-label=\"add\"><AddIcon /></MainFab>\r\n      </InputForm>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddressBook;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport extjs from '../ic/extjs.js';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { principalToAccountIdentifier} from '../ic/utils.js';\r\nimport {compressAddress} from '../utils.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Blockie from '../components/Blockie';\r\nimport NeuronManager from '../ic/neuron.js';\r\n\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nexport default function NeuronForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []))\r\n  const dispatch = useDispatch()\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [step, setStep] = React.useState(0);\r\n  const [balance, setBalance] = React.useState(false);\r\n  const [amount, setAmount] = React.useState('');\r\n  const [subaccount, setSubaccount] = React.useState(0);\r\n  \r\n  React.useEffect(() => {\r\n    if (subaccount !== false) {\r\n      api.token().getBalance(principalToAccountIdentifier(identity.principal, subaccount), identity.principal).then(b => {\r\n        setBalance(Number(b)/(10**8));\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [subaccount]);\r\n  \r\n  //cold API\r\n\r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n  const review = () => {\r\n    if (isNaN(amount)) return error(\"Please enter a valid amount to send\");\r\n    if ((Number(amount)+Number(0.0001)) > balance)  return error(\"You have insufficient ICP\"); \r\n    if (Number(amount) < 1)  return error(\"Min staking amount is 1 ICP\"); \r\n    setStep(2);\r\n  }\r\n  const submit = () => {\r\n    props.loader(true);\r\n    setOpen(false);\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    NeuronManager.create(amount, id, subaccount).then(n => {\r\n      dispatch({ type: 'neuron/add', payload : {neuron : n}});\r\n    }).finally(handleClose)\r\n  };\r\n  const handleClick = () => {\r\n    if (accounts.length === 1) setStep(1);\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    props.loader(false);\r\n    setTimeout(() => {\r\n      setStep(0);\r\n      setBalance(false);\r\n      setAmount('');\r\n      setSubaccount(0)\r\n    }, 200);\r\n  };\r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose}  maxWidth={'xs'} fullWidth >\r\n        {step === 0 ?\r\n          <>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Choose an account to stake from</DialogTitle>\r\n            <DialogContent>\r\n              <List>\r\n                {accounts.map((account, index) => {\r\n                  return (\r\n                      <ListItem key={index} button onClick={() => { setSubaccount(index); setStep(1); }}>\r\n                        <ListItemAvatar>\r\n                          <Avatar>\r\n                            <Blockie address={account.address} />\r\n                          </Avatar>\r\n                        </ListItemAvatar>\r\n                        <ListItemText \r\n                          primaryTypographyProps={{noWrap:true}} \r\n                          secondaryTypographyProps={{noWrap:true}} \r\n                          primary={account.name}\r\n                          secondary={account.address} />\r\n                      </ListItem>\r\n                  )\r\n                })}\r\n              </List>\r\n            </DialogContent> \r\n          </>\r\n        : \"\" }\r\n        {step === 1 ?\r\n          <>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Set the amount you want to stake</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>You can add more ICP to this neuron, or change neuron settings later.</DialogContentText>\r\n              <>\r\n                <TextField\r\n                  fullWidth\r\n                  margin=\"dense\"\r\n                  label={\"Amount of ICP to Stake\"}\r\n                  value={amount}\r\n                  InputLabelProps={{\r\n                    shrink: true,\r\n                  }}\r\n                  onChange={(e) => setAmount(e.target.value)}\r\n                  type=\"text\"\r\n                />\r\n                <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n                  { balance !== false ? \"Balance: \"+balance+\" ICP \": \"\"}\r\n                 Fee: 0.0001\r\n                </DialogContentText>\r\n              </>\r\n\r\n            </DialogContent> \r\n            <DialogActions>\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={review} color=\"primary\">Review Transaction</Button>\r\n            </DialogActions>\r\n          </>\r\n        : \"\"}\r\n        {step === 2 ?\r\n          <>\r\n            <DialogContent>\r\n              <DialogContentText style={{textAlign:'center'}}>\r\n              Please confirm that you are about to stake <br />\r\n              <strong style={{color:'red'}}>{amount} ICP</strong><br /> \r\n              from <strong style={{color:'red'}}>{compressAddress(accounts[subaccount].address)}</strong><br />\r\n              using a fee of 0.0001\r\n              </DialogContentText>\r\n              <DialogContentText style={{textAlign:'center'}}>\r\n                <strong>All transactions are irreversible, so ensure the above details are correct before you continue.</strong>\r\n              </DialogContentText>\r\n            </DialogContent> \r\n            <DialogActions>\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={submit} color=\"primary\">Stake ICP</Button>\r\n            </DialogActions>\r\n          </>\r\n        : \"\" }\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","/* global BigInt */\r\nimport React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport LockOpen from '@material-ui/icons/LockOpen';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport { useSelector } from 'react-redux'\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nexport default function Neuron(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  \r\n  const _formatDateHelper = (d, t) => {\r\n    return d + \" \" + t + (d !== 1 ? \"s\" : \"\");\r\n  };\r\n  const error = props.error;\r\n  const action = async (t) => {\r\n    closeMenu();\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    switch(t){\r\n      case 0: //Start dissolve\r\n        props.loader(true);\r\n        await props.neuron.startDissolving();\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      case 1: //Stop dissolve\r\n        props.loader(true);\r\n        await props.neuron.stopDissolving();\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      case 2: //Disburse\r\n        props.loader(true);\r\n        await props.neuron.disburse();\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      case 3: //Spawn rewards\r\n        props.loader(true);\r\n        await props.neuron.spawn();\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      case 4: //Increase delay\r\n        var currentDelay = Number(props.neuron.data.dissolve_delay);\r\n        var increasedDelay = await props.showNeuronDelayForm(currentDelay);\r\n        props.loader(true);\r\n        await props.neuron.increaseDissolveDelay(increasedDelay);\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      case 5: //Topup neuron\r\n        var [subaccount, topupamount] = await props.showNeuronTopupForm();\r\n        props.loader(true);\r\n        await props.neuron.topup(subaccount, topupamount);\r\n        await props.neuron.update();\r\n        props.loader(false);\r\n      break;\r\n      default: break;\r\n    }\r\n    \r\n  }\r\n  const showMenu = (e) => {\r\n    setAnchorEl(e.currentTarget);\r\n    \r\n  };\r\n  const closeMenu = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const formatDate = (d) => {\r\n    if (d < 2) return \"now\";\r\n    if (d < 60) return d + \" seconds\";\r\n    if (d < 3600) return _formatDateHelper(Math.round(d/60), \"minute\");\r\n    if (d < 3600 * 24) return _formatDateHelper(Math.round(d/3600), \"hour\");\r\n    if (d < 3600 * 24 * 7) return _formatDateHelper(Math.round(d/3600 / 24), \"day\");\r\n    if (d < 3600 * 24 * 7 * 52/12) return _formatDateHelper(Math.round(d/3600 / 24 / 7), \"week\");\r\n    if (d < 3600 * 24 * 7 * 52) return _formatDateHelper(Math.round(d/3600 / 24 / 7 / (52/12)), \"month\");\r\n    if (d < 3600 * 24 * 7 * 52 * 8) return _formatDateHelper(Math.round(d/3600 / 24 / 7 / 52 * 10)/10, \"year\");\r\n    return \"8 years\";//max\r\n  };\r\n  return (\r\n    <Grid style={{height:'100%'}} item xl={3} lg={4} md={6} sm={12}>\r\n        <Card>\r\n          <CardHeader\r\n          action={\r\n            <>\r\n              <IconButton onClick={showMenu} aria-label=\"settings\">\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n              <Menu\r\n                id=\"simple-menu\"\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={closeMenu}\r\n              >\r\n                {props.neuron.data.state === 1 ? <MenuItem onClick={() => action(0)}>Start Dissolving</MenuItem> : \"\"}\r\n                {props.neuron.data.state === 2 ? <MenuItem onClick={() => action(1)}>Stop Dissolving</MenuItem> : \"\"}\r\n                {props.neuron.data.state === 3 && props.neuron.data.stake > 0n  ? <MenuItem onClick={() => action(2)}>Disburse</MenuItem> : \"\"}\r\n                {props.neuron.data.maturity > 0n ? <MenuItem onClick={() => action(3)}>Spawn Rewards Neuron</MenuItem> : \"\"}\r\n                \r\n                <MenuItem onClick={() => action(4)}>Increase Dissolve Delay</MenuItem>\r\n                <MenuItem onClick={() => action(5)}>Top-up Neuron</MenuItem>\r\n              </Menu>\r\n            </>\r\n          }\r\n          title={\r\n            <Typography style={{fontSize: 14}} color={\"secondary\"}>\r\n              {props.neuron.data.state === 1 ? <>Delay set to {formatDate(Number(props.neuron.data.dissolve_delay))}</> : \"\"}\r\n              {props.neuron.data.state === 2 ? <>Unlocking in {formatDate(Number(props.neuron.data.dissolve_delay))}</> : \"\"}\r\n              {props.neuron.data.state === 3 && props.neuron.data.stake === 0n ? <>Neuron is empty</> : \"\"}\r\n              {props.neuron.data.state === 3 && props.neuron.data.stake > 0n ? <>Ready to disburse</> : \"\"}\r\n            </Typography>\r\n          }\r\n          subheader={\r\n            <Typography style={{fontSize: 14}} color={\"primary\"}>\r\n              {\"#\"+props.neuron.id}\r\n              <IconButton href={\"https://ic.rocks/neuron/\"+props.neuron.id} target=\"_blank\" size=\"small\" edge=\"end\" aria-label=\"copy\">\r\n                <LaunchIcon style={{ fontSize: 18 }} />\r\n              </IconButton>\r\n            </Typography>}\r\n        />\r\n            <CardContent>\r\n                <>\r\n                  <Grid container spacing={2} direction=\"row\" justify=\"flex-start\" alignItems=\"flex-start\" >\r\n                    <Grid style={{height:'100%'}} item md={8}>\r\n                      <Typography variant=\"h5\" >\r\n                      {Number(props.neuron.data.stake/BigInt(10**6))/(10**2)} ICP\r\n                      </Typography>\r\n                      <Typography style={{fontSize: 14}} color={\"inherit\"} gutterBottom>\r\n                        Rewards: {Number(props.neuron.data.maturity/BigInt(10**6))/(10**2)} ICP\r\n                      </Typography>\r\n                    </Grid>\r\n                    <Grid style={{height:'100%', textAlign:'center'}} item md={4}>\r\n                      {props.neuron.data.state === 1  ? <LockIcon style={{fontSize: 52}} />: \"\"}\r\n                      {props.neuron.data.state === 2 ? <CircularProgress style={{fontSize: 52}} />: \"\"}\r\n                      {props.neuron.data.state === 3 && props.neuron.data.stake === 0n ? <LockOpen style={{fontSize: 52}} />: \"\"}\r\n                      {props.neuron.data.state === 3 && props.neuron.data.stake > 0n ? <AllInclusiveIcon style={{fontSize: 52}} />: \"\"}\r\n                    </Grid>\r\n                  </Grid>\r\n                </>\r\n            </CardContent>\r\n        </Card>\r\n    </Grid>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from '@material-ui/core/TextField';\r\nexport default function NeuronDelayForm(props) {\r\n  const [delay, setDelay] = React.useState(false);\r\n  const [amount, setAmount] = React.useState(10);\r\n  const [period, setPeriod] = React.useState(60);\r\n  const _formatDateHelper = (d, t) => {\r\n    return d + \" \" + t + (d !== 1 ? \"s\" : \"\");\r\n  };\r\n  const formatDate = (d) => {\r\n    if (d < 2) return \"now\";\r\n    if (d < 60) return d + \" seconds\";\r\n    if (d < 3600) return _formatDateHelper(Math.round(d/60), \"minute\");\r\n    if (d < 3600 * 24) return _formatDateHelper(Math.round(d/3600), \"hour\");\r\n    if (d < 3600 * 24 * 7) return _formatDateHelper(Math.round(d/3600 / 24), \"day\");\r\n    if (d < 3600 * 24 * 7 * 52/12) return _formatDateHelper(Math.round(d/3600 / 24 / 7), \"week\");\r\n    if (d < 3600 * 24 * 7 * 52) return _formatDateHelper(Math.round(d/3600 / 24 / 7 / (52/12)), \"month\");\r\n    if (d < 3600 * 24 * 7 * 52 * 8) return _formatDateHelper(Math.round(d/3600 / 24 / 7 / 52 * 10)/10, \"year\");\r\n    return \"8 years\";//max\r\n  };\r\n  React.useEffect(() => {\r\n    if ((amount * period) + props.currentDelay > (3600 * 24 * 7 * 52 * 8)) {\r\n      setDelay((3600 * 24 * 7 * 52 * 8) - props.currentDelay);\r\n      setAmount(Math.floor((3600 * 24 * 7 * 52 * 8)/period*100)/100);\r\n    } else {      \r\n      setDelay(amount * period);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [amount, period]);\r\n  return (\r\n    <>\r\n      <Dialog open={props.open} onClose={props.onClose}  maxWidth={'xs'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Increase Dissolve Delay</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText style={{textAlign:'center'}}>\r\n            Please enter the amount you want to <strong>increase your Dissolve Delay</strong> - this is the length of time it takes for the ICP contained within this neuron to become available once it is set to dissolve.\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Delay\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            type=\"text\"\r\n            style={{width:'49%', marginRight:'2%'}}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n          <FormControl style={{width:'49%',top:5}}>\r\n            <InputLabel shrink id=\"demo-simple-select-helper-label\">Period</InputLabel>\r\n            <Select\r\n              value={period}\r\n              onChange={(e) => setPeriod(e.target.value)}\r\n            >\r\n              <MenuItem value={60}>Minutes</MenuItem>\r\n              <MenuItem value={60*60}>Hours</MenuItem>\r\n              <MenuItem value={60*60*24}>Days</MenuItem>\r\n              <MenuItem value={60*60*24*7}>Weeks</MenuItem>\r\n              <MenuItem value={60*60*24*7*52/12}>Months</MenuItem>\r\n              <MenuItem value={60*60*24*365}>Years</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n            Current Dissolve Delay: {formatDate(props.currentDelay)} <br />\r\n              {delay ? <strong>New Dissolve Delay: {formatDate(props.currentDelay + delay)}< /strong> : \"\" }\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={props.onClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={() => props.onSubmit(delay)} color=\"primary\">Confirm Change</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { useSelector } from 'react-redux'\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Blockie from '../components/Blockie';\r\nimport extjs from '../ic/extjs.js';\r\nimport { principalToAccountIdentifier} from '../ic/utils.js';\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nexport default function NeuronDelayForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []))\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [amount, setAmount] = React.useState(10);\r\n  const [step, setStep] = React.useState(0);\r\n  const [subaccount, setSubaccount] = React.useState(0);\r\n  const [balance, setBalance] = React.useState(false);\r\n  \r\n  React.useEffect(() => {\r\n    if (subaccount !== false) {\r\n      api.token().getBalance(principalToAccountIdentifier(identity.principal, subaccount), identity.principal).then(b => {\r\n        setBalance(Number(b)/(10**8));\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [subaccount, props.open]);\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={props.open} onClose={props.onClose}  maxWidth={'xs'} fullWidth >\r\n        {step === 0 ?\r\n          <>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Choose an account to stake from</DialogTitle>\r\n            <DialogContent>\r\n              <List>\r\n                {accounts.map((account, index) => {\r\n                  return (\r\n                      <ListItem key={index} button onClick={() => { setSubaccount(index); setStep(1); }}>\r\n                        <ListItemAvatar>\r\n                          <Avatar>\r\n                            <Blockie address={account.address} />\r\n                          </Avatar>\r\n                        </ListItemAvatar>\r\n                        <ListItemText \r\n                          primaryTypographyProps={{noWrap:true}} \r\n                          secondaryTypographyProps={{noWrap:true}} \r\n                          primary={account.name}\r\n                          secondary={account.address} />\r\n                      </ListItem>\r\n                  )\r\n                })}\r\n              </List>\r\n            </DialogContent> \r\n          </>\r\n        : \"\" }\r\n        {step === 1 ?\r\n          <>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Set the amount you want to stake</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>You can add more ICP to this neuron, or change neuron settings later.</DialogContentText>\r\n            \r\n              <TextField\r\n                fullWidth\r\n                margin=\"dense\"\r\n                label={\"Amount of ICP to Stake\"}\r\n                value={amount}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                onChange={(e) => setAmount(e.target.value)}\r\n                type=\"text\"\r\n              />\r\n              <DialogContentText style={{fontSize:'small',textAlign:'center', marginTop:\"20px\"}}>\r\n                { balance !== false ? \"Balance: \"+balance+\" ICP \": \"\"}\r\n               Fee: 0.0001\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={props.onClose} color=\"primary\">\r\n                Cancel\r\n              </Button>\r\n              <Button onClick={() => props.onSubmit([subaccount, amount])} color=\"primary\">Top-up Neuron</Button>\r\n            </DialogActions>\r\n          </>\r\n        : \"\" }\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport NeuronForm from '../components/NeuronForm';\r\nimport MainFab from '../components/MainFab';\r\nimport Neuron from '../components/Neuron';\r\nimport NeuronManager from '../ic/neuron.js';\r\nimport NeuronDelayForm from '../components/NeuronDelayForm';\r\nimport TopupNeuronForm from '../components/TopupNeuronForm';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nvar cb = null;\r\nfunction Neurons(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const neurons = useSelector(state => state.principals[currentPrincipal].neurons);\r\n  const theme = useTheme();\r\n  const dispatch = useDispatch()\r\n  const [neuronDelayOpen, setNeuronDelayOpen] = React.useState(false);\r\n  const [neuronTopupOpen, setNeuronTopupOpen] = React.useState(false);\r\n  const [neuronCurrentDelay, setNeuronCurrentDelay] = React.useState(0);\r\n  \r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n      paddingTop : 30\r\n    },\r\n    grid: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2)\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n  React.useEffect(() => {\r\n    if (neurons.length === 0) scanNeurons();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  \r\n  const scanNeurons = () => {\r\n    props.loader(true);\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    if (!id) return error(\"Something wrong with your wallet, try logging in again\");\r\n    NeuronManager.scan(id).then(ns => {\r\n      dispatch({ type: 'neuron/scan', payload : {neurons : ns}});\r\n    }).finally(() => {\r\n      props.loader(false);\r\n    });\r\n  }\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  \r\n  const neuronDelaySubmit = (d) => {\r\n    neuronDelayClose();\r\n    cb(d);\r\n    cb = null;\r\n  }  \r\n  const neuronDelayClose = () => {    \r\n    setNeuronCurrentDelay(null);\r\n    setNeuronDelayOpen(false);\r\n  };\r\n  const showNeuronDelayForm = (currentDelay) => {\r\n    setNeuronDelayOpen(true);\r\n    setNeuronCurrentDelay(currentDelay);\r\n    return new Promise((resolve, reject) => {\r\n      cb = resolve;\r\n    });\r\n  };\r\n  const neuronTopupSubmit = (d) => {\r\n    neuronTopupClose();\r\n    cb(d);\r\n    cb = null;\r\n  }  \r\n  const neuronTopupClose = () => {    \r\n    setNeuronTopupOpen(false);\r\n  };\r\n  const showNeuronTopupForm = () => {\r\n    setNeuronTopupOpen(true);\r\n    return new Promise((resolve, reject) => {\r\n      cb = resolve;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={styles.root}>\r\n      {neurons.length === 0 ? \r\n        <div style={styles.empty}>\r\n          <Typography paragraph align=\"center\">\r\n            <AllInclusiveIcon style={styles.largeIcon} />\r\n          </Typography>\r\n          <Typography paragraph style={{fontWeight:\"bold\"}} align=\"center\">\r\n            No neurons available\r\n          </Typography>\r\n        </div> \r\n      : \r\n        <>\r\n          <div style={styles.grid}>\r\n            <Grid\r\n              container\r\n              spacing={2}\r\n              direction=\"row\"\r\n              justify=\"flex-start\"\r\n              alignItems=\"flex-start\"\r\n            >\r\n            {neurons.map(n => {\r\n            return (<Neuron showNeuronTopupForm={showNeuronTopupForm} showNeuronDelayForm={showNeuronDelayForm} loader={props.loader} error={error} key={n.id} neuron={n} />)})}\r\n            </Grid>\r\n          </div>\r\n        </>\r\n      }\r\n        <NeuronForm alert={alert} loader={props.loader} error={error}>\r\n          <MainFab color=\"primary\" aria-label=\"send\"><AddIcon /></MainFab>\r\n        </NeuronForm> \r\n        \r\n        <NeuronDelayForm open={neuronDelayOpen} onSubmit={neuronDelaySubmit} onClose={neuronDelayClose} currentDelay={neuronCurrentDelay} />\r\n        <TopupNeuronForm open={neuronTopupOpen} onSubmit={neuronTopupSubmit} onClose={neuronTopupClose} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Neurons;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function RegisterTokenForm(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [name, setName] = React.useState('');\r\n  const [symbol, setSymbol] = React.useState('');\r\n  const [decimals, setDecimals] = React.useState(2);\r\n  const [supply, setSupply] = React.useState(100);\r\n    \r\n  const error = (e) => {\r\n    props.error(e);\r\n  }\r\n\r\n  const submit = () => {\r\n    if (name === \"\") return error(\"Please enter a valid name\");\r\n    if (symbol === \"\") return error(\"Please enter a valid symbol\");\r\n    if (isNaN(decimals)) return error(\"Please enter a valid number for decimal places\");\r\n    if (isNaN(supply)) return error(\"Please enter a valid number for initial supply\");\r\n    //Validate\r\n    props.onSubmit(name, symbol, decimals, supply);\r\n    handleClose();\r\n  };\r\n  const handleClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDecimals(2);\r\n    setSupply(100);\r\n    setSymbol('');\r\n    setName('');\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      {React.cloneElement(props.children, {onClick: handleClick})}\r\n      <Dialog open={open} onClose={handleClose}  maxWidth={'sm'} fullWidth >\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Create your own Token</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText style={{textAlign:'center',fontWeight:'bold'}}>Complete the form below to create your own token. The initial supply will be added to your Main account once minted.</DialogContentText>\r\n          <>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              label=\"Token Name e.g. Bitcoin\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              type=\"text\"\r\n              style={{width:'49%', marginRight:'2%'}}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n            <TextField\r\n              style={{width:'49%'}}\r\n              margin=\"dense\"\r\n              label={\"Symbol e.g. BTC\"}\r\n              value={symbol}\r\n              onChange={(e) => setSymbol(e.target.value)}\r\n              type=\"text\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              label=\"Initial Supply\"\r\n              value={supply}\r\n              onChange={(e) => setSupply(e.target.value)}\r\n              type=\"text\"\r\n              style={{width:'49%', marginRight:'2%'}}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n            <TextField\r\n              style={{width:'49%'}}\r\n              margin=\"dense\"\r\n              label={\"Decimals\"}\r\n              value={decimals}\r\n              onChange={(e) => setDecimals(e.target.value)}\r\n              type=\"text\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n          </>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={submit} color=\"primary\">Create Token</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MainFab from '../components/MainFab';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport ListIcon from '@material-ui/icons/List';\r\nimport RegisterTokenForm from '../components/RegisterTokenForm';\r\nimport extjs from '../ic/extjs.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useTheme } from '@material-ui/core/styles';\r\nconst formatTokenBalance = (n, d) => {\r\n  for (var i = 0; i < Number(d); i++) {\r\n      n /= 10n;\r\n  }\r\n  return formatNumber(Number(n));\r\n};\r\nconst formatNumber = n => {\r\n  return n.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n};\r\nconst perPage = 10;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\nfunction TokenRegistry(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const account = useSelector(state => state.principals[currentPrincipal].accounts[0]);\r\n  const [tokens, setTokens] = React.useState([]);\r\n  const [page, setPage] = React.useState(1);\r\n  \r\n  const dispatch = useDispatch()\r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n    },\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n  const registerToken = (name, symbol, decimals, supply) => {\r\n    props.loader(true);\r\n    var md = {\r\n      fungible : {\r\n        name : name,\r\n        symbol : symbol,\r\n        decimals : decimals,\r\n        metadata : []\r\n      }\r\n    };\r\n    api.canister(\"kxh4l-cyaaa-aaaah-qadaq-cai\").registerToken({\r\n      metadata : md,\r\n      supply : supply * (10 ** decimals),\r\n      owner : account.address\r\n    }).then(r => {\r\n      if (r.hasOwnProperty('ok')) {\r\n        var tokenId = extjs.encodeTokenId(\"kxh4l-cyaaa-aaaah-qadaq-cai\", r.ok);\r\n        dispatch({ type: 'account/token/add', payload: {\r\n          metadata : {\r\n            id : tokenId,\r\n            name : md.fungible.name,\r\n            symbol : md.fungible.symbol,\r\n            decimals : md.fungible.decimals,\r\n            metadata : md.fungible.metadata,\r\n            type : 'fungible'\r\n          }\r\n        }});\r\n        api.canister(\"kxh4l-cyaaa-aaaah-qadaq-cai\").tokenRegistry().then(tr => {\r\n          setTokens(tr);\r\n        }).finally(() => {\r\n          props.loader(false);      \r\n        });\r\n      } else {\r\n        error(r.err);\r\n      }\r\n    }).catch(() => {\r\n      props.loader(false);      \r\n    });\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  React.useEffect(() => {\r\n    props.loader(true);\r\n    api.canister(\"kxh4l-cyaaa-aaaah-qadaq-cai\").tokenRegistry().then(tr => {\r\n      setTokens(tr);\r\n    }).finally(() => {\r\n      props.loader(false);      \r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div style={styles.root}>\r\n    {tokens.length === 0 ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph align=\"center\">\r\n          <ListIcon style={styles.largeIcon} />\r\n        </Typography>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          There are no tokens added to the registry\r\n        </Typography>\r\n      </div> :\r\n      <>\r\n        <div style={styles.empty}>\r\n          <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n            View and create your own tokens\r\n          </Typography>\r\n        </div>\r\n        {tokens.length > perPage ?\r\n        <Pagination style={{float:\"right\",marginTop:\"10px\",marginBottom:\"20px\"}} size=\"small\" count={Math.ceil(tokens.length/perPage)} page={page} onChange={(e, v) => setPage(v)} />\r\n        : \"\"}\r\n        <TableContainer component={Paper}>\r\n          <Table style={styles.table} aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell style={{fontWeight:'bold'}}>Name</TableCell>\r\n                <TableCell style={{fontWeight:'bold'}}>Symbol</TableCell>\r\n                <TableCell style={{fontWeight:'bold'}}>Total Supply</TableCell>\r\n                <TableCell width=\"100\" style={{fontWeight:'bold'}}>Owners</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {tokens.slice().reverse().filter((token,i) => (i >= ((page-1)*perPage) && i < ((page)*perPage))).map((token, i) => {\r\n                return (<TableRow key={token[0]}>\r\n                  <TableCell>{token[1].fungible.name}</TableCell>\r\n                  <TableCell>{token[1].fungible.symbol}</TableCell>\r\n                  <TableCell>{formatTokenBalance(token[2], token[1].fungible.decimals)}</TableCell>\r\n                  <TableCell>{Number(token[3])}</TableCell>\r\n                </TableRow>)\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <RegisterTokenForm onSubmit={registerToken} loader={props.loader} error={error} address={account.address}>\r\n          <MainFab color=\"primary\" aria-label=\"send\"><AddIcon /></MainFab>\r\n        </RegisterTokenForm>\r\n      </>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TokenRegistry;","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { useTheme } from '@material-ui/core/styles';\r\n\r\nfunction Applications(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const apps = useSelector(state => state.principals[currentPrincipal].apps);\r\n  const dispatch = useDispatch()\r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:400,\r\n      margin : \"0 auto\",\r\n    },\r\n    table: {\r\n      minWidth: 650,\r\n    },\r\n  };\r\n  const deleteApp = (host) => {\r\n    dispatch({ type: 'app/remove', payload: {host:host}});\r\n  };\r\n  \r\n  return (\r\n    <div style={styles.root}>\r\n    {apps.length === 0 ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          You have no authorized applications yet\r\n        </Typography>\r\n      </div> :\r\n      <TableContainer component={Paper}>\r\n        <Table style={styles.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell width=\"220\" style={{fontWeight:'bold'}}>Host</TableCell>\r\n              <TableCell style={{fontWeight:'bold'}}>API Key</TableCell>\r\n              <TableCell width=\"150\" align=\"right\" style={{fontWeight:'bold'}}>Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {apps.map((app, i) => {\r\n              return (<TableRow key={app.apikey}>\r\n                <TableCell>\r\n                  <a href={app.host} target=\"_blank\" rel=\"noreferrer\">{app.host}</a>\r\n                </TableCell>\r\n                <TableCell>{app.apikey.substr(48, 80)}...</TableCell>\r\n                <TableCell align=\"right\">\r\n                  <Tooltip title=\"Remove from Stoic\">\r\n                    <IconButton onClick={() => deleteApp(app.host)}>\r\n                      <DeleteIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </TableCell>\r\n              </TableRow>)\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Applications;","import React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport UsbIcon from '@material-ui/icons/Usb';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nexport default function ConnectList(props) {\r\n  const handleClick = (t) => {\r\n    props.handler(t);\r\n  };\r\n  return (\r\n    <List component=\"nav\" aria-label=\"secondary add principal\">\r\n      <ListItem button onClick={() => handleClick('create') }>\r\n        <ListItemIcon>\r\n          <AddIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary={props.add ? \"Add a new Wallet\" : \"Create a new Wallet\" }\r\n          secondary={props.add ? \"I want to add a new wallet by generating a random seed phrase\" : \"I want to create a new wallet by generating a random seed phrase\" }\r\n        />\r\n        \r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('import') }>\r\n        <ListItemIcon>\r\n          <GetAppIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary={props.add ? \"Add an existing Wallet\" : \"Import an existing Wallet\" }\r\n          secondary={props.add ? \"I want to recover and add an existing wallet using a seed phrase, or as a read-only wallet\" : \"I want to recover an existing wallet using a seed phrase\"}\r\n        />\r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('link') }>\r\n        <ListItemIcon>\r\n          <AllInclusiveIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary={props.add ? \"Link your Internet Identitiy\" : \"Link your Internet Identitiy\" }\r\n          secondary={props.add ? \"I want to link another Wallet using an Internet Identity\" : \"I want to link a Wallet using an Internet Identity\" }\r\n        />\r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('3party') }>\r\n        <ListItemIcon>\r\n          <ExitToAppIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary={\"Login using a trusted 3rd party via tor.us\"}\r\n          secondary={\"I want to login using a Google, Github, Facebook or Twitter account\"}\r\n        />\r\n      </ListItem>\r\n      <ListItem button onClick={() => handleClick('connect') }>\r\n        <ListItemIcon>\r\n          <UsbIcon />\r\n        </ListItemIcon>\r\n        <ListItemText \r\n          primary={props.add ? \"Connect Hardware Wallet\" : \"Connect Hardware Wallet\" }\r\n          secondary={props.add ? \"I want to import another Wallet from my Ledger or Trezor device\" : \"I want to import a wallet from my Ledger or Trezor device\" }\r\n        />\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\n\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useFilePicker } from 'use-file-picker';\r\nconst tips = [\r\n  \"When accessing this wallet, always type the URL into the browser address bar yourself or use a bookmark that you yourself created. Never trust links posted on social media, in search results, sent in emails or listed on other websites.\",\r\n  \"If your browser gives you any sort of security warning about this web wallet, get in touch with us and report it. Do not ignore the warning nor enter your mnemonic secret!\",\r\n  \"Only use your own devices when accessing your accounts. Do not enter your mnemonic secret on untrustworthy devices (public computers, friends computers/phones, etc) as they might be littered with malware and keyloggers.\",\r\n  \"Always keep your operating system, anti-virus software and browser up to date with latest security updates.\",\r\n  \"If possible, prefer hardware wallets over mnemonic secret for storing larger amounts of RISE.\",\r\n];\r\nvar type = '';\r\nexport default function WalletDialog(props) {\r\n  const [route, setRoute] = React.useState(props.initialRoute);\r\n  const [newMnemonic, setNewMnemonic] = React.useState('');\r\n  const [mnemonic, setMnemonic] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [password2, setPassword2] = React.useState('');\r\n  const [address, setAddress] = React.useState('');\r\n  const [tipsIndex, setTipsIndex] = React.useState(1);\r\n  const [openFileSelector, { filesContent, clear }] = useFilePicker({\r\n    accept: '.pem',\r\n    multiple: false,\r\n  });\r\n  React.useEffect(() => {\r\n    if (filesContent.length > 0) {\r\n      var od = {\r\n        pem : filesContent[0].content\r\n      }\r\n      clear();\r\n      props.submit(\"pem\",od);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [filesContent]);\r\n  React.useEffect(() => {\r\n    setRoute(props.initialRoute);\r\n  }, [props.initialRoute]);\r\n  \r\n  const cancel = () => {\r\n    type = '';\r\n    setTipsIndex(1);\r\n    setRoute(\"\");\r\n    setNewMnemonic(\"\");\r\n    setMnemonic(\"\");\r\n    setPassword(\"\");\r\n    setPassword2(\"\");\r\n    setAddress(\"\");\r\n    props.cancel();\r\n  }\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const showNewMnemonic = () => {\r\n    setTipsIndex(1);\r\n    setRoute(\"newMnemonic\");\r\n    type = 'create';\r\n    setNewMnemonic(StoicIdentity.generateMnemonic());\r\n  }\r\n  const showRecoverMnemonic = () => {\r\n    setRoute(\"confirmMnemonic\");\r\n    type = 'import';\r\n  }  \r\n  const showAddress = () => {\r\n    setRoute(\"address\");\r\n    type = 'watch';\r\n  }\r\n  const showPem = () => {\r\n    openFileSelector();\r\n    \r\n  }\r\n  const confirmAddress = () => {\r\n    if (!StoicIdentity.validatePrincipal(address)) return error(\"Please enter a valid principal\");\r\n    submit();\r\n  }\r\n  const confirmMnemonic = () => {\r\n    if (!StoicIdentity.validateMnemonic(mnemonic)) return error(\"The mnemonic you entered is not valid\"); //show error\r\n    if (type === 'create' && mnemonic !== newMnemonic) return error(\"The mnemonic you entered does not match the one displayed\"); //show error\r\n    setRoute(\"passwords\");\r\n  };\r\n  const confirmPasswords = () => {\r\n    if (password !== password2) return error(\"Your passwords do not match\");\r\n    if (!StoicIdentity.validatePassword(password)) return error(\"Password is invalid, please try again\");\r\n    submit();\r\n  }\r\n  const directuath = (t) => {\r\n    props.submit(t,{});\r\n    clearState();\r\n  }\r\n  const submit = () => {\r\n    var od = {}, t = '';\r\n    switch(type) {\r\n      case \"create\":\r\n      case \"import\":\r\n        t = 'private';\r\n        od.mnemonic = mnemonic;\r\n        od.password = password;\r\n      break;\r\n      case \"watch\":\r\n        t = 'watch';\r\n        od.principal = address;\r\n      break;\r\n      default: break;\r\n    };\r\n    props.submit(t,od);\r\n    clearState();\r\n  };\r\n  const clearState = () => {\r\n    type = '';\r\n    setTipsIndex(1);\r\n    setRoute(\"\");\r\n    setNewMnemonic(\"\");\r\n    setMnemonic(\"\");\r\n    setPassword(\"\");\r\n    setPassword2(\"\");\r\n    setAddress(\"\");\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      { route === '3party' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'xs'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Select Login Provider</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={() => directuath('google')}>\r\n                <ListItemIcon>\r\n                  <MailIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Google\" \r\n                  secondary=\"Login using your Google account\" \r\n                />\r\n                \r\n              </ListItem>\r\n              <ListItem button onClick={() => directuath('github')}>\r\n                <ListItemIcon>\r\n                  <GitHubIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Github\" \r\n                  secondary=\"Login using your Github account\" \r\n                />\r\n                \r\n              </ListItem>\r\n              <ListItem button onClick={() => directuath('twitter')}>\r\n                <ListItemIcon>\r\n                  <TwitterIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Twitter\" \r\n                  secondary=\"Login using your Twitter account\" \r\n                />\r\n              </ListItem>\r\n              <ListItem button onClick={() => directuath('facebook')}>\r\n                <ListItemIcon>\r\n                  <FacebookIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Facebook\" \r\n                  secondary=\"Login using your Facebook account\" \r\n                />\r\n              </ListItem>\r\n            </List>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'tips' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Security Tips</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Things to keep in mind to increase the security of your funds:</strong></p>\r\n            <ul>\r\n            {tips.map( (t,i) => {\r\n              if (i >= tipsIndex) return \"\";\r\n              return(<li key={i}>{t}</li>)\r\n            })}\r\n            </ul>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            {tipsIndex < tips.length ?\r\n            <Button onClick={() => setTipsIndex(tipsIndex+1)} color=\"primary\">Next Tip</Button>\r\n            :\r\n            <Button onClick={showNewMnemonic} color=\"primary\">Continue</Button> }\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'import' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Select Import Type</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={showRecoverMnemonic}>\r\n                <ListItemIcon>\r\n                  <VpnKeyIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Import using a seed phrase\" \r\n                  secondary=\"Enter your mnemonic seed to recover full access to your wallet\" \r\n                />\r\n                \r\n              </ListItem>\r\n              <ListItem button onClick={showPem}>\r\n                <ListItemIcon>\r\n                  <InsertDriveFileIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Import using a PEM file\" \r\n                  secondary=\"If you have a PEM private key file you can import your wallet here\" \r\n                />\r\n                \r\n              </ListItem>\r\n              <ListItem button onClick={showAddress}>\r\n                <ListItemIcon>\r\n                  <VisibilityIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Read only account\" \r\n                  secondary=\"Enter the address of a wallet you would like to add, but not spend from\"\r\n                />\r\n              </ListItem>\r\n            </List>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'newMnemonic' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Write down your seed phrase</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>This is your 12 word seed phrase:</strong></p>\r\n            <div style={{textAlign:'center'}}>\r\n              {newMnemonic.split(\" \").map((w, i) => {\r\n                return (<span key={i} style={{fontSize:'large', display:'inline-block', padding:'5px 15px'}}>{w}{i < 11 ? <>&nbsp;</> : \"\"}</span>);\r\n              })}\r\n            </div>\r\n            <p>Write your mnemonic down on a physical piece of paper and store it somewhere safe and private. Anyone who knows this can transfer funds out of your account.</p>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={() =>  setRoute(\"confirmMnemonic\")} color=\"primary\">Continue</Button>\r\n          </DialogActions> \r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'confirmMnemonic' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Confirm your mnemonic seed</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Please confirm your 12 word seed phrase:</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Confirm Mnemonic Seed\"\r\n              multiline\r\n              fullWidth\r\n              value={mnemonic}\r\n              rows={2}\r\n              onChange={(e) => setMnemonic(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmMnemonic} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'address' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Enter the Principal to watch</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>Please enter a valid Principal (e.g. 4opr7-aaepd-uw2ok...)</strong></p>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Principal\"\r\n              fullWidth\r\n              value={address}\r\n              required\r\n              onChange={(e) => setAddress(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmAddress} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      { route === 'passwords' ?\r\n      <>\r\n        <Dialog hideBackdrop={props.hideBackdrop} maxWidth={'sm'} fullWidth open>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Enter a password</DialogTitle>\r\n          <DialogContent>\r\n            <p><strong>This password is used to further encrypt your private data on your device. Passwords must contain:</strong></p>\r\n              <ul>\r\n                <li>At least 8 characters</li>\r\n                <li>At least one uppercase letter</li>\r\n                <li>At least one lowercase letter</li>\r\n                <li>At least one number</li>\r\n              </ul>\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Enter Password\"\r\n              fullWidth\r\n              required\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              style={{marginBottom: 20}}\r\n            />\r\n            <TextField\r\n              id=\"standard-textarea\"\r\n              label=\"Confirm Password\"\r\n              fullWidth\r\n              required\r\n              type=\"password\"\r\n              value={password2}\r\n              onChange={(e) => setPassword2(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={cancel} color=\"primary\">Cancel</Button>\r\n            <Button onClick={confirmPasswords} color=\"primary\">Continue</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </>:\"\"}\r\n      \r\n    </>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { clipboardCopy, identityTypes } from '../utils';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport Blockie from '../components/Blockie';\r\nimport SnackbarButton from '../components/SnackbarButton';\r\nimport ConnectList from '../components/ConnectList';\r\nimport WalletDialog from '../components/WalletDialog';\r\n\r\nfunction Settings(props) {\r\n  const [assets, setAssets] = React.useState([]);\r\n  const [initialRoute, setInitialRoute] = React.useState('');\r\n  const dispatch = useDispatch()\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []));\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const principals = useSelector(state => state.principals);\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const connectList = (t) => {  \r\n    switch(t) {\r\n      case \"create\":\r\n        setInitialRoute('tips');\r\n      break;\r\n      case \"import\":\r\n        setInitialRoute('import');\r\n      break;\r\n      case \"link\":\r\n        props.loader(true);\r\n        StoicIdentity.change(identity, \"ii\").then(identity => {\r\n          dispatch({ type: 'addwallet', payload : {identity : identity}});\r\n          props.loader(false);\r\n        }).catch(e => {\r\n          props.loader(false);\r\n        })\r\n      break;\r\n      case \"3party\":\r\n        setInitialRoute('3party');\r\n      break;\r\n      case \"connect\":\r\n        //Show error\r\n        error(\"Hardware wallet support is coming soon!\")\r\n      break;\r\n      default: break;\r\n    }\r\n  }\r\n  const changePrincipal = (p) => {\r\n    props.confirm(\"Please confirm\", \"You are about to lock your current Principal and switch to another one. Are you sure you want to continue?\").then(v => {\r\n      if (v) {\r\n        StoicIdentity.lock(principals[currentPrincipal].identity).then(r => {      \r\n          dispatch({ type: 'currentPrincipal', payload : {index : p}});\r\n        });\r\n      }\r\n    });\r\n  }\r\n  const submit = (type, optdata) => {\r\n    props.loader(true);\r\n    StoicIdentity.change(identity, type, optdata).then(identity => {\r\n      dispatch({ type: 'addwallet', payload : {identity : identity}});\r\n    }).catch(e => {\r\n    }).finally(() => {      \r\n      props.loader(false);\r\n      setInitialRoute('');\r\n    });\r\n  };\r\n  const cancel = (t) => {\r\n    setInitialRoute('');\r\n  };\r\n  const deletePrincipal = (i) => {\r\n    props.confirm(\"Please confirm\", \"You are about to remove this Principal, which will remove all data regarding this wallet from this device. Are you sure you want to continue?\").then(v => {\r\n      if (v) {\r\n        dispatch({ type: 'deletewallet', payload : {index : i}});\r\n      }\r\n    });\r\n  };\r\n  const clearWallet = () => {\r\n    props.confirm(\"Please confirm\", \"You are about to clear your wallet, which will remove ALL data from this device. Are you sure you want to continue?\").then(v => {\r\n      if (v) props.clearWallet();\r\n    });\r\n  };\r\n  React.useEffect(() => {\r\n    const makeAssets = () => {  \r\n      var assets = ['ICP'];\r\n      accounts.map(account => {\r\n        account.tokens.map(token => {\r\n          if (assets.indexOf(token.symbol) < 0) assets.push(token.symbol);\r\n          return true;\r\n        });\r\n        return true;\r\n      });\r\n      setAssets(assets);\r\n    }\r\n    makeAssets();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentPrincipal]);\r\n  return (\r\n    <>\r\n      <List\r\n        component=\"nav\"\r\n        aria-labelledby=\"settings-list\"\r\n        subheader={\r\n          <ListSubheader id=\"nested-list-subheader\">\r\n            Active Principal\r\n          </ListSubheader>\r\n        }\r\n      >\r\n        <ListItem>\r\n          <ListItemAvatar>\r\n            <Avatar style={{width:60, height:60}}>\r\n              <Blockie address={identity.principal ?? ''} />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText \r\n            style={{paddingLeft:20}}\r\n            primaryTypographyProps={{noWrap:true}} \r\n            primary={\r\n              <>\r\n                {identity.principal}\r\n                <SnackbarButton\r\n                  message=\"Principal Copied\"\r\n                  anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'left',\r\n                  }}\r\n                  onClick={() => clipboardCopy(identity.principal)}\r\n                >\r\n                  <IconButton size=\"small\" edge=\"end\" aria-label=\"edit\">\r\n                    <FileCopyIcon  style={{ fontSize: 18 }} />\r\n                  </IconButton>\r\n                </SnackbarButton>\r\n              </>\r\n            }\r\n            secondary={\r\n              <>\r\n                <>{identityTypes[identity.type]}<br />{accounts.length + (accounts.length === 1 ? \" Account\" : \" Accounts\")} containing {assets.join(\", \")}</>\r\n              </>\r\n            } />\r\n          <ListItemSecondaryAction>\r\n            <IconButton href={\"https://ic.rocks/principal/\"+identity.principal} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n              <LaunchIcon />\r\n            </IconButton>\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n      </List>\r\n      <Divider />\r\n      {principals.length > 1 ?\r\n        <><List\r\n          component=\"nav\"\r\n          aria-labelledby=\"settings-list\"\r\n          subheader={\r\n            <ListSubheader id=\"nested-list-subheader\">\r\n              Other Principals\r\n            </ListSubheader>\r\n          }\r\n        >\r\n          {principals.map((principal, i) => {\r\n            if (i === currentPrincipal) return \"\";\r\n            return (\r\n            <ListItem key={principal.identity.principal} button onClick={() => changePrincipal(i)}>\r\n              <ListItemAvatar>\r\n                <Avatar>\r\n                  <Blockie address={principal.identity.principal ?? ''} />\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText \r\n                primaryTypographyProps={{noWrap:true}} \r\n                primary={\r\n                  <>\r\n                    {principal.identity.principal}\r\n                      {/*<SnackbarButton\r\n                      message=\"Principal Copied\"\r\n                      anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                      }}\r\n                      onClick={() => clipboardCopy(principal.identity.principal)}\r\n                    >\r\n                      <IconButton size=\"small\" edge=\"end\" aria-label=\"edit\">\r\n                        <FileCopyIcon  style={{ fontSize: 18 }} />\r\n                      </IconButton>\r\n                      </SnackbarButton>*/}\r\n                  </>\r\n                } \r\n                secondary={\r\n                  <>\r\n                    <>{identityTypes[principal.identity.type]}</>\r\n                  </>\r\n                } \r\n              />\r\n              <ListItemSecondaryAction>\r\n                <IconButton onClick={() => clipboardCopy(principal.identity.principal)} edge=\"end\">\r\n                  <FileCopyIcon />\r\n                </IconButton>\r\n                <IconButton href={\"https://ic.rocks/principal/\"+principal.identity.principal} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n                  <LaunchIcon />\r\n                </IconButton>\r\n                { principals.length > 1 ?\r\n                <IconButton onClick={() => deletePrincipal(i)} edge=\"end\" aria-label=\"search\">\r\n                  <DeleteIcon />\r\n                </IconButton> : \"\" }\r\n              </ListItemSecondaryAction>\r\n            </ListItem>) \r\n          })}\r\n        </List>\r\n        <Divider /> </>: \"\" }\r\n        \r\n      <ConnectList add handler={connectList} />\r\n      <Divider />\r\n      \r\n      <List\r\n        component=\"nav\"\r\n        aria-labelledby=\"settings-list\"\r\n        subheader={\r\n          <ListSubheader id=\"nested-list-subheader\">\r\n            Advanced Settings\r\n          </ListSubheader>\r\n        }\r\n      >\r\n        <ListItem button onClick={clearWallet}>\r\n          <ListItemText \r\n            primaryTypographyProps={{noWrap:true, color : \"error\"}} \r\n            primary=\"Remove all wallets from this device\"/>\r\n        </ListItem>\r\n      </List>\r\n      <WalletDialog alert={props.alert} initialRoute={initialRoute} cancel={cancel} submit={submit} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { useSelector } from 'react-redux'\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Blockie from '../components/Blockie';\r\nexport default function ListingBuyForm(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].accounts : []))\r\n  \r\n  return (\r\n    <>\r\n      <Dialog open={props.open} onClose={props.onClose}  maxWidth={'xs'} fullWidth >\r\n          <>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Choose an account</DialogTitle>\r\n            <DialogContent>\r\n              <List>\r\n                {accounts.map((account, index) => {\r\n                  return (\r\n                      <ListItem key={index} button onClick={() => { props.onSubmit(index); }}>\r\n                        <ListItemAvatar>\r\n                          <Avatar>\r\n                            <Blockie address={account.address} />\r\n                          </Avatar>\r\n                        </ListItemAvatar>\r\n                        <ListItemText \r\n                          primaryTypographyProps={{noWrap:true}} \r\n                          secondaryTypographyProps={{noWrap:true}} \r\n                          primary={account.name}\r\n                          secondary={account.address} />\r\n                      </ListItem>\r\n                  )\r\n                })}\r\n              </List>\r\n            </DialogContent> \r\n          </>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport LaunchIcon from '@material-ui/icons/Launch';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Button from '@material-ui/core/Button';\r\nimport Timestamp from 'react-timestamp';\r\nimport extjs from '../ic/extjs.js';\r\nconst _getRandomBytes = () => {\r\n  var bs = [];\r\n  for(var i = 0; i < 32; i++) {\r\n    bs.push(Math.floor(Math.random() * 256))\r\n  }\r\n  return bs;\r\n};\r\nconst _showListingPrice = n => {\r\n  n = Number(n) / 100000000;\r\n  return n.toFixed(8).replace(/0{1,6}$/, '');\r\n};\r\nexport default function Listing(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const accounts = useSelector(state => state.principals[currentPrincipal].accounts)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [imgLoaded, setImgLoaded] = React.useState(false);\r\n  const tokenid = extjs.encodeTokenId(\"e3izy-jiaaa-aaaah-qacbq-cai\", props.listing[0]);\r\n  const error = props.error;\r\n  const dispatch = useDispatch()\r\n  \r\n  const _isLocked = listing => {\r\n    if (listing.locked.length === 0) return false;\r\n    if (Date.now() >= Number(listing.locked[0]/1000000n)) return false;\r\n    return true;\r\n  };\r\n  const buy = async () => {\r\n    try {\r\n      var acc = await props.showListingBuyForm();\r\n      var answer = await props.confirm(\"Please confirm\", \"You are about to purchase this NFT for \"+_showListingPrice(props.listing[1].price)+\" ICP from your account labelled \\\"\"+accounts[acc].name+\"\\\". This process may take over 30 seconds. Are you sure you want to continue?\");\r\n      if (!answer) {\r\n        return props.loader(false);\r\n      };\r\n      var address = accounts[acc].address;\r\n      props.loader(true);\r\n      const id = StoicIdentity.getIdentity(identity.principal);\r\n      const api = extjs.connect(\"https://boundary.ic0.app/\", id);\r\n      var r = await api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").lock(tokenid, address, _getRandomBytes());\r\n      if (r.hasOwnProperty(\"err\")) throw r.err;\r\n      var paytoaddress = r.ok;\r\n      await api.token().transfer(identity.principal, acc, paytoaddress, props.listing[1].price, 10000);\r\n      var r3 = await api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").settle(tokenid);\r\n      if (r3.hasOwnProperty(\"err\")) {\r\n        setTimeout(() => api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").settle(tokenid), 1000);//Try again, emergency...\r\n        throw r.err;\r\n      }\r\n      var md = await api.token(tokenid).getMetadata();\r\n      var nft = {\r\n        id : tokenid,\r\n        metadata : md\r\n      };\r\n      dispatch({ type: 'account/nft/addToAccount', payload: {\r\n        principal : currentPrincipal,\r\n        account : acc,\r\n        nft : nft\r\n      }});\r\n      props.refreshListings();\r\n    } catch (e) {\r\n      props.loader(false);\r\n      error(e);\r\n    };\r\n  };\r\n  \r\n  return (\r\n    <Grid style={{height:'100%'}} item xl={2} lg={2} md={3} sm={6} xs={4}>\r\n        <Card>\r\n          <CardContent>\r\n            <Typography style={{fontSize: 14, textAlign:\"center\", fontWeight:\"bold\"}} color={\"inherit\"} gutterBottom>\r\n              {\"#\"+(props.listing[0]+1)} <Tooltip title=\"View in browser\">\r\n                <IconButton size=\"small\" href={\"https://e3izy-jiaaa-aaaah-qacbq-cai.raw.ic0.app/?tokenid=\" + tokenid} target=\"_blank\" edge=\"end\" aria-label=\"search\">\r\n                  <LaunchIcon style={{ fontSize: 18 }} />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Typography>\r\n            <a href={\"https://e3izy-jiaaa-aaaah-qacbq-cai.raw.ic0.app/?tokenid=\" + tokenid} target=\"_blank\" rel=\"noreferrer\">\r\n              <img alt={tokenid} style={{display:(imgLoaded ? \"block\" : \"none\")}} src={\"https://e3izy-jiaaa-aaaah-qacbq-cai.raw.ic0.app/?tokenid=\" + tokenid} onLoad={() => setImgLoaded(true)} />\r\n              <Skeleton style={{margin:\"0 auto\",display:(imgLoaded ? \"none\" : \"block\")}} variant=\"circle\" width={120} height={120} />\r\n            </a>\r\n            \r\n            <Typography style={{fontSize: 20, textAlign:\"center\", fontWeight:\"bold\"}} color={\"inherit\"} gutterBottom>\r\n              {_showListingPrice(props.listing[1].price)} ICP\r\n            </Typography>\r\n            <Typography style={{fontSize: 14, textAlign:\"center\"}} color={\"inherit\"} gutterBottom>\r\n              { _isLocked(props.listing[1]) ? \r\n                <>Unlocks <Timestamp relative autoUpdate date={Number(props.listing[1].locked[0]/1000000000n)} /></>\r\n              : \r\n                <Button onClick={buy} variant=\"contained\" color=\"primary\">Buy Now</Button>\r\n              }\r\n            </Typography>\r\n          </CardContent>\r\n        </Card>\r\n    </Grid>\r\n  );\r\n}\r\n\r\n","/* global BigInt */\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\nimport StorefrontIcon from '@material-ui/icons/Storefront';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport extjs from '../ic/extjs.js';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport ListingBuyForm from '../components/ListingBuyForm';\r\nimport { useSelector } from 'react-redux'\r\nimport Listing from '../components/Listing';\r\nconst perPage = 18;\r\nconst api = extjs.connect(\"https://boundary.ic0.app/\");\r\n\r\nvar cb = null;\r\nvar allowedPrincipals = [\r\n  \"sensj-ihxp6-tyvl7-7zwvj-fr42h-7ojjp-n7kxk-z6tvo-vxykp-umhfk-wqe\",\r\n  \"gt6pl-emtcy-selas-w57zx-kyok4-5ofde-vf5nq-6773c-2t6bv-bsems-tqe\",\r\n  \"qzbdz-mtxb4-orry7-pvi45-w3e47-sclbg-xqr6z-zld6i-ertsb-xth33-eqe\",\r\n];\r\nvar intv = false;\r\nexport default function Marketplace(props) {\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal);\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}));\r\n  const [listings, setListings] = React.useState([]);\r\n  const accounts = useSelector(state => state.principals[currentPrincipal].accounts)\r\n  const [page, setPage] = React.useState(1);\r\n  const [listingBuyFormOpen, setListingBuyFormOpen] = React.useState(false);\r\n  \r\n  const listingBuyFormSubmit = (d) => {\r\n    listingBuyFormClose();\r\n    cb(d);\r\n    cb = null;\r\n  }  \r\n  \r\n  const _extractFunds = async () => {\r\n    const id = StoicIdentity.getIdentity(identity.principal);\r\n    const _api = extjs.connect(\"https://boundary.ic0.app/\", id);\r\n    var payments = await _api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").payments();\r\n    if (payments.length === 0) return;\r\n    payments[0].map(async payment => {\r\n      var a = extjs.toAddress(identity.principal, payment);\r\n      var b = Number(await api.token().getBalance(a));\r\n      if (b <= 10000) return;\r\n      _api.token().transfer(identity.principal, payment, accounts[0].address, BigInt(b-10000), BigInt(10000));\r\n    });\r\n  };\r\n  const listingBuyFormClose = () => {    \r\n    setListingBuyFormOpen(false);\r\n  };\r\n  /*const withdraw = async () => {\r\n    try {\r\n      var answer = await props.confirm(\"Withdraw sale proceeds\", \"If you have sold items, you need to manually withdraw sale proceeds. Would you like to look for any funds to withdraw (this can take some time)?\");\r\n      if (!answer) {\r\n        return props.loader(false);\r\n      };\r\n      props.loader(true);\r\n      const id = StoicIdentity.getIdentity(identity.principal);\r\n      const _api = extjs.connect(\"https://boundary.ic0.app/\", id);\r\n      var payments = await _api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").payments();\r\n      if (payments.length === 0) return props.alert(\"Sorry!\", \"There are no funds to be withdrawn\");\r\n      var ps = payments[0].map(async payment => {\r\n        var a = extjs.toAddress(identity.principal, payment);\r\n        var b = Number(await api.token().getBalance(a));\r\n        if (b <= 10000) return;\r\n        return _api.token().transfer(identity.principal, payment, accounts[0].address, BigInt(b-10000), BigInt(10000));\r\n      });\r\n      Promise.all(ps).then(() => {\r\n        props.alert(\"Funds Sent\", \"We found some funds to withdraw and have sent them to your Main account\");\r\n      }).finally(() => {       \r\n        props.loader(false);\r\n      });\r\n    } catch (e) {\r\n      props.loader(false);\r\n      error(e);\r\n    };\r\n  }*/\r\n  const showListingBuyForm = () => {\r\n    setListingBuyFormOpen(true);\r\n    return new Promise((resolve, reject) => {\r\n      cb = resolve;\r\n    });\r\n  };\r\n  \r\n  const theme = useTheme();\r\n  const styles = {\r\n    root : {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n    },\r\n    empty : {\r\n      maxWidth:800,\r\n      margin : \"0 auto\",\r\n      textAlign:\"center\"\r\n    },\r\n    grid: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2)\r\n    },\r\n\r\n    largeIcon: {\r\n      width: 60,\r\n      height: 60,\r\n    },\r\n  };\r\n  const refreshListings = () => {\r\n    api.canister(\"e3izy-jiaaa-aaaah-qacbq-cai\").listings().then(listings => {\r\n      setListings(listings);\r\n    }).finally(() => {\r\n      props.loader(false);      \r\n    });\r\n  }\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  };\r\n  React.useEffect(() => {\r\n    props.loader(true);\r\n    refreshListings();\r\n    _extractFunds();\r\n    if (!intv) {\r\n      intv = setInterval(_extractFunds, 30 *1000);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  if (allowedPrincipals.indexOf(identity.principal) < 0) return (<>IN TESTING</>);\r\n  else return (\r\n    <div style={styles.root}>\r\n    {listings.length === 0 ?\r\n      <div style={styles.empty}>\r\n        <Typography paragraph align=\"center\">\r\n          <StorefrontIcon style={styles.largeIcon} />\r\n        </Typography>\r\n        <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n          There are no listings added to the marketplace. You can list NFTs for sale directly from your wallet! \r\n          \r\n        </Typography>\r\n        <Button onClick={() => {props.loader(true);refreshListings();}} variant=\"contained\" color=\"primary\">Refresh Listings</Button>\r\n      </div> :\r\n      <>\r\n        <div style={styles.empty}>\r\n          <Typography paragraph style={{paddingTop:20,fontWeight:\"bold\"}} align=\"center\">\r\n            Buy and Sell NFTs from the Marketplace. You can list NFTs for sale directly from your wallet!\r\n          </Typography>\r\n          <Button onClick={() => {props.loader(true);refreshListings();}} variant=\"contained\" color=\"primary\">Refresh Listings</Button>\r\n          \r\n        </div>\r\n        {listings.length > perPage ?\r\n        <Pagination style={{float:\"right\",marginTop:\"10px\",marginBottom:\"20px\"}} size=\"small\" count={Math.ceil(listings.length/perPage)} page={page} onChange={(e, v) => setPage(v)} />\r\n        : \"\"}\r\n        <div style={styles.grid}>\r\n          <Grid\r\n            container\r\n            spacing={2}\r\n            direction=\"row\"\r\n            justifyContent=\"flex-start\"\r\n            alignItems=\"flex-start\"\r\n          >\r\n            {listings.slice().reverse().filter((token,i) => (i >= ((page-1)*perPage) && i < ((page)*perPage))).map((listing, i) => {\r\n              return (<Listing refreshListings={refreshListings} showListingBuyForm={showListingBuyForm} loader={props.loader} error={error} key={listing[0]} listing={listing} confirm={props.confirm} />)\r\n            })}\r\n          </Grid>\r\n        </div>\r\n      </>\r\n    }\r\n    <ListingBuyForm open={listingBuyFormOpen} onSubmit={listingBuyFormSubmit} onClose={listingBuyFormClose} />\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { useDispatch } from 'react-redux'\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport AccountDrawer from '../components/AccountDrawer';\r\n\r\nimport AccountDetail from '../views/AccountDetail';\r\nimport AddressBook from '../views/AddressBook';\r\nimport Neurons from '../views/Neurons';\r\nimport TokenRegistry from '../views/TokenRegistry';\r\nimport Applications from '../views/Applications';\r\nimport Settings from '../views/Settings';\r\nimport Marketplace from '../views/Marketplace';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 300;\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      marginLeft: drawerWidth,\r\n    },\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  toolbar: theme.mixins.toolbar,\r\n  toolbarButtons: {\r\n    marginLeft: 'auto',\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n\r\n}));\r\n\r\n\r\n  const routes = {\r\n    'accountDetail' : {\r\n      title : \"Account Details\",\r\n      view : AccountDetail\r\n    },\r\n    'neurons' : {\r\n      title : \"Neuron Management\",\r\n      view : Neurons\r\n    },\r\n    'applications' : {\r\n      title : \"Applications\",\r\n      view : Applications\r\n    },\r\n    'tokenregistry' : {\r\n      title : \"Token Registry\",\r\n      view : TokenRegistry\r\n    },\r\n    'marketplace' : {\r\n      title : \"Marketplace\",\r\n      view : Marketplace\r\n    },\r\n    'addressBook' : {\r\n      title : \"Address Book\",\r\n      view : AddressBook\r\n    },\r\n    'settings' : {\r\n      title : \"Settings\",\r\n      view : Settings\r\n    },\r\n  };\r\n//Helpers\r\n\r\n\r\nfunction Wallet(props) {\r\n  const classes = useStyles();\r\n  const [mobileOpen, setMobileOpen] = React.useState(false);\r\n  const [route, setRoute] = React.useState('accountDetail');\r\n  const [toolbarTitle, setToolbarTitle] = React.useState(routes[route].title);\r\n  const dispatch = useDispatch()\r\n  \r\n  const handleDrawerToggle = () => {\r\n    setMobileOpen(!mobileOpen);\r\n  };\r\n  const renderView = (r) => {\r\n    switch(r){\r\n      case \"accountDetail\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      case \"settings\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader, clearWallet : clearWallet, lockWallet : lockWallet})\r\n      case \"neurons\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      case \"applications\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      case \"marketplace\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      case \"tokenregistry\":\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm, loader : props.loader})\r\n      default:\r\n        return React.createElement(routes[r].view, {alert : props.alert, confirm : props.confirm})\r\n    }\r\n  }\r\n  const changeRoute = (r, i) => {\r\n    setToolbarTitle(routes[r].title);\r\n    setRoute(r);\r\n    if (typeof i !== 'undefined') dispatch({ type: 'currentAccount', payload: {index:i}});\r\n  };\r\n  \r\n  const lockWallet = () => {\r\n    props.logout();\r\n  };\r\n  const clearWallet = () => {\r\n    props.remove();\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar position=\"fixed\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            edge=\"start\"\r\n            onClick={handleDrawerToggle}\r\n            className={classes.menuButton}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          \r\n          <Typography variant=\"h6\" noWrap>\r\n            {toolbarTitle}\r\n          </Typography>\r\n          <div className={classes.toolbarButtons}>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"settings\"   \r\n              edge=\"end\"\r\n              onClick={() => changeRoute('settings')}\r\n            >\r\n              <AccountCircleIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <AccountDrawer lockWallet={lockWallet} changeRoute={changeRoute} onClose={handleDrawerToggle} open={mobileOpen} />\r\n      <main className={classes.content}>\r\n        <div className={classes.toolbar} />\r\n          {renderView(route)}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Wallet;\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport ConnectList from '../components/ConnectList';\r\nimport WalletDialog from '../components/WalletDialog';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport {  useDispatch } from 'react-redux'\r\n\r\nfunction Connect(props) {\r\n  const [open, setOpen] = React.useState(true);\r\n  const [initialRoute, setInitialRoute] = React.useState('');\r\n  const dispatch = useDispatch()\r\n  const submit = (type, optdata) => {\r\n    props.loader(true);\r\n    StoicIdentity.setup(type, optdata).then(identity => {\r\n      dispatch({ type: 'createwallet', payload : {identity : identity}});\r\n      props.login();\r\n    }).catch(e => {\r\n      console.log(e);\r\n    }).finally(() => {\r\n      setTimeout(() => {\r\n        setOpen(true);\r\n        props.loader(false)\r\n      }, 2000);\r\n    });\r\n  };\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const cancel = (t) => {\r\n    setInitialRoute('');\r\n    setOpen(true);\r\n  };\r\n  const handleClick = (t) => {\r\n    setOpen(false);\r\n    switch(t) {\r\n      case \"create\":\r\n        setInitialRoute('tips');\r\n      break;\r\n      case \"import\":\r\n        setInitialRoute('import');\r\n      break;\r\n      case \"3party\":\r\n        setInitialRoute('3party');\r\n      break;\r\n      case \"link\":\r\n        props.loader(true);\r\n        StoicIdentity.setup(\"ii\").then(identity => {\r\n          dispatch({ type: 'createwallet', payload : {identity : identity}});\r\n          props.login();\r\n          props.loader(false);\r\n          setOpen(true)\r\n        }).catch(e => {\r\n          console.log(e);\r\n        }).finally(() => {\r\n          setOpen(true)\r\n          props.loader(false)\r\n        });\r\n      break;\r\n      case \"connect\":\r\n        //Show error\r\n        error(\"Hardware wallet support is coming soon!\")\r\n        setOpen(true)\r\n      break;\r\n      default: break;\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}><img style={{maxHeight:'80px',marginTop:'5px'}} alt=\"Stoic Wallet by Toniq Labs\" src=\"logo.png\" /></DialogTitle>\r\n        <DialogContent>\r\n          <ConnectList handler={handleClick} />\r\n        </DialogContent>\r\n      </Dialog>\r\n      <WalletDialog hideBackdrop alert={props.alert} initialRoute={initialRoute} cancel={cancel} submit={submit} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Connect;\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\r\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport {StoicIdentity} from '../ic/identity.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Blockie from '../components/Blockie';\r\nimport TwitterIcon from '@material-ui/icons/Twitter';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport FacebookIcon from '@material-ui/icons/Facebook';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport { useFilePicker } from 'use-file-picker';\r\nimport { identityTypes } from '../utils';\r\n\r\nfunction Unlock(props) {\r\n  const principals = useSelector(state => state.principals)\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const identity = useSelector(state => (state.principals.length ? state.principals[currentPrincipal].identity : {}))\r\n  const [open, setOpen] = React.useState(true);\r\n  const [changeDialog, setChangeDialog] = React.useState(false);\r\n  const [password, setPassword] = React.useState('');\r\n  const dispatch = useDispatch()\r\n  const [openFileSelector, fsobj] = useFilePicker({\r\n    accept: '.pem',\r\n    multiple: false,\r\n  });\r\n  React.useEffect(() => {\r\n    if (fsobj.filesContent.length > 0) {\r\n      var od = {\r\n        pem : fsobj.filesContent[0].content\r\n      }\r\n      fsobj.clear();\r\n      StoicIdentity.unlock(identity, od).then(r => {\r\n        props.login();\r\n      }).catch(e => {\r\n        console.log(e);\r\n      }).finally(() => {\r\n        setOpen(true)\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fsobj.filesContent]);\r\n  const error = (e) => {\r\n    props.alert(\"There was an error\", e);\r\n  }\r\n  const clear = () => {\r\n    props.confirm(\"Please confirm\", \"You are about to clear your wallet, which will remove all data from this device. Are you sure you want to continue?\").then(v => {\r\n      if (v) {\r\n        setOpen(false);\r\n        props.remove();\r\n      }\r\n    });\r\n  };\r\n  const changePrincipal = (p) => {\r\n    dispatch({ type: 'currentPrincipal', payload : {index : p}});\r\n    setChangeDialog(false);\r\n  };\r\n  const change = () => {\r\n    setChangeDialog(true);\r\n  };\r\n  const loginPassword = () => {\r\n    if (!StoicIdentity.validatePassword(password)) return error(\"Password is invalid, please try again\");\r\n    props.loader(true);\r\n    setOpen(false);\r\n    \r\n    StoicIdentity.unlock(identity, {password : password}).then(r => {\r\n      props.login();\r\n    }).catch(e => {\r\n      setPassword('');\r\n      return error(\"You entered an incorrect password\");\r\n    }).finally(() => {\r\n      setOpen(true)\r\n      props.loader(false)\r\n    });\r\n  }\r\n  const pemLogin = () => {\r\n    openFileSelector();\r\n    \r\n  }\r\n  const iiLogin = () => {\r\n    props.loader(true);\r\n    setOpen(false);\r\n    StoicIdentity.unlock(identity).then(r => {\r\n      props.login();\r\n    }).catch(e => {\r\n    }).finally(() => {\r\n      setTimeout(() => {\r\n        setOpen(true)\r\n        props.loader(false)\r\n      }, 2000);\r\n    });\r\n  };\r\n  const capitalizeFirstLetter = ([ first, ...rest ], locale = navigator.language) =>\r\n  first.toLocaleUpperCase(locale) + rest.join('')\r\n  return (\r\n    <>\r\n    {changeDialog ?\r\n      <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n        <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Select a Principal</DialogTitle>\r\n        <DialogContent>\r\n          <List\r\n            component=\"nav\"\r\n            aria-labelledby=\"settings-list\"\r\n          >\r\n            {principals.map((principal, i) => {\r\n              return (\r\n              <ListItem key={principal.identity.principal} button onClick={() => changePrincipal(i)}>\r\n                <ListItemAvatar>\r\n                  <Avatar>\r\n                    <Blockie address={principal.identity.principal ?? ''} />\r\n                  </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText \r\n                  primaryTypographyProps={{noWrap:true}} \r\n                  primary={principal.identity.principal}\r\n                  secondary={\r\n                    <>\r\n                      <>{identityTypes[principal.identity.type]}</>\r\n                    </>\r\n                  } />\r\n              </ListItem>) \r\n            })}\r\n          </List>\r\n            \r\n        </DialogContent>\r\n      </Dialog>\r\n    :\r\n    <>\r\n      {identity.type === 'ii' ?\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={iiLogin}>\r\n                <ListItemIcon>\r\n                  <AllInclusiveIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Re-authenticate your Internet Identity\" \r\n                  secondary=\"We need to authenticate your Internet Identity\" \r\n                />\r\n              </ListItem>\r\n            </List> \r\n              \r\n          </DialogContent>\r\n          <DialogActions>\r\n            { principals.length > 1 ? <Button onClick={change} color=\"primary\">Change Account</Button> : \"\" }\r\n            <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n          </DialogActions>\r\n        </Dialog>: \"\"}\r\n        {identity.type === 'pem' ?\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={pemLogin}>\r\n                <ListItemIcon>\r\n                  <InsertDriveFileIcon />\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary=\"Select your PEM file to access your wallet\" \r\n                  secondary=\"We need to authenticate your PEM file\" \r\n                />\r\n              </ListItem>\r\n            </List> \r\n              \r\n          </DialogContent>\r\n          <DialogActions>\r\n            { principals.length > 1 ? <Button onClick={change} color=\"primary\">Change Account</Button> : \"\" }\r\n            <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n          </DialogActions>\r\n        </Dialog>: \"\"}\r\n        {identity.type === 'private' ?\r\n          <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n            <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n            <DialogContent>\r\n              <p><strong>Enter your password to unlock your wallet.</strong></p>\r\n              <TextField\r\n                id=\"standard-textarea\"\r\n                label=\"Enter Password\"\r\n                fullWidth\r\n                required\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              { principals.length > 1 ? <Button onClick={change} color=\"primary\">Change Account</Button> : \"\" }\r\n              <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n              <Button onClick={loginPassword} color=\"primary\">Unlock</Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        : \"\"}\r\n        {['google', 'twitter', 'facebook', 'github'].indexOf(identity.type) >= 0 ?\r\n        <Dialog hideBackdrop maxWidth={'sm'} fullWidth open={open}>\r\n          <DialogTitle id=\"form-dialog-title\" style={{textAlign:'center'}}>Unlock your Wallet</DialogTitle>\r\n          <DialogContent>\r\n            <List component=\"nav\" aria-label=\"secondary add principal\">\r\n              <ListItem button onClick={iiLogin}>\r\n                <ListItemIcon>\r\n                  {identity.type === 'google' ? <MailIcon /> : \"\"}\r\n                  {identity.type === 'twitter' ? <TwitterIcon /> : \"\"}\r\n                  {identity.type === 'facebook' ? <FacebookIcon /> : \"\"}\r\n                  {identity.type === 'github' ? <GitHubIcon /> : \"\"}\r\n                </ListItemIcon>\r\n                <ListItemText \r\n                  primary={\"Login to your \" + capitalizeFirstLetter(identity.type) + \" account\"} \r\n                  secondary=\"We need to authenticate your account to continue\" \r\n                />\r\n              </ListItem>\r\n            </List> \r\n              \r\n          </DialogContent>\r\n          <DialogActions>\r\n            { principals.length > 1 ? <Button onClick={change} color=\"primary\">Change Account</Button> : \"\" }\r\n            <Button onClick={clear} color=\"primary\">Clear Wallet</Button>\r\n          </DialogActions>\r\n        </Dialog>: \"\"}\r\n      </> }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Unlock;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function AlertDialog(props) {\r\n  const handleClick = () => {\r\n    if (typeof props.handler != 'undefined') props.handler();\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={props.open}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">{props.message}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n      <Button onClick={handleClick} color=\"primary\">\r\n        {props.buttonLabel ?? \"OK\" }\r\n      </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function ConfirmDialog(props) {\r\n  const handleClick = (t) => {\r\n    if (typeof props.handler != 'undefined') props.handler(t);\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={props.open}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{props.title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">{props.message}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n      <Button onClick={() => handleClick(false)} color=\"primary\">\r\n        {props.buttonCancel ?? \"Cancel\" }\r\n      </Button>\r\n      <Button onClick={() => handleClick(true)} color=\"primary\">\r\n        {props.buttonConfirm ?? \"Confirm\" }\r\n      </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Wallet from './containers/Wallet';\r\nimport Connect from './containers/Connect';\r\nimport Unlock from './containers/Unlock';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {StoicIdentity} from './ic/identity.js';\r\nimport AlertDialog from './components/AlertDialog';\r\nimport ConfirmDialog from './components/ConfirmDialog';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\nconst emptyAlert = {\r\n  title : \"\",\r\n  message : \"\",\r\n};\r\nexport default function App() {\r\n  const classes = useStyles();\r\n  const [loaderOpen, setLoaderOpen] = React.useState(false);\r\n  const [appState, setAppState] = React.useState(false); //0 = nologin, 1 = locked, 2 = unlocked\r\n  const principals = useSelector(state => state.principals)\r\n  const currentPrincipal = useSelector(state => state.currentPrincipal)\r\n  const dispatch = useDispatch()\r\n  const [alertData, setAlertData] = React.useState(emptyAlert); \r\n  const [confirmData, setConfirmData] = React.useState(emptyAlert); \r\n  const [showAlert, setShowAlert] = React.useState(false);\r\n  const [showConfirm, setShowConfirm] = React.useState(false);\r\n  \r\n  const remove = () => {\r\n    loader(true);\r\n    StoicIdentity.clear(principals[currentPrincipal].identity).then(r => {\r\n      setAppState(0);\r\n      loader(false);\r\n      setTimeout(() => {\r\n        dispatch({ type: 'removewallet'})\r\n      }, 1000);//hack in timeout to clear views...\r\n    })\r\n  };\r\n  const login = () => {\r\n    if (principals.length === 0) {\r\n      setAppState(0);\r\n    } else {\r\n      loader(true);\r\n      StoicIdentity.load(principals[currentPrincipal].identity).then(i => {\r\n        setAppState(2);\r\n      }).catch(e => {\r\n        setAppState(1);\r\n      }).finally(() => loader(false));\r\n    }    \r\n  };\r\n  const logout = () => {\r\n    loader(true);\r\n    StoicIdentity.lock(principals[currentPrincipal].identity).then(r => {\r\n      setAppState(1);\r\n      login();\r\n    }).finally(() => {\r\n      loader(false);\r\n    });\r\n  };\r\n  \r\n  const alert = (title, message, buttonLabel) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      setAlertData({\r\n        title : title,\r\n        message : message,\r\n        buttonLabel : buttonLabel,\r\n        handler :  () => {\r\n          setShowAlert(false);\r\n          resolve(true);\r\n          setTimeout(() => setAlertData(emptyAlert), 100);\r\n        },\r\n      });\r\n      setShowAlert(true);\r\n    })\r\n  };\r\n  \r\n  const confirm = (title, message, buttonCancel, buttonConfirm) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      setConfirmData({\r\n        title : title,\r\n        message : message,\r\n        buttonCancel : buttonCancel,\r\n        buttonConfirm : buttonConfirm,\r\n        handler : (v) => {\r\n          setShowConfirm(false);\r\n          resolve(v);\r\n          setTimeout(() => setConfirmData(emptyAlert), 100);\r\n        },\r\n      });\r\n      setShowConfirm(true);\r\n    })\r\n  };\r\n  \r\n  React.useEffect(() => {\r\n    login();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  React.useEffect(() => {\r\n    login();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentPrincipal, principals]);\r\n  \r\n  const loader = (l) => {\r\n    setLoaderOpen(l);\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      {appState === 0 ?\r\n      <Connect alert={alert} confirm={confirm} login={login} loader={loader} /> : \"\" }\r\n      {appState === 1 ?\r\n      <Unlock alert={alert} confirm={confirm} login={login} remove={remove} loader={loader} /> : \"\"}\r\n      {appState === 2 ?\r\n      <Wallet alert={alert} confirm={confirm} logout={logout} remove={remove} loader={loader} /> : \"\"}\r\n      <Backdrop className={classes.backdrop} open={loaderOpen}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <AlertDialog open={showAlert} title={alertData.title} message={alertData.message} buttonLabel={alertData.buttonLabel} handler={alertData.handler} />\r\n      <ConfirmDialog open={showConfirm} title={confirmData.title} message={confirmData.message} buttonCancel={confirmData.buttonCancel} buttonConfirm={confirmData.buttonConfirm} handler={confirmData.handler} />\r\n    </>\r\n  );\r\n}","import { createStore } from \"redux\";\r\nimport {principalToAccountIdentifier, LEDGER_CANISTER_ID} from './ic/utils.js';\r\n\r\nvar appData = {\r\n  principals : [],\r\n  addresses : [],\r\n  currentPrincipal : 0,\r\n  currentAccount : 0,\r\n  currentToken : 0,\r\n};\r\nfunction initDb(){\r\n  var db = localStorage.getItem('_db');\r\n  if (db){\r\n    db = JSON.parse(db);\r\n    \r\n    //db versioning\r\n    var savenow = false;\r\n    savenow = true;\r\n    if (!Array.isArray(db)) {\r\n      db = [[db],[],[0,0,0]];\r\n      console.log(\"Converting old DB to new\");\r\n      savenow = true;\r\n    }\r\n    if (db.length === 2) {\r\n      db[2] = [0,0,0];\r\n      savenow = true;\r\n    }\r\n    db[0].map(principal => {\r\n      var _principal = {\r\n        accounts : [],\r\n        neurons : [],\r\n        apps : [],\r\n        identity : principal.identity\r\n      };\r\n      principal.accounts.map((account, subaccount) => {\r\n        //savenow = true;\r\n        //if (subaccount >= 2) return;\r\n        if (account.length === 2) account[2] = [];\r\n        _principal.accounts.push({\r\n          name : account[0],\r\n          address : principalToAccountIdentifier(principal.identity.principal, subaccount),\r\n          tokens : [\r\n            {\r\n              id : LEDGER_CANISTER_ID,\r\n              name : \"Internet Computer\",\r\n              symbol : \"ICP\",\r\n              decimals : 8,\r\n            }, \r\n            ...account[1]\r\n          ],\r\n          nfts : account[2] ?? []\r\n        });    \r\n        return true;\r\n      });\r\n      if (!principal.hasOwnProperty('apps')) principal.apps = [];\r\n      principal.apps.map(app => {\r\n        _principal.apps.push(app);\r\n        return true;\r\n      });\r\n      /* Do we need to store neruons?\r\n      if (!principal.hasOwnProperty('neurons')) principal.neurons = [];\r\n      principal.neurons.map(neuronId => {\r\n        _principal.neurons.push({\r\n          id : neuronId,\r\n          data : false\r\n        });\r\n      });*/\r\n      appData.principals.push(_principal);\r\n      return true;\r\n    });\r\n    \r\n    appData.addresses = db[1];\r\n    appData.currentPrincipal = db[2][0];\r\n    appData.currentAccount = db[2][1];\r\n    appData.currentToken = db[2][2];\r\n    \r\n    if (savenow) saveDb(appData);\r\n    return appData;\r\n  }\r\n}\r\nfunction newDb(identity){\r\n  var tc = [[\r\n    {\r\n      accounts : [\r\n        [\"Main\", \r\n          [], []\r\n        ]\r\n      ],\r\n      identity : identity,\r\n      neurons : [],\r\n      apps : []\r\n    }\r\n  ],[],[0,0,0]];\r\n  localStorage.setItem('_db', JSON.stringify(tc));\r\n  return initDb();\r\n}\r\nfunction clearDb(){\r\n  localStorage.removeItem('_db');\r\n  var clearState = {\r\n    principals : [],\r\n    addresses : [],\r\n    currentPrincipal : 0,\r\n    currentAccount : 0,\r\n    currentToken : 0,\r\n  };\r\n  appData = clearState;\r\n  return clearState;\r\n}\r\nfunction saveDb(newState){\r\n  //console.log(newState);\r\n  var updatedDb = [[], newState.addresses, [newState.currentPrincipal, newState.currentAccount, newState.currentToken]];\r\n  \r\n  newState.principals.map(principal => {\r\n    var _p = {\r\n      accounts : [],\r\n      neurons : [],\r\n      apps : [],\r\n      identity : principal.identity\r\n    };\r\n    principal.accounts.map(account => {\r\n      var _a = [account.name, [], account.nfts];\r\n      account.tokens.map((b, i) => {\r\n        if (i === 0) return false;\r\n        _a[1].push(b);\r\n        return true;      \r\n      });\r\n      _p.accounts.push(_a);\r\n      return true;\r\n    });\r\n    principal.apps.map(app => {\r\n      _p.apps.push(app);\r\n      return true;\r\n    });\r\n    /* Do we need to store?\r\n    principal.neurons.map(neuron => {\r\n      _p.neurons.push(neuron.id);\r\n    });*/\r\n    updatedDb[0].push(_p);\r\n    return true;\r\n  });\r\n  localStorage.setItem('_db', JSON.stringify(updatedDb));\r\n  appData = newState;\r\n  return newState;\r\n}\r\n\r\ninitDb();\r\nfunction rootReducer(state = appData, action) {\r\n  switch(action.type){\r\n    case \"app/edit\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              apps : principal.apps.map((app) => {\r\n                if (app.host === action.payload.app.host) {\r\n                  return {\r\n                    ...app,\r\n                    apikey : action.payload.app.apikey\r\n                  }\r\n                } else {\r\n                  return app;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"app/add\": //TODO\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              apps : [\r\n                ...principal.apps,\r\n                action.payload.app\r\n              ]\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"app/remove\": //TODO\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              apps : principal.apps.filter(e => (e && e.host !== action.payload.host))\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"neuron/add\": //TODO\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              neurons : [\r\n                ...principal.neurons,\r\n                action.payload.neuron\r\n              ]\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"neuron/scan\": //TODO\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              neurons : action.payload.neurons\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"account/nft/remove\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii === state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    nfts : account.nfts.filter(e => (e && e.id !== action.payload.id)),\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"removewallet\":\r\n      return clearDb();\r\n    case \"createwallet\":\r\n      return newDb(action.payload.identity);\r\n    case \"deletewallet\":\r\n      return saveDb({\r\n        ...state,\r\n        currentPrincipal : (state.currentPrincipal > action.payload.index ? state.currentPrincipal - 1 : state.currentPrincipal),\r\n        principals : state.principals.filter((e,i) => i !== action.payload.index)\r\n      });\r\n    case \"addwallet\": //TODO\r\n      var cp = state.principals.length;\r\n      return saveDb({\r\n        ...state,\r\n        principals : [\r\n          ...state.principals,\r\n          {\r\n            accounts : [\r\n              {\r\n                name : \"Main\",\r\n                address : principalToAccountIdentifier(action.payload.identity.principal, 0),\r\n                tokens : [\r\n                  {\r\n                    id : LEDGER_CANISTER_ID,\r\n                    name : \"Internet Computer\",\r\n                    symbol : \"ICP\",\r\n                    decimals : 8,\r\n                    type : 'fungible',\r\n                  }\r\n                ],\r\n                nfts : []\r\n              }\r\n            ],\r\n            identity : action.payload.identity,\r\n            neurons : [],\r\n            apps : [],\r\n          },\r\n        ],\r\n        currentPrincipal : cp\r\n      });\r\n    case \"currentPrincipal\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : 0,\r\n        currentAccount : 0,\r\n        currentPrincipal : action.payload.index\r\n      });\r\n    case \"currentAccount\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : 0,\r\n        currentAccount : action.payload.index\r\n      });\r\n    case \"currentToken\":\r\n      return saveDb({\r\n        ...state,\r\n        currentToken : action.payload.index\r\n      });\r\n    case \"account/edit\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii === state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    name : action.payload.name\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"account/add\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : [...principal.accounts, {\r\n                name : \"Account \" + action.payload.id,\r\n                address : principalToAccountIdentifier(action.payload.principal, action.payload.id),\r\n                tokens : [{\r\n                  name : \"Internet Computer\",\r\n                  symbol : \"ICP\",\r\n                  decimals : 8,\r\n                }],\r\n                nfts : []\r\n              }]\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"account/token/add\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii === state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    tokens : [...account.tokens, action.payload.metadata]\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"account/nft/add\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === state.currentPrincipal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii === state.currentAccount) {\r\n                  return {\r\n                    ...account,\r\n                    nfts : [...account.nfts, action.payload.nft]\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n      \r\n    case \"account/nft/addToAccount\":\r\n      return saveDb({\r\n        ...state,\r\n        principals : state.principals.map((principal,i) => {\r\n          if (i === action.payload.principal) {\r\n            return {\r\n              ...principal,\r\n              accounts : principal.accounts.map((account,ii) => {\r\n                if (ii === action.payload.account) {\r\n                  return {\r\n                    ...account,\r\n                    nfts : [...account.nfts, action.payload.nft]\r\n                  }\r\n                } else {\r\n                  return account;\r\n                }\r\n              }),\r\n            }\r\n          } else {\r\n            return principal;\r\n          }\r\n        }),\r\n      });\r\n    case \"addresses/add\":\r\n      return saveDb({\r\n        ...state,\r\n        addresses: [...state.addresses, action.payload]\r\n      });\r\n    case \"addresses/edit\": \r\n      return saveDb({\r\n        ...state,\r\n        addresses:  state.addresses.map((address,i) => {\r\n          if (i === action.payload.index) {\r\n            return {\r\n              name : action.payload.name,\r\n              address : action.payload.address,\r\n            }\r\n          } else {\r\n            return address;\r\n          }\r\n        })\r\n      });\r\n    case \"addresses/delete\":\r\n      return saveDb({\r\n        ...state,\r\n        addresses : state.addresses.filter((e,i) => i !== action.payload)\r\n      });\r\n    default: break;\r\n  }\r\n  return state;\r\n};\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;","import { red } from '@material-ui/core/colors';\r\nimport { createTheme  } from '@material-ui/core/styles';\r\n\r\n// A custom theme for this app\r\nconst theme = createTheme ({\r\n  palette: {\r\n    primary: {\r\n      main: '#003240',\r\n    },\r\n    secondary: {\r\n      main: '#00b894',\r\n    },\r\n    error: {\r\n      main: red.A400,\r\n    },\r\n    background: {\r\n      default: '#fafafa',\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiCssBaseline: {\r\n      \"@global\": {\r\n        body: {\r\n          backgroundImage:\r\n            \"url(./bg.png)\"\r\n        }\r\n      }\r\n    },\r\n    MuiIconButton: {\r\n      label : {\r\n        color : \"#00b894\"\r\n      }\r\n    },\r\n    MuiAvatar: {\r\n      colorDefault: {\r\n        backgroundColor : '#00b894',\r\n        color : 'white'\r\n      },\r\n    },\r\n    MuiListItemIcon: {\r\n      root: {\r\n        color : '#00b894'\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\nimport {StoicIdentity} from './ic/identity.js';\r\nimport theme from './theme';\r\nimport '@fontsource/roboto';\r\n\r\nconst params = new URLSearchParams(window.location.search);\r\nif (params.get('stoicTunnel') !== null) {\r\n  const hex2buf = (hex) => {\r\n    const view = new Uint8Array(hex.length / 2)\r\n    for (let i = 0; i < hex.length; i += 2) {\r\n      view[i / 2] = parseInt(hex.substring(i, i + 2), 16)\r\n    }\r\n    return view;\r\n  };\r\n  function buf2hex(buffer) {\r\n    return [...new Uint8Array(buffer)]\r\n      .map(x => x.toString(16).padStart(2, '0'))\r\n      .join('');\r\n  }\r\n  const sendMessageToExtension = (e, success, data) => {\r\n    window.parent.postMessage({\r\n      action : e.data.action,\r\n      listener : e.data.listener,\r\n      target : \"STOIC-EXT\",\r\n      success : success,\r\n      data : data\r\n    }, '*')\r\n  }\r\n  const verify = async (data, apikey, sig) => {\r\n    var enc = new TextEncoder();\r\n    var encdata = enc.encode(data);\r\n    var pubk = await window.crypto.subtle.importKey(\r\n      \"spki\",\r\n      hex2buf(apikey),\r\n      {\r\n        name: \"ECDSA\",\r\n        namedCurve: \"P-384\"\r\n      },\r\n      true,\r\n      [\"verify\"]\r\n    );\r\n    return await window.crypto.subtle.verify(\r\n      {\r\n        name: \"ECDSA\",\r\n        hash: {name: \"SHA-384\"},\r\n      },\r\n      pubk,\r\n      hex2buf(sig),\r\n      encdata\r\n    );\r\n  };\r\n  window.addEventListener(\"message\", async function(e){\r\n    if (e && e.data && e.data.target === 'STOIC-IFRAME') {\r\n      const state = store.getState();\r\n      const principal = state.principals[state.currentPrincipal];\r\n      if (principal.identity.principal === e.data.principal) {\r\n        if (principal.apps.filter(a => a.apikey === e.data.apikey).length > 0) {\r\n          StoicIdentity.load(principal.identity).then(async () => {\r\n            var id = StoicIdentity.getIdentity(e.data.principal);\r\n            if (id) {\r\n              var verified = await verify(e.data.payload, e.data.apikey, e.data.sig);\r\n              if (verified) {\r\n                var response = {\r\n                  signed : buf2hex(await id.sign(hex2buf(e.data.payload)))\r\n                };\r\n                if (id.hasOwnProperty('_delegation') ) {\r\n                  response.chain = id.getDelegation().toJSON();\r\n                }\r\n                sendMessageToExtension(e, true, JSON.stringify(response));\r\n                switch (e.data.action) {\r\n                  case 'sign':\r\n                  break;\r\n                  default:\r\n                  break;\r\n                }\r\n              } else {            \r\n                sendMessageToExtension(e, false, \"Invalid signature for payload\");\r\n              }\r\n            } else {        \r\n              sendMessageToExtension(e, false, \"The principal is not unlocked\");\r\n            }\r\n          }).catch(err => {            \r\n            sendMessageToExtension(e, false, err);\r\n          });\r\n        } else {\r\n          sendMessageToExtension(e, false, \"API key is not valid for this principal\");\r\n        }\r\n      } else {\r\n        sendMessageToExtension(e, false, \"Incorrect Principal is logged in\");\r\n      }\r\n    }\r\n  }, false);\r\n} else {\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <App />\r\n      </ThemeProvider>\r\n    </Provider>,\r\n    document.querySelector('#root'),\r\n  );      \r\n}"],"sourceRoot":""}